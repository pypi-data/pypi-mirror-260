(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[390],{2036:function(e,t,a){Promise.resolve().then(a.bind(a,3793))},3793:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var s=a(7514),n=a(4802),r=a(5982),l=a(9546);let i=async e=>{let{queryKey:t}=e,[a,{datasetId:s}]=t,{data:n}=await l.Z.get("".concat("http://localhost:5009","/samples"),{params:{dataset_id:s}});return n.sort((e,t)=>t.last_activity.localeCompare(e.last_activity)),n};var c=a(5037),o=a(4654),d=a(5202),u=a(6743),m=a(1006),f=a(8603),p=a(8803);function h(e){let{datasetId:t}=e,a="".concat("http://localhost:5009","/download_dataset?dataset_id=").concat(t);return(0,s.jsx)(c.z,{variant:"secondary",asChild:!0,children:(0,s.jsx)("a",{href:a,download:!0,children:"Download samples"})})}var x=a(5228),g=a(541),j=a(2471),y=a(2514),N=a(6838),w=a(5847),b=a(783),v=a(4164);let C=[{role:"system",content:"You are a helpful assistant"},{role:"user",content:"What's 2 + 2?"},{role:"assistant",content:"It's 4"}];function S(e){let{datasetId:t}=e,[a,n]=(0,p.useState)(!1),l=(0,y.D)({mutationFn:v.a}),i=(0,r.NL)(),{toast:o}=(0,j.pm)();return(0,s.jsxs)(g.Vq,{open:a,onOpenChange:n,children:[(0,s.jsx)(g.hg,{asChild:!0,children:(0,s.jsxs)(c.z,{children:[(0,s.jsx)(w.Z,{className:"size-5 mr-2"}),"New sample"]})}),(0,s.jsxs)(g.cZ,{className:"overflow-y-scroll max-h-screen max-w-[800px]",children:[(0,s.jsx)(g.fK,{}),(0,s.jsx)(x.Zp,{initialMessages:C,onClose:e=>{let{status:a,content:r}=e;"cancel"===a&&n(!1),"save"===a&&l.mutate({newSample:{dataset_id:t,sample_id:(0,b.Z)(),sample_name:"",last_activity:new Date().toISOString(),messages:r}},{onSuccess(e){i.refetchQueries({queryKey:["samples"]}),n(!1),o({description:(0,s.jsxs)("span",{className:"flex",children:[(0,s.jsx)(N.Z,{className:"size-5 mr-2 text-green-500"}),"Created!"]})})},onError(e){}})}})]})]})}let _=async e=>{let{queryKey:t}=e,[a,{datasetId:s,sampleId:n}]=t,{data:r}=await l.Z.get("".concat("http://localhost:5009","/sample"),{params:{dataset_id:s,sample_id:n}});return r};function R(e){let{datasetId:t,sampleId:a}=e,[l,i]=(0,p.useState)(!1),{data:o,isLoading:d,error:u}=(0,n.a)({queryKey:["sample",{datasetId:t,sampleId:a}],queryFn:_}),m=(0,y.D)({mutationFn:v.a}),{toast:f}=(0,j.pm)(),h=(0,r.NL)();return(0,s.jsxs)(g.Vq,{open:l,onOpenChange:i,children:[(0,s.jsx)(g.hg,{asChild:!0,children:(0,s.jsx)(c.z,{children:"View"})}),(0,s.jsxs)(g.cZ,{className:"overflow-y-scroll max-h-screen max-w-[800px]",children:[(0,s.jsx)(g.fK,{}),o?(0,s.jsx)(x.Zp,{initialMessages:(null==o?void 0:o.messages)||[],onClose:e=>{let{status:n,content:r}=e;"cancel"===n&&i(!1),"save"===n&&m.mutate({newSample:{dataset_id:t,sample_id:a,sample_name:"",last_activity:new Date().toISOString(),messages:r}},{onSuccess(e){i(!1),f({description:(0,s.jsxs)("span",{className:"flex",children:[(0,s.jsx)(N.Z,{className:"size-5 mr-2 text-green-500"}),"Saved!"]})}),h.refetchQueries({queryKey:["sample",{datasetId:t,sampleId:a}]})},onError(e){}})}}):(0,s.jsx)("span",{className:"w-full text-center",children:"Loading..."})]})]})}function Z(e){let{datasetId:t}=e,{data:a,isLoading:l,error:x}=(0,n.a)({queryKey:["samples",{datasetId:t}],queryFn:i}),[g,j]=(0,p.useState)([]);(0,p.useEffect)(()=>{j([{accessorKey:"sample_id",header:"Sample id"},{accessorKey:"last_activity",header:"Last activity",cell:e=>{let{getValue:t}=e;return new Date(t()).toLocaleString(void 0,{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}},{id:"actions",cell:e=>{let{row:a}=e;return(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(R,{datasetId:t,sampleId:a.original.sample_id})})}}])},[]);let y=(0,d.b7)({data:a||[],columns:g||[],getCoreRowModel:(0,u.sC)(),getPaginationRowModel:(0,u.G_)()});return(0,r.NL)(),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)(h,{datasetId:t}),(0,s.jsx)(S,{datasetId:t})]}),(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(o.iA,{children:[(0,s.jsx)(o.xD,{children:y.getHeaderGroups().map(e=>(0,s.jsx)(o.SC,{children:e.headers.map(e=>(0,s.jsx)(o.ss,{children:e.isPlaceholder?null:(0,d.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(o.RM,{children:l?(0,s.jsx)(o.SC,{children:(0,s.jsx)(o.pj,{colSpan:g.length,className:"h-24 text-center",children:"Loading..."})}):y.getRowModel().rows.map(e=>(0,s.jsx)(o.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(o.pj,{children:(0,d.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id))})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,s.jsx)(c.z,{variant:"outline",size:"icon",onClick:()=>y.previousPage(),disabled:!y.getCanPreviousPage(),children:(0,s.jsx)(m.Z,{className:"size-5"})}),(0,s.jsxs)("p",{children:["Page ",y.getState().pagination.pageIndex+1," of"," ",y.getPageCount()]}),(0,s.jsx)(c.z,{variant:"outline",size:"icon",onClick:()=>y.nextPage(),disabled:!y.getCanNextPage(),children:(0,s.jsx)(f.Z,{className:"size-5"})})]})]})})}var z=a(2600);function P(){let e=(0,z.useSearchParams)().get("datasetId");return(0,s.jsx)("div",{className:"container my-4",children:(0,s.jsx)(Z,{datasetId:e||""})})}},4654:function(e,t,a){"use strict";a.d(t,{RM:function(){return c},SC:function(){return o},iA:function(){return l},pj:function(){return u},ss:function(){return d},xD:function(){return i}});var s=a(7514),n=a(8803),r=a(5893);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,r.cn)("w-full caption-bottom text-sm",a),...n})})});l.displayName="Table";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("thead",{ref:t,className:(0,r.cn)("[&_tr]:border-b",a),...n})});i.displayName="TableHeader";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,r.cn)("[&_tr:last-child]:border-0",a),...n})});c.displayName="TableBody",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...n})}).displayName="TableFooter";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("tr",{ref:t,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...n})});o.displayName="TableRow";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("th",{ref:t,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...n})});d.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("td",{ref:t,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("caption",{ref:t,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",a),...n})}).displayName="TableCaption"},1006:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(1319).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},8603:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(1319).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},5202:function(e,t,a){"use strict";a.d(t,{b7:function(){return l},ie:function(){return r}});var s=a(8803),n=a(6743);/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function r(e,t){return e?"function"==typeof e&&(()=>{let t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()||"function"==typeof e||"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)?s.createElement(e,t):e:null}function l(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[a]=s.useState(()=>({current:(0,n.W_)(t)})),[r,l]=s.useState(()=>a.current.initialState);return a.current.setOptions(t=>({...t,...e,state:{...r,...e.state},onStateChange:t=>{l(t),null==e.onStateChange||e.onStateChange(t)}})),a.current}}},function(e){e.O(0,[439,412,796,38,857,802,554,401,459,470,861,744],function(){return e(e.s=2036)}),_N_E=e.O()}]);
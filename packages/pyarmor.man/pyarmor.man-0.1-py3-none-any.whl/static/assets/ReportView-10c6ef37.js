import{d as ee,u as le,r as i,y as V,x as te,o as oe,C as ae,a as d,c as N,w as o,b,e as ne,t as f,s as se,g as e,h as a,f as $,n as g,l as h,p as ue,v as ie,D as re,i as de,j as ce,E as x,_ as R}from"./index-557e0199.js";const pe=["id"],ve={key:0,class:"iv-v"},me={key:1,class:"iv-v"},fe={key:2,class:"iv-v"},_e="pyarmor@163.com",ye=ee({__name:"ReportView",props:{stepinfo:Object},emits:["nextStep"],setup(U,{emit:A}){const r=U,{$gettext:l}=le(),u=i("gen"),c=i("exception"),_=i(""),k=V(()=>`[Bug:${c.value}:${u.value}] ${_.value}`),C=i(""),j=V(()=>{const B=encodeURIComponent(k.value),t=encodeURIComponent(C.value);return`mailto:${_e}?subject=${B}&body=${t}`}),n=i(0),G=i(2),w=i(!0),F=V(()=>n.value===0?l("Report Issue"):n.value===1?l("Reproduced Steps"):l("Preview and Finish")),I=te("refman"),S=i(null),E=i(null);oe(()=>{I.value.sysinfo(S),I.value.appinfo(E),r.stepinfo&&(r.stepinfo.mode&&(c.value=r.stepinfo.mode),r.stepinfo.group&&(u.value=r.stepinfo.group),r.stepinfo.tags&&u.value==="reg"&&(u.value=r.stepinfo.tags.includes("group license")?"reg-group":u.value),r.stepinfo.msg&&(_.value=r.stepinfo.msg))});const z=x(()=>R(()=>import("./RegisterLicense-76e561d2.js"),["assets/RegisterLicense-76e561d2.js","assets/index-557e0199.js","assets/index-92518c5f.css"])),q=x(()=>R(()=>import("./RegisterGroup-1c85ece3.js"),["assets/RegisterGroup-1c85ece3.js","assets/index-557e0199.js","assets/index-92518c5f.css"])),M=x(()=>R(()=>import("./ObfuscateScript-797f9e2f.js"),["assets/ObfuscateScript-797f9e2f.js","assets/index-557e0199.js","assets/index-92518c5f.css"])),K=x(()=>R(()=>import("./RunScript-e4683699.js"),["assets/RunScript-e4683699.js","assets/index-557e0199.js","assets/index-92518c5f.css"])),H={RegisterLicense:z,RegisterGroup:q,ObfuscateScript:M,RunScript:K},J=V(()=>u.value==="reg"?"RegisterLicense":u.value==="reg-group"?"RegisterGroup":u.value==="gen"?"ObfuscateScript":u.value==="run"?"RunScript":"ObfuscateScript");ae(()=>{w.value=!0,n.value=0});const y=i(null),P=()=>{y.value&&y.value.validate()&&(C.value=y.value.bugbody,n.value++)},D=()=>{n.value===1?P():n.value===0&&(c.value==="crash"||_.value)&&n.value++};return(B,t)=>{const m=d("el-button"),Q=d("el-button-group"),v=d("el-option"),L=d("el-select"),p=d("el-form-item"),O=d("el-input"),T=d("el-form"),W=d("el-link"),X=d("el-drawer");return b(),N(X,{modelValue:w.value,"onUpdate:modelValue":t[7]||(t[7]=s=>w.value=s),"show-close":!0,"destroy-on-close":!1,size:"50%",onClose:t[8]||(t[8]=s=>A("nextStep")),direction:"ltr"},{header:o(({close:s,titleId:Y,titleClass:Z})=>[ne("h4",{id:Y,class:se(Z)},f(F.value),11,pe),e(Q,{size:"small",class:"mr-5"},{default:o(()=>[e(m,{onClick:t[0]||(t[0]=be=>n.value--),disabled:n.value===0,icon:a(de)},null,8,["disabled","icon"]),e(m,{onClick:D,disabled:n.value>=G.value,icon:a(ce)},null,8,["disabled","icon"])]),_:1})]),default:o(()=>[n.value===0?(b(),$("div",ve,[e(T,{"label-position":"top","label-width":"10rem",class:"w-100 m-3"},{default:o(()=>[e(p,{label:a(l)("Error Mode")},{default:o(()=>[e(L,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=s=>c.value=s),class:"w-100 mr-3"},{default:o(()=>[e(v,{label:a(l)("Crash or segment fault"),value:"crash"},null,8,["label"]),e(v,{label:a(l)("Raise exception or show error message"),value:"exception"},null,8,["label"]),e(v,{label:a(l)("No error message, but not expected results"),value:"unexpected"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(p,{label:a(l)("Occurred in")},{default:o(()=>[e(L,{modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=s=>u.value=s),class:"w-100 mr-3"},{default:o(()=>[e(v,{label:a(l)("Registering Basic or Pro License"),value:"reg"},null,8,["label"]),e(v,{label:a(l)("Registering Group License"),value:"reg-group"},null,8,["label"]),e(v,{label:a(l)("Generating Obfuscated Files"),value:"gen"},null,8,["label"]),e(v,{label:a(l)("Running Obfuscated Scripts"),value:"run"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(p,{required:c.value!=="crash",label:a(l)("Title")},{default:o(()=>[e(O,{modelValue:_.value,"onUpdate:modelValue":t[3]||(t[3]=s=>_.value=s),clearable:"",placeholder:c.value==="exception"?"RuntimeError: this license key is expired":"",class:"mr-3"},null,8,["modelValue","placeholder"])]),_:1},8,["required","label"]),e(p,null,{default:o(()=>[e(m,{type:"",onClick:D,plain:""},{default:o(()=>[g(f(a(l)("Next")),1)]),_:1})]),_:1})]),_:1})])):h("",!0),S.value&&E.value?ue((b(),$("div",me,[(b(),N(re(H[J.value]),{ref_key:"issueBodyRef",ref:y,errmode:c.value,sysinfo:S.value,appinfo:E.value},null,8,["errmode","sysinfo","appinfo"])),e(p,{class:"right"},{default:o(()=>[e(m,{type:"",onClick:t[4]||(t[4]=s=>n.value--),plain:""},{default:o(()=>[g(f(a(l)("Prev")),1)]),_:1}),e(m,{type:"",onClick:P,plain:""},{default:o(()=>[g(f(a(l)("Next")),1)]),_:1})]),_:1})],512)),[[ie,n.value===1]]):h("",!0),n.value===2?(b(),$("div",fe,[e(T,{"label-position":"top"},{default:o(()=>[e(p,{label:a(l)("Title")},{default:o(()=>[e(O,{modelValue:k.value,"onUpdate:modelValue":t[5]||(t[5]=s=>k.value=s),readonly:"",disabled:"",clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),e(p,{label:a(l)("Description")},{default:o(()=>[e(O,{"model-value":C.value,rows:16,disabled:"",type:"textarea"},null,8,["model-value"])]),_:1},8,["label"]),e(p,null,{default:o(()=>[e(m,{type:"",onClick:t[6]||(t[6]=s=>n.value--),plain:"",class:"right"},{default:o(()=>[g(f(a(l)("Prev")),1)]),_:1}),e(W,{href:j.value,underline:!1,type:"primary",class:"mx-5"},{default:o(()=>[g(f(a(l)("Submit by email")),1)]),_:1},8,["href"])]),_:1})]),_:1})])):h("",!0)]),_:1},8,["modelValue"])}}});export{ye as default};

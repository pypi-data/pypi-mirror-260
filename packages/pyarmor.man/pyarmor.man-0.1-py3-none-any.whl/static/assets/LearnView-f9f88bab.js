import{d as z,u as Q,r as f,o as q,a as m,b as l,c as h,w as o,e as O,t as L,f as u,g as r,h as M,i as J,j as X,k as Y,l as T,F as b,m as w,T as F,n as A,p as G,v as N,q as D,s as Z}from"./index-557e0199.js";const ee={class:"iv-hbar"},te={key:0,class:"right"},ne={key:1,class:"iv-v"},ae={key:0},le={key:1,class:"iv-v"},oe=z({__name:"LearnCard",props:{automode:Boolean,cardinfo:Object},emits:["learnConcept","finishConcept"],setup(I,{emit:C}){const s=I;Q();const _=f(3e3),g=f(1),U=f(1),e=f([0,-1,-1]),d=f({type:"",content:[]}),v=()=>{const x=s.cardinfo.learn;e.value[0]=x.active[0],e.value[1]=x.active[1],e.value[2]=x.active[2],g.value=e.value[0]+1,D(k)},k=(x,y)=>{const c=s.cardinfo.learn,S=s.cardinfo.concept,B=e.value[0],n=S[c.content[B].name];if(e.value[1]===-1)e.value[1]=0,c.active[1]=0,d.value.content.push(n[0]);else{const a=n[e.value[1]].target;if(a!==void 0&&e.value[2]!==2)e.value[2]===-1?(e.value[2]+=1,c.active[2]+=1,s.cardinfo.learn.next=k,C("learnConcept",a)):e.value[2]===0?(e.value[2]+=1,c.active[2]+=1,d.value.content.pop()):e.value[2]===1&&(e.value[2]+=1,c.active[2]+=1,d.value.content.push(n[e.value[1]]));else if(e.value[1]>=n.length-1){const t=e.value[0];t<c.content.length-1?y==="action"?(e.value[0]+=1,c.active[0]+=1,g.value++,e.value[1]=-1,e.value[2]=-1,c.active[1]=-1,c.active[2]=-1,d.value.type=c.content[t+1].type,d.value.content.splice(0),D(k)):setTimeout(()=>k(x,"action"),_.value):y==="action"?C("finishConcept",s.cardinfo):setTimeout(()=>k(x,"action"),_.value)}else e.value[1]+=1,c.active[1]+=1,e.value[2]=-1,c.active[2]=-1,d.value.content.push(n[e.value[1]])}};return q(()=>{s.cardinfo&&(U.value=s.cardinfo.learn.content.length),s.automode&&v()}),(x,y)=>{const c=m("el-button"),S=m("el-button-group"),B=m("el-step"),n=m("el-steps"),a=m("el-card");return l(),h(a,{shadow:"hover",class:"box-card"},{header:o(()=>[O("div",ee,[O("span",null,L(s.cardinfo.concept.title),1),s.automode?T("",!0):(l(),u("div",te,[r(S,{size:"small"},{default:o(()=>[r(c,{onClick:y[0]||(y[0]=t=>g.value--),disabled:g.value<=1,icon:M(J),text:""},null,8,["disabled","icon"]),r(c,{onClick:y[1]||(y[1]=t=>g.value++),disabled:g.value>=U.value,icon:M(X),text:""},null,8,["disabled","icon"]),r(c,{onClick:y[2]||(y[2]=t=>C("finishConcept",s.cardinfo)),icon:M(Y),text:""},null,8,["icon"])]),_:1})]))])]),default:o(()=>[U.value>1?(l(),h(n,{key:0,active:g.value,"align-center":""},{default:o(()=>[(l(!0),u(b,null,w(s.cardinfo.learn.content,t=>(l(),h(B,{title:t.title},null,8,["title"]))),256))]),_:1},8,["active"])):T("",!0),s.automode?(l(),u(b,{key:1},[d.value.type==="list"?(l(),h(F,{key:0,onAfterEnter:k,name:"list",tag:"ul"},{default:o(()=>[(l(!0),u(b,null,w(d.value.content,(t,i)=>(l(),u("li",{key:`learn_a0${i}`},[r(c,{text:""},{default:o(()=>[A(L(typeof t=="string"?t:t.title),1)]),_:2},1024)]))),128))]),_:1})):(l(),u("div",ne,[r(F,{onAfterEnter:k,name:"list"},{default:o(()=>[(l(!0),u(b,null,w(d.value.content,(t,i)=>(l(),h(c,{key:`learn_a1${i}`,text:""},{default:o(()=>[A(L(typeof t=="string"?t:t.title),1)]),_:2},1024))),128))]),_:1})]))],64)):(l(!0),u(b,{key:2},w(s.cardinfo.learn.content,(t,i)=>(l(),u(b,null,[t.type==="list"?G((l(),u("ul",ae,[(l(!0),u(b,null,w(s.cardinfo.concept[t.name],(p,$)=>(l(),u("li",null,[r(c,{onClick:R=>C("learnConcept",p.target),disabled:p.target===void 0,text:""},{default:o(()=>[A(L(typeof p=="string"?p:p.title),1)]),_:2},1032,["onClick","disabled"])]))),256))],512)),[[N,i+1===g.value]]):G((l(),u("div",le,[(l(!0),u(b,null,w(s.cardinfo.concept[t.name],(p,$)=>(l(),h(c,{onClick:R=>C("learnConcept",p.target),disabled:p.target===void 0,text:""},{default:o(()=>[A(L(typeof p=="string"?p:p.title),1)]),_:2},1032,["onClick","disabled"]))),256))],512)),[[N,i+1===g.value]])],64))),256))]),_:1})}}}),ie={class:"p-3 w-100 h-100"},re={class:"iv-v w-100"},ce=z({__name:"LearnView",setup(I){const C=f("0");f("rarely"),f(3e3);const s=f(!0),_=f(!1),g={"obfuscated-script":{title:"Obfuscated Script",type:"Collection",components:[{title:"Obfuscated Python Script",target:"obfuscated-python-script"},{title:"Runtime Package",target:"runtime-package"},{title:"Runtime Key",target:"runtime-key"}],relations:[{title:"Obfuscated Python Script need import Runtime Package"},{title:"Runtime Package will check Runtime Key when Package is initializing"}],restrictions:void 0},user:{title:"User",type:"Atom",definition:["A Person, company or any organization","Using Pyarmor to generate obfuscated script"]},"build-device":{title:"Build Device",type:"Concept",definition:["A computer with any form, for example","PC or laptop","Qemu, VirtualBox, VMWare, ECS etc.","Docker container","CI/CD pipeline, GitHub Action"],components:[{title:"Platform",target:"supported-platform"},{title:"Python Interpreter",target:"supported-python"},"Pyarmor Command","Pyarmor License"],relations:["Used by User to generate Obfuscated Scripts"],restrictions:["Only Python 3.9+ works in Apple Silcon"]},"pyarmor-application":{title:"Pyarmor Command",type:"Application",definition:["A shell command `pyarmor`","Rich options to generate obfuscated scripts","Global and local configurations to change application behaviours"],components:["`pyarmor reg ...`: register Pyarmor License","`pyarmor gen ...`: generate obfuscated scripts","`pyarmor cfg ...`: change configurations"]},"pyarmor-license":{title:"Pyarmor License",type:"Cluster",definition:["Pyarmor License is used to unlock feature limitations"],components:[{title:"Basic License",target:"basic-license"},{title:"Pro License",target:"pro-license"},{title:"Group License",target:"group-license"}]},customer:{title:"Customer",type:"Atom",definition:["A Person, company or any organization","Run obfuscated scripts distributed by User"]},"target-device":{title:"Target Device",type:"Concept",definition:["A computer with any form, for example","PC or laptop","Qemu, VirtualBox, VMWare, ECS etc.","Docker container","CI/CD pipeline, GitHub Action"],components:[{title:"Platform",target:"supported-platform"},{title:"Python Interpreter",target:"supported-python"}],relations:["Used by Customer to run Obfuscated Scripts"],restrictions:["Not allowed to install Pyarmor Application","Not allowed to register Pyarmor License"]},"install-pyarmor":{title:"User install Pyarmor in Build Machine",type:"Relation",components:["pypi.org","Python packages: pyarmor","Python packages: pyarmor.cli","Python packages: pyarmor.cli.core"],relations:["User types command `pip install pyarmor` in Build Machine","Build Machine downloads packages from pypi.org by internet","Install packages to make `pyarmor` command in Build Machine"]},"register-pyarmor":{title:"User register Pyarmor in Build Machine",type:"Relation",components:["Reseller Website","Activation File","License Server","Registration File","Group Registration File","Device Registration File"],relations:["User purchase Pyarmor License from Reseller Website","Reseller send Activation File to User by email","User register Activation File to License Server by command `pyarmor reg`","License Server send Registration File to User","User register Registration File in Build Machine by command `pyarmor reg`"]},"generate-obfuscated-script":{title:"User generate Obfuscated Scripts in Build Machine",type:"Relation",relations:["User run `pyarmor gen` with rich options in Build Machine"]},"distribute-obfuscated-script":{title:"User distribute Obfuscated Scripts to Customer",type:"Relation",relations:["User copy Obfuscated Scripts to Customer"]},"run-obfuscated-script":{title:"Customer run Obfuscated Scripts in Target Machine",type:"Relation",relations:["Customer run Obfuscated Scripts in Target Machine"]},"obfuscated-python-script":{title:"Obfuscated Python Script",type:"Concept",definition:["A normal python script"],examples:["Here it's an example `foo.py`:","line 1: from pyarmor_runtime_000000 import __pyarmor__",'line 2: __pyarmor__(__file__, __name__, b"...")']},"runtime-package":{title:"Runtime Package",type:"Concept",definition:["A normal python package","With extension `pyarmor_runtime`"],examples:["dist/pyarmor_runtime_000000","    __init__.py","    pyarmor_runtime.so"]},"runtime-key":{title:"Runtime Key",type:"Concept",definition:["Stored expired date, hardware information","A file","A string is embedded into extension `pyarmor_runtime`"]},"supported-platform":{title:"Supported Platforms",type:"Atom",definition:["Windows with x86_64 or x86","Many Linuxs with x86_64, x86, aarch64, armv7","Apple Intel and Silicon","FreeBSD with x86_64","Android with x86_64, x86, aarch64, armv7","Alpine Linux (musl-c) with x86_64, armv7"]},"supported-python":{title:"Supported Python",type:"Atom",definition:["Python 3.7 - 3.12 in most of platforms","In Apple Silicon, only Python 3.9+"]},"basic-license":{title:"Basic License",type:"Concept",definition:["Unlock features:","big script","mix string"]},"pro-license":{title:"Pro License",type:"Concept",definition:["Unlock features:","All Basic License","RFT mode","BCC mode"]},"group-license":{title:"Group License",type:"Concept",definition:["Unlock features:","All Pro License","unlimited docker container"]}},U=[{title:"Essential Concepts",type:"Collection",components:[{title:"Obfuscated Script",target:"obfuscated-script"},{title:"User",target:"user"},{title:"Build Device",target:"build-device"},{title:"Pyarmor Application",target:"pyarmor-application"},{title:"Pyarmor License",target:"pyarmor-license"},{title:"Customer",target:"customer"},{title:"Target Device",target:"target-device"}],relations:[{title:"User install Pyarmor Application in Build Device",target:"install-pyarmor"},{title:"User register Pyarmor License in Build Device",target:"register-pyarmor"},{title:"User generate obfuscated scripts in Build Device",target:"generate-obfuscated-script"},{title:"User distribute obfuscated scripts to Target Device",target:"distribute-obfuscated-script"},{title:"Customer run Obfuscated scripts in Target Device",target:"run-obfuscated-script"}],restrictions:void 0},{},{},{}],e=f([{learn:null,concept:null},{learn:null,concept:null}]),d=f([]),v=f(0),k=n=>{const a=g[n],t=v.value===1?0:1,i=y(a);e.value[t].learn===null?(e.value[v.value].learn.next(),i.skew=!0,e.value[t].learn=i,e.value[t].concept=a,v.value=t):(e.value[t].learn.gone=!0,setTimeout(()=>{d.value.splice(0,0,{learn:e.value[t].learn,concept:e.value[t].concept}),setTimeout(()=>{v.value=t,e.value[t?0:1].learn.skew=!1,setTimeout(()=>{e.value[t?0:1].learn.next(),e.value[t].learn&&(e.value[t].learn.gone=!1),e.value[t].learn=null,D(()=>{i.skew=!0,e.value[t].learn=i,e.value[t].concept=a})},1500)},1500)},1500))},x=n=>{const a=v.value?0:1,t=e.value[a].learn;if(n.learn&&n.learn!==t)t!==null?(e.value[v.value].learn.gone=!0,setTimeout(()=>{e.value[v.value].learn=null,v.value=a,t.next&&D(t.next)},1500)):d.value.length?(e.value[v.value].learn.skew=!0,setTimeout(()=>{const i=d.value.splice(0,1)[0];e.value[a].learn=i.learn,e.value[a].concept=i.concept,e.value[a].learn.gone=!0,setTimeout(()=>{e.value[a].learn.gone=!1,v.value=a,setTimeout(()=>{e.value[a?0:1].learn.gone=!0,setTimeout(()=>{e.value[a?0:1].learn=null,setTimeout(()=>{i.learn.next&&D(i.learn.next)},1500)},1500)},1500)},1500)},1500)):(e.value[v.value].learn=null,S());else throw console.log(t,n.learn),Error("unreachable finish concept")},y=n=>{const a={type:"concept",active:[0,-1,-1],content:[]},t={definition:"Definition",components:"Components",relations:"Relations",restrictions:"Restrictions",examples:"Examples"};for(const i in t)n[i]!==void 0&&a.content.push({name:i,type:i==="relations"?"list":"concept",title:t[i]});return n.type==="Collection"||n.type==="Concept"||n.type==="Relation"||n.type==="Application"||n.type==="Cluster"||n.type==="Atom"||console.log(`unknown concept ${n.type}`),a},c=()=>{const n=U[parseInt(C.value)],a=y(n);d.value.splice(0),e.value.forEach(t=>{t.learn=null}),v.value=0,e.value[0].learn=a,e.value[0].concept=n,_.value=!0},S=()=>{_.value=!1},B=()=>{_.value&&nextStep()};return(n,a)=>{const t=m("el-option"),i=m("el-select"),p=m("el-form-item"),$=m("el-switch"),R=m("el-button"),W=m("el-form"),H=m("el-tag"),K=m("el-space"),E=m("el-col"),j=m("el-row");return l(),u("div",ie,[r(j,null,{default:o(()=>[r(E,{span:4},{default:o(()=>[r(K,{direction:"vertical"},{default:o(()=>[r(W,{"label-position":"top",class:"b p-5"},{default:o(()=>[r(p,{label:"Learn"},{default:o(()=>[r(i,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=P=>C.value=P),class:"w-100",size:"small"},{default:o(()=>[r(t,{label:n.$gettext("Essential Concepts"),value:"0"},null,8,["label"]),r(t,{label:n.$gettext("Basic Courses"),disabled:"",value:"1"},null,8,["label"]),r(t,{label:n.$gettext("Advanced Courses"),disabled:"",value:"2"},null,8,["label"]),r(t,{label:n.$gettext("Special Topics"),disabled:"",value:"3"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1}),r(p,null,{default:o(()=>[r($,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=P=>s.value=P),"active-text":"Auto Mode","inactive-text":""},null,8,["modelValue"])]),_:1}),r(p,null,{default:o(()=>[r(R,{loading:s.value&&_.value,disabled:_.value,onClick:c},{default:o(()=>[A(" Start ")]),_:1},8,["loading","disabled"]),_.value&&!s.value?(l(),h(R,{key:0,onClick:B},{default:o(()=>[A(" Next ")]),_:1})):T("",!0),_.value?(l(),h(R,{key:1,onClick:S},{default:o(()=>[A(" Stop ")]),_:1})):T("",!0)]),_:1})]),_:1}),O("div",re,[r(F,{name:"list"},{default:o(()=>[(l(!0),u(b,null,w(d.value,(P,V)=>(l(),h(H,{key:`stack${V}`,type:"success",effect:"plain"},{default:o(()=>[A(L(P.concept.title),1)]),_:2},1024))),128))]),_:1})])]),_:1})]),_:1}),r(E,{span:10},{default:o(()=>[(l(!0),u(b,null,w(e.value,(P,V)=>(l(),u(b,null,[_.value&&P&&P.learn!==null?(l(),h(oe,{key:0,class:Z(["box-card w-40 skew-view",{"skew-right":e.value[V].learn.skew,"card-gone":e.value[V].learn.gone}]),automode:s.value,cardinfo:P,onLearnConcept:k,onFinishConcept:x},null,8,["class","automode","cardinfo"])):T("",!0)],64))),256))]),_:1})]),_:1})])}}});export{ce as default};

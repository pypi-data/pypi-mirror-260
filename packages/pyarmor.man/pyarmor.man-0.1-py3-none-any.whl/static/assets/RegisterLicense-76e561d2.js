import{d as P,u as U,r as _,y as B,o as E,a as r,b as m,f as R,g as t,w as s,n as S,c as v,h as c,l as b}from"./index-557e0199.js";const T={class:"iv-item"},j=P({__name:"RegisterLicense",props:{errmode:String,sysinfo:Object,appinfo:Object},setup(y,{expose:x}){const f=y,{$gettext:i}=U(),e=_({device:{build:{form:"pc",platform:void 0,python:void 0,pyarmor:void 0},target:{same:!1,form:"pc",platform:void 0,python:void 0,pyarmor:void 0}},steps:[{ignored:!1,command:"",output:"",remark:""},{ignored:!1,command:"",output:"",remark:""},{ignored:!1,command:"",output:"",remark:""}],expected:""}),g=()=>{if(f.errmode==="unexpected"?d.value==="2":d.value==="1")return!0;d.value=`${parseInt(d.value)+1}`},w=B(()=>{const o=[],l=e.value.device.build,u=e.value.steps;o.push("### Environments"),o.push(`Build Machine: (${l.form}) ${l.platform}, Python ${l.python}, pyarmor ${l.pyarmor}`),o.push(""),o.push("### Reproduced steps");const n=0;return o.push(""),o.push(`${u[n].command}`),o.push(`${u[n].output}`),u[0].extra&&(o.push(`
Remark:`),o.push(`${u[n].remark}`)),e.value.expected&&(o.push(""),o.push("### Expected result"),o.push(e.value.expected)),o.join(`
`)});E(()=>{const o=f.sysinfo,l=f.appinfo;e.value.device.build.platform=`${o.platform} ${o.arch}`,e.value.device.build.python=`${o.python.version}`,e.value.device.build.pyarmor=`${l.pyarmor}`});const d=_("1");return x({validate:g,bugbody:w}),(o,l)=>{const u=r("el-form-item"),n=r("el-option"),k=r("el-select"),p=r("el-input"),h=r("el-form"),V=r("el-tab-pane"),$=r("el-tabs"),C=r("el-space");return m(),R("div",T,[t(C,{direction:"vertical"},{default:s(()=>[t($,{modelValue:d.value,"onUpdate:modelValue":l[8]||(l[8]=a=>d.value=a),type:"card"},{default:s(()=>[t(V,{label:"Step 1",name:"1"},{default:s(()=>[t(h,{inline:!0,"label-position":"left","label-width":"120",class:"w-100"},{default:s(()=>[t(u,{class:"w-100"},{default:s(()=>[S(" This step should describe how to register Pyarmor License ")]),_:1}),t(u,{label:"Build Device",class:"w-100"},{default:s(()=>[t(k,{class:"w-100",modelValue:e.value.device.build.form,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.device.build.form=a)},{default:s(()=>[t(n,{label:"Physics device (PC, Laptop, etc.)",value:"pc"}),t(n,{label:"Virtual machine (Qemu, VMWare, ECS, etc.)",value:"vm"}),t(n,{label:"CI/CD pipeline",value:"ci"}),t(n,{label:"Docker container",value:"docker"})]),_:1},8,["modelValue"])]),_:1}),t(u,{label:"Platform"},{default:s(()=>[t(p,{modelValue:e.value.device.build.platform,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.device.build.platform=a),placeholder:"linux.x86_64"},null,8,["modelValue"])]),_:1}),t(u,{label:"Python"},{default:s(()=>[t(p,{modelValue:e.value.device.build.python,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.device.build.python=a),placeholder:"3.12.2"},null,8,["modelValue"])]),_:1}),t(u,{label:"Pyarmor"},{default:s(()=>[t(p,{modelValue:e.value.device.build.pyarmor,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.device.build.pyarmor=a),placeholder:"8.5.0"},null,8,["modelValue"])]),_:1}),e.value.steps[0].ignored?b("",!0):(m(),v(u,{key:0,class:"w-100",label:c(i)("Command")},{default:s(()=>[t(p,{placeholder:"Type full pyarmor command to register Pyarmor",modelValue:e.value.steps[0].command,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.steps[0].command=a)},null,8,["modelValue"])]),_:1},8,["label"])),e.value.steps[0].ignored?b("",!0):(m(),v(u,{key:1,class:"w-100",label:c(i)("Console Output")},{default:s(()=>[t(p,{modelValue:e.value.steps[0].output,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.steps[0].output=a),placeholder:`1. Try to use the minimum options to reproduce the bug
2. Try to use the simplest script to reproduce the issue
3. If console output is no more than 100 lines, paste full log here, otherwise only the first 50 lines and the last 50 lines
4. Please use debug options \`pyarmor -d gen ...\` to print more information`,rows:8,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])),t(u,{class:"w-100",label:c(i)("Remark")},{default:s(()=>[t(p,{modelValue:e.value.steps[0].remark,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.steps[0].remark=a),placeholder:"Copy the content of `pyarmor.error.log` here if this file exists\nPaste the content of test script here if possible and less than 100 lines",rows:3,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1}),y.errmode==="unexpected"?(m(),v(V,{key:0,label:"Step 2",name:"2"},{default:s(()=>[t(h,{"label-position":"top",class:"w-100"},{default:s(()=>[t(u,{label:c(i)("Expected Result")},{default:s(()=>[t(p,{modelValue:e.value.expected,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.expected=a),class:"w-100",placeholder:"Descript the expected results",rows:10,type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})):b("",!0)]),_:1},8,["modelValue"])]),_:1})])}}});export{j as default};

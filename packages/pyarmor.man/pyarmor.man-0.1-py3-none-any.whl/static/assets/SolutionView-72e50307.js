import{_ as O}from"./Answer.vue_vue_type_script_setup_true_lang-bcb7bbdd.js";import{d as ae,u as se,x as ne,r as f,y as ue,o as re,a as r,f as u,g as e,w as l,b as a,h as d,c as M,l as U,n as p,t as c,F as g,m as v,e as b}from"./index-557e0199.js";const ce={class:"cb-view"},ie={style:{"word-break":"normal"},class:"mx-5 mt-5"},de={class:"mt-3"},me={key:0,class:"mt-3"},pe={key:1,class:"mt-3"},_e={style:{"word-break":"normal"}},fe={style:{"word-break":"normal"},class:"mx-5 mt-5"},ge={class:"mt-3"},ve={key:0,class:"mt-3"},be={key:1,class:"mt-3"},he={style:{"word-break":"normal"}},ye={class:"mt-5",style:{"word-break":"normal"}},xe="https://github.com/dashingsoft/pyarmor/issues/",we="_pyarmordoc",Ce=ae({__name:"SolutionView",props:{stepinfo:Object},emits:["nextStep"],setup(G,{emit:I}){const h=G,{$gettext:i}=se(),q=ne("refman"),V=f({tags:{reg:[],gen:[],run:[]},common:{reg:[],gen:[],run:[]},errors:[]}),s=f({group:"gen",mode:"exception",msg:""}),y=f([]),C=f([]),x=f(!1),w=ue(()=>V.value.errors.filter(n=>n.groups.includes(s.value.group))),A=()=>{C.value.splice(0),s.value.group in V.value.common&&V.value.common[s.value.group].forEach(n=>C.value.push(n))},H=()=>{if(y.value.splice(0),s.value.mode==="crash")w.value.forEach(n=>{n.tags.includes("crash")&&y.value.push(n)});else if(s.value.msg){const n=s.value.msg;w.value.forEach(t=>{t.pattern&&n.search(t.pattern)!==-1&&y.value.push(t)})}},N=f("1"),J=()=>{A(),H(),K(),x.value=!0,N.value=y.value.length?"1":"2"},E=f([]),K=()=>{const n=new Set;w.value.forEach(t=>{t.tags&&t.tags.forEach(_=>n.add(_))}),E.value.splice(0),n.forEach(t=>{E.value.push({text:t,value:t})})},T=f([]),ke=n=>{const t=T.value.indexOf(n);t===-1?T.value.push(n):T.value.splice(t,1)},P=(n,t)=>t.tags.includes(n),Q=n=>{const t={group:s.value.group,mode:s.value.mode,tags:T.value.slice(),msg:s.value.msg};I("nextStep","report",t)};return re(()=>{q.value.manerr(V),h.stepinfo.group&&(s.value.group=h.stepinfo.group),h.stepinfo.mode&&(s.value.mode=h.stepinfo.mode),h.stepinfo.msg&&(s.value.msg=h.stepinfo.msg)}),(n,t)=>{const _=r("el-option"),L=r("el-select"),B=r("el-form-item"),W=r("el-input"),j=r("el-button"),X=r("el-link"),Y=r("el-form"),z=r("el-col"),$=r("el-text"),k=r("el-table-column"),D=r("el-table"),R=r("el-tab-pane"),Z=r("el-space"),ee=r("el-tag"),le=r("el-card"),te=r("el-tabs"),oe=r("el-row");return a(),u("div",ce,[e(oe,null,{default:l(()=>[e(z,{class:"b m-3 p-3",xs:24,sm:24,md:24,lg:12,xl:12},{default:l(()=>[e(Y,{"label-position":"top","label-width":"10rem",class:"w-100 m-3"},{default:l(()=>[e(B,{label:d(i)("Error occurred in")},{default:l(()=>[e(L,{modelValue:s.value.group,"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.group=o),onChange:t[1]||(t[1]=o=>x.value=!1),class:"w-100 mr-3"},{default:l(()=>[e(_,{label:d(i)("Registering License"),value:"reg"},null,8,["label"]),e(_,{label:d(i)("Generating Obfuscated Files"),value:"gen"},null,8,["label"]),e(_,{label:d(i)("Running Obfuscated Scripts"),value:"run"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(B,{label:d(i)("Error Mode")},{default:l(()=>[e(L,{modelValue:s.value.mode,"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.mode=o),onChange:t[3]||(t[3]=o=>x.value=!1),class:"w-100 mr-3"},{default:l(()=>[e(_,{label:d(i)("Crash or segment fault"),value:"crash"},null,8,["label"]),e(_,{label:d(i)("Raise exception or show error message"),value:"exception"},null,8,["label"]),e(_,{label:d(i)("No error message, but not expected results"),value:"unexpected"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),s.value.mode!=="crash"?(a(),M(B,{key:0,label:d(i)("Type error message if any")},{default:l(()=>[e(W,{modelValue:s.value.msg,"onUpdate:modelValue":t[4]||(t[4]=o=>s.value.msg=o),onInput:t[5]||(t[5]=o=>x.value=!1),clearable:"",placeholder:"RuntimeError: this license key is expired",class:"mr-3"},null,8,["modelValue"])]),_:1},8,["label"])):U("",!0),e(B,null,{default:l(()=>[e(j,{type:"primary",onClick:J,plain:""},{default:l(()=>[p(c(d(i)("Find solutions")),1)]),_:1}),e(X,{type:"info",class:"mx-5 right",href:xe,target:we},{default:l(()=>[p(c(d(i)("Check opened issues")),1)]),_:1}),e(j,{type:"",onClick:Q,text:""},{default:l(()=>[p(c(d(i)("Report new issue")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(z,{class:"m-3",xs:24,sm:24,md:24,lg:12,xl:12},{default:l(()=>[x.value?(a(),M(te,{key:0,modelValue:N.value,"onUpdate:modelValue":t[6]||(t[6]=o=>N.value=o),type:"card"},{default:l(()=>[e(R,{label:`Matched Solutions (${y.value.length})`,name:"1"},{default:l(()=>[e(D,{data:y.value,border:!0,class:"mt-5 w-100"},{empty:l(()=>[p(c("No matched solution found"))]),default:l(()=>[e(k,{type:"expand"},{default:l(o=>[(a(!0),u(g,null,v(o.row.solutions,(m,S)=>(a(),u("div",ie,[e($,{tag:"b",type:""},{default:l(()=>[p(" Reason "+c(S+1)+": "+c(m.reason),1)]),_:2},1024),b("div",de,[e($,{tag:"b",type:"success"},{default:l(()=>[p(c(d(i)("Solutions:")),1)]),_:1}),typeof m.solution=="string"?(a(),u("ul",me,[b("li",null,c(m.solution),1)])):(a(),u("ul",pe,[(a(!0),u(g,null,v(m.solution,F=>(a(),u("li",null,[e(O,{data:F},null,8,["data"])]))),256))]))])]))),256))]),_:1}),e(k,{label:d(i)("Error > Solutions")},{default:l(o=>[b("span",_e,c(o.row.title),1)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1},8,["label"]),e(R,{label:`Catalog Solutions (${w.value.length})`,name:"2"},{default:l(()=>[(E.value,U("",!0)),e(D,{data:w.value,border:!0,class:"mt-5 w-100"},{empty:l(()=>[p(" No catalog solution found ")]),default:l(()=>[e(k,{type:"expand"},{default:l(o=>[(a(!0),u(g,null,v(o.row.solutions,(m,S)=>(a(),u("div",fe,[e($,{tag:"b",type:""},{default:l(()=>[p(" Reason "+c(S+1)+": "+c(m.reason),1)]),_:2},1024),b("div",ge,[e($,{tag:"b",type:"success"},{default:l(()=>[p(c(d(i)("Solutions:")),1)]),_:1}),typeof m.solution=="string"?(a(),u("ul",ve,[b("li",null,c(m.solution),1)])):(a(),u("ul",be,[(a(!0),u(g,null,v(m.solution,F=>(a(),u("li",null,[e(O,{data:F},null,8,["data"])]))),256))]))])]))),256))]),_:1}),e(k,{label:d(i)("Error > Solutions")},{default:l(o=>[b("span",he,c(o.row.title),1)]),_:1},8,["label"]),e(k,{prop:"tags",label:"Tags",width:"200",filters:E.value,"filter-method":P,"filter-placement":"top-end"},{default:l(o=>[e(Z,{wrap:""},{default:l(()=>[(a(!0),u(g,null,v(o.row.tags,m=>(a(),M(ee,{size:"small","disable-transitions":""},{default:l(()=>[p(c(m),1)]),_:2},1024))),256))]),_:2},1024)]),_:1},8,["filters"])]),_:1},8,["data"])]),_:1},8,["label"]),e(R,{label:`Common Solutions (${C.value.length})`,name:"3"},{default:l(()=>[e(le,{shadow:"hover",class:"b mt-5 p-5 w-100"},{default:l(()=>[(a(!0),u(g,null,v(C.value,(o,m)=>(a(),u("div",ye,[p(c(m+1)+". "+c(o.title)+" ",1),b("ul",null,[(a(!0),u(g,null,v(o.solutions,S=>(a(),u("li",null,[e(O,{data:S},null,8,["data"])]))),256))])]))),256))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])):U("",!0)]),_:1})]),_:1})])}}});export{Ce as default};

(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[7483],{57483:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(17967),a=n(66029),i=n(31236),o=n.n(i),s=n(14690),d=n(63653),l=n(32219),u=n(53927),g=n(5957),h=n(70506),y=n(41144),c=n(77026),f=n(44841),m=n(81556);const w=(0,c.debounce)((({visibleRange:e,chunkSizes:t,data:n,widgetName:r,onQueryRangesChanged:a})=>{if(!t)return;const i={};let o=!1;Object.entries(t).forEach((([a,d])=>{if(void 0===d)throw new Error(`Undefined chunkSize for the axis "${a}" in the lazy loading configuration of "${r}". This is not supported.\nEncountered widgetPlugin.lazyLoading.chunkSizes = ${JSON.stringify(t,void 0,2)}`);const l=s.axisIds[a],u=n.axes.find((e=>e.id===l)),g=u?.range,h=e[a].from,y=e[a].to;if(!g||g.entireAxis)i[l]={from:0,to:d-1};else if(h>=g.from&&y<=g.to)i[l]={from:g.from,to:g.to};else{const e=h+Math.floor((y-h)/2),t=Math.max(0,Math.min(g.axisLength-d,e-Math.ceil(d/2))),n=Math.min(t+d,g.axisLength);i[l]={from:t,to:n},o=o||t!==g.from||n!==g.to}})),o&&a(i)}),300),b=e=>{const{data:t,widgetState:n,onQueryRangesChanged:i}=e,o=n.switchedTo??n.widgetKey,[s]=(0,h.useWidgetPlugins)([o]),d=s?.lazyLoading?.chunkSizes,l=(0,f.useWidgetName)(n),u=(0,a.useCallback)((e=>w({visibleRange:e,chunkSizes:d,data:t,widgetName:l,onQueryRangesChanged:i})),[d,t,l,i]);return(0,r.tZ)(m.e,{...e,onVisibleRangeChanged:u})};var C=n(19078),p=n(97535);const S=e=>e,v=(0,a.memo)((e=>{(0,C.useCallOnLoadedAfterFirstProperRender)(e);const{queryResult:t,onSelectionChange:n,widgetState:i}=e,{widgetKey:o}=e.widgetState,[d]=(0,h.useWidgetPlugins)([o]),c=(0,f.useWidgetName)(i);(0,a.useMemo)((()=>{(0,l.w)(c,i.style?.measures)}),[i.style?.measures,c]);const[m]=(0,u.J6)([d?.cell]),[w]=(0,g.Nw)([d?.cellStyle]),v=(0,a.useCallback)((w?.withCellStyle??S)(m?.Cell??y.V),[m,w]);v.displayName="WithCellStyle";const x=(0,f.useFilters)(i),k=(0,a.useMemo)((()=>Object.values(x).some((e=>e.some((({dimensionName:e})=>"Measures"===e))))),[x]);if((0,f.isMappingEmpty)(i.mapping)&&!k)return(0,r.tZ)(p.n,{size:e.widgetState.style?.size,style:e.style,reason:"noQuery"});if(!t.isLoading&&t.error){if((0,s.isQueryErrorOfType)(t.error,"QueryTimeoutException"))throw new s.QueryTimeoutError(t.error);throw new s.MdxError(t.error)}return(0,r.tZ)(f.WidgetLoadingOverlay,{isLoading:t.isLoading,children:t.data&&t.data.cells.length>0?(0,r.tZ)(b,{Cell:v,containerStyle:e.style,data:t.data,isRowHeaderTree:e.isRowHeaderTree,onChange:e.onChange,onSelectionChange:n,widgetState:e.widgetState,onQueryRangesChanged:e.onQueryRangesChanged}):(0,r.tZ)(p.n,{size:e.widgetState.style?.size,style:e.style,reason:0===t.data?.cells.length?"noData":"noQuery"})})}),((e,t)=>{if((0,f.isWidgetInDashboard)(t)!==(0,f.isWidgetInDashboard)(e))return!1;if((0,f.isWidgetInDashboard)(t)&&(0,f.isWidgetInDashboard)(e)){const{dashboardState:n,onDashboardChange:r,...a}=e,{dashboardState:i,onDashboardChange:s,...l}=t,u=(0,d.f)(n,e.pageKey),g=(0,d.f)(i,t.pageKey);return o()(a,l)&&n.filters===i.filters&&u?.filters===g?.filters&&n.queryContext===i.queryContext&&u?.queryContext===g?.queryContext}return o()(e,t)}))},31236:e=>{e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),d=0;d<i.length;d++){var l=i[d];if(!s(l))return!1;var u=e[l],g=t[l];if(!1===(a=n?n.call(r,u,g,l):void 0)||void 0===a&&u!==g)return!1}return!0}}}]);
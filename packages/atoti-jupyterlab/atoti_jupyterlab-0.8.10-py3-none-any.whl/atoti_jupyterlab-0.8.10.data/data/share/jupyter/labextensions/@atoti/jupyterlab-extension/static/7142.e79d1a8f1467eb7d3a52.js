"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[7142],{45840:(e,t,a)=>{a.d(t,{o:()=>n});var r=a(44841);const n=(e,t)=>{if(!e?.style?.areAxisTitlesVisible)return{};const a={},{mapping:n}=e;return Object.entries(t).forEach((([e,t])=>{const i=n[t],o=[];i?.forEach((t=>{!(0,r.isMeasureInMapping)(t)||"yaxis2"===e&&n.verticalSubplots?.[0]?(0,r.isHierarchyInMapping)(t)&&o.push(t.levelName):o.push(t.caption??t.measureName)})),a[e]={title:{text:o.join(", "),standoff:20}}})),a}},19850:(e,t,a)=>{a.d(t,{G:()=>r});const r=(e,t)=>{const a={};return e.hasTimeAxis&&e.isSorted&&(a[t]={type:"category"}),a}},59882:(e,t,a)=>{a.d(t,{l:()=>r});const r=(e,t)=>{const a={};return[["x"],["y"]].forEach((([r])=>{const{keys:n,captions:i}=e["x"===r?"horizontal":"vertical"];for(let e=0;e<n.length;e++){const n="x"===r?e+1:2*e+1;a[`${r}axis${1===n?"":n}`]={title:i[e],...t?.[r]}}})),a}},87142:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var r=a(17967),n=a(49251),i=a.n(n),o=a(68965),l=a.n(o),s=a(66029),c=a(93481),p=a(14378),u=a(45552),d=a(44841),f=a(98030),h=a(59882),x=a(19850),v=a(45840),y=a(75059);const m={xaxis:"xAxis",yaxis:"values"};var g=a(79539);i().register(l());const b=(0,d.withLoadingOverlay)((0,d.withoutIrrelevantRenders)((0,p.H)((0,s.memo)((e=>{const{cube:t,data:a,metaData:n,widgetState:i}=e,{formatMessage:o}=(0,c.useIntl)(),l=o({id:"aui.total"}),p=(0,s.useMemo)((()=>(0,g.I)({cube:t,data:a,metaData:n,widgetState:i,captionForTotals:l})),[t,a,n,i,l]),d=(0,s.useMemo)((()=>((e,t)=>e?(0,y.I)({xaxis:{gridcolor:"transparent"}},(0,f.S)(e.subplots),(0,h.l)(e.subplots),(0,x.G)(e,"xaxis"),(0,v.o)(t,m),{showlegend:t?.plotly?.layout?.showlegend??!0}):{})(n,i)),[n,i]);return(0,r.tZ)(u.XN,{...e,traces:p,layout:d,cube:t,data:a,metaData:n})})))))},75059:(e,t,a)=>{a.d(t,{I:()=>i});var r=a(14618),n=a(77026);const i=function(e,...t){return(0,r.produce)(e??{},(e=>{(0,n.defaultsDeep)(e,...t)}))}},68965:(e,t,a)=>{e.exports=a(76564)},68040:e=>{e.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},43918:(e,t,a)=>{var r=a(57240),n=a(66789),i=a(49263),o=a(69500).fillText,l=a(42976).getLineWidth,s=a(7620).hoverLabelText,c=a(50513).BADNUM;function p(e,t,a,n,i){var l,p,u,d,f,h,x,v=e.cd,y=v[0].trace,m=v[0].t,g="closest"===n,b="waterfall"===y.type,w=e.maxHoverDistance,S=e.maxSpikeDistance;"h"===y.orientation?(l=a,p=t,u="y",d="x",f=_,h=N):(l=t,p=a,u="x",d="y",h=_,f=N);var T=y[u+"period"],k=g||T;function L(e){return D(e,-1)}function M(e){return D(e,1)}function D(e,t){var a=e.w;return e[u]+t*a/2}function C(e){return e[u+"End"]-e[u+"Start"]}var I=g?L:T?function(e){return e.p-C(e)/2}:function(e){return Math.min(L(e),e.p-m.bardelta/2)},A=g?M:T?function(e){return e.p+C(e)/2}:function(e){return Math.max(M(e),e.p+m.bardelta/2)};function O(e,t,a){return i.finiteRange&&(a=0),r.inbox(e-l,t-l,a+Math.min(1,Math.abs(t-e)/x)-1)}function N(e){return O(I(e),A(e),w)}function E(e){var t=e[d];if(b){var a=Math.abs(e.rawS)||0;p>0?t+=a:p<0&&(t-=a)}return t}function _(e){var t=p,a=e.b,n=E(e);return r.inbox(a-t,n-t,w+(n-t)/(n-a)-1)}var j=e[u+"a"],H=e[d+"a"];x=Math.abs(j.r2c(j.range[1])-j.r2c(j.range[0]));var B=r.getDistanceFunction(n,f,h,(function(e){return(f(e)+h(e))/2}));if(r.getClosest(v,B,e),!1!==e.index&&v[e.index].p!==c){k||(I=function(e){return Math.min(L(e),e.p-m.bargroupwidth/2)},A=function(e){return Math.max(M(e),e.p+m.bargroupwidth/2)});var R=v[e.index],V=y.base?R.b+R.s:R.s;e[d+"0"]=e[d+"1"]=H.c2p(R[d],!0),e[d+"LabelVal"]=V;var F=m.extents[m.extents.round(R.p)];e[u+"0"]=j.c2p(g?I(R):F[0],!0),e[u+"1"]=j.c2p(g?A(R):F[1],!0);var G=void 0!==R.orig_p;return e[u+"LabelVal"]=G?R.orig_p:R.p,e.labelLabel=s(j,e[u+"LabelVal"],y[u+"hoverformat"]),e.valueLabel=s(H,e[d+"LabelVal"],y[d+"hoverformat"]),e.baseLabel=s(H,R.b,y[d+"hoverformat"]),e.spikeDistance=(function(e){var t=p,a=e.b,n=E(e);return r.inbox(a-t,n-t,S+(n-t)/(n-a)-1)}(R)+function(e){return O(L(e),M(e),S)}(R))/2,e[u+"Spike"]=j.c2p(R.p,!0),o(R,y,e),e.hovertemplate=y.hovertemplate,e}}function u(e,t){var a=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,n=l(e,t);return i.opacity(a)?a:i.opacity(r)&&n?r:void 0}e.exports={hoverPoints:function(e,t,a,r,i){var o=p(e,t,a,r,i);if(o){var l=o.cd,s=l[0].trace,c=l[o.index];return o.color=u(s,c),n.getComponentMethod("errorbars","hoverInfo")(c,s,o),[o]}},hoverOnBars:p,getTraceColor:u}},25011:e=>{function t(e,t,a,r,n){var i=t.c2p(r?e.s0:e.p0,!0),o=t.c2p(r?e.s1:e.p1,!0),l=a.c2p(r?e.p0:e.s0,!0),s=a.c2p(r?e.p1:e.s1,!0);return n?[(i+o)/2,(l+s)/2]:r?[o,(l+s)/2]:[(i+o)/2,s]}e.exports=function(e,a){var r,n=e.cd,i=e.xaxis,o=e.yaxis,l=n[0].trace,s="funnel"===l.type,c="h"===l.orientation,p=[];if(!1===a)for(r=0;r<n.length;r++)n[r].selected=0;else for(r=0;r<n.length;r++){var u=n[r],d="ct"in u?u.ct:t(u,i,o,c,s);a.contains(d,!1,r,e)?(p.push({pointNumber:r,x:i.c2d(u.x),y:o.c2d(u.y)}),u.selected=1):u.selected=0}return p}},72071:(e,t,a)=>{var r=a(42059),n=a(70002).line,i=a(11833),o=a(36861).axisHoverFormat,l=a(5008).fF,s=a(5008).si,c=a(34782),p=a(80715).extendFlat,u=a(49263);function d(e){return{marker:{color:p({},r.marker.color,{arrayOk:!1,editType:"style",description:"Sets the marker color of all "+e+" values."}),line:{color:p({},r.marker.line.color,{arrayOk:!1,editType:"style",description:"Sets the line color of all "+e+" values."}),width:p({},r.marker.line.width,{arrayOk:!1,editType:"style",description:"Sets the line width of all "+e+" values."}),editType:"style"},editType:"style"},editType:"style"}}e.exports={measure:{valType:"data_array",dflt:[],editType:"calc",description:["An array containing types of values.","By default the values are considered as 'relative'.","However; it is possible to use 'total' to compute the sums.","Also 'absolute' could be applied to reset the computed total","or to declare an initial value where needed."].join(" ")},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc",description:["Sets where the bar base is drawn (in position axis units)."].join(" ")},x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),hovertext:r.hovertext,hovertemplate:l({},{keys:c.eventDataKeys}),hoverinfo:p({},i.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple waterfalls, totals","are computed separately (per trace)."].join(" ")},texttemplate:s({editType:"plot"},{keys:c.eventDataKeys.concat(["label"])}),text:r.text,textposition:r.textposition,insidetextanchor:r.insidetextanchor,textangle:r.textangle,textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:r.orientation,offset:r.offset,width:r.width,increasing:d("increasing"),decreasing:d("decreasing"),totals:d("intermediate sums and total"),connector:{line:{color:p({},n.color,{dflt:u.defaultLine}),width:p({},n.width,{editType:"plot"}),dash:n.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot",description:["Sets the shape of connector lines."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if connector lines are drawn. "].join(" ")},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup}},69450:(e,t,a)=>{var r=a(7620),n=a(38021),i=a(69500).mergeArray,o=a(97896),l=a(50513).BADNUM;function s(e){return"a"===e||"absolute"===e}function c(e){return"t"===e||"total"===e}e.exports=function(e,t){var a,p,u,d,f,h,x=r.getFromId(e,t.xaxis||"x"),v=r.getFromId(e,t.yaxis||"y");"h"===t.orientation?(a=x.makeCalcdata(t,"x"),u=v.makeCalcdata(t,"y"),d=n(t,v,"y",u),f=!!t.yperiodalignment,h="y"):(a=v.makeCalcdata(t,"y"),u=x.makeCalcdata(t,"x"),d=n(t,x,"x",u),f=!!t.xperiodalignment,h="x"),p=d.vals;for(var y,m=Math.min(p.length,a.length),g=new Array(m),b=0,w=!1,S=0;S<m;S++){var T=a[S]||0,k=!1;(a[S]!==l||c(t.measure[S])||s(t.measure[S]))&&S+1<m&&(a[S+1]!==l||c(t.measure[S+1])||s(t.measure[S+1]))&&(k=!0);var L=g[S]={i:S,p:p[S],s:T,rawS:T,cNext:k};s(t.measure[S])?(b=L.s,L.isSum=!0,L.dir="totals",L.s=b):c(t.measure[S])?(L.isSum=!0,L.dir="totals",L.s=b):(L.isSum=!1,L.dir=L.rawS<0?"decreasing":"increasing",y=L.s,L.s=b+y,b+=y),"totals"===L.dir&&(w=!0),f&&(g[S].orig_p=u[S],g[S][h+"End"]=d.ends[S],g[S][h+"Start"]=d.starts[S]),t.ids&&(L.id=String(t.ids[S])),L.v=(t.base||0)+b}return g.length&&(g[0].hasTotals=w),i(t.text,g,"tx"),i(t.hovertext,g,"htx"),o(g,t),g}},34782:e=>{e.exports={eventDataKeys:["initial","delta","final"]}},22222:(e,t,a)=>{var r=a(59770).setGroupPositions;e.exports=function(e,t){var a,n,i=e._fullLayout,o=e._fullData,l=e.calcdata,s=t.xaxis,c=t.yaxis,p=[],u=[],d=[];for(n=0;n<o.length;n++){var f=o[n];!0===f.visible&&f.xaxis===s._id&&f.yaxis===c._id&&"waterfall"===f.type&&(a=l[n],"h"===f.orientation?d.push(a):u.push(a),p.push(a))}var h={mode:i.waterfallmode,norm:i.waterfallnorm,gap:i.waterfallgap,groupgap:i.waterfallgroupgap};for(r(e,s,c,u,h),r(e,c,s,d,h),n=0;n<p.length;n++){a=p[n];for(var x=0;x<a.length;x++){var v=a[x];!1===v.isSum&&(v.s0+=0===x?0:a[x-1].s),x+1<a.length&&(a[x].nextP0=a[x+1].p0,a[x].nextS0=a[x+1].s0)}}}},29395:(e,t,a)=>{var r=a(69500),n=a(15579),i=a(94179).handleText,o=a(17337),l=a(70180),s=a(72071),c=a(49263),p=a(68040),u=p.INCREASING.COLOR,d=p.DECREASING.COLOR;function f(e,t,a){e(t+".marker.color",a),e(t+".marker.line.color",c.defaultLine),e(t+".marker.line.width")}e.exports={supplyDefaults:function(e,t,a,n){function c(a,n){return r.coerce(e,t,s,a,n)}if(o(e,t,n,c)){l(e,t,n,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",t.x&&!t.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var p=c("textposition");i(e,t,n,c,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==t.textposition&&(c("texttemplate"),t.texttemplate||c("textinfo")),f(c,"increasing",u),f(c,"decreasing",d),f(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else t.visible=!1},crossTraceDefaults:function(e,t){var a,i;function o(e){return r.coerce(i._input,i,s,e)}if("group"===t.waterfallmode)for(var l=0;l<e.length;l++)a=(i=e[l])._input,n(a,i,t,o)}}},74413:e=>{e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"initial"in t&&(e.initial=t.initial),"delta"in t&&(e.delta=t.delta),"final"in t&&(e.final=t.final),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},52212:(e,t,a)=>{var r=a(7620).hoverLabelText,n=a(49263).opacity,i=a(43918).hoverOnBars,o=a(68040),l=o.INCREASING.SYMBOL,s=o.DECREASING.SYMBOL;e.exports=function(e,t,a,o,c){var p=i(e,t,a,o,c);if(p){var u=p.cd,d=u[0].trace,f="h"===d.orientation,h=f?"x":"y",x=f?e.xa:e.ya,v=u[p.index],y=v.isSum?v.b+v.s:v.rawS;p.initial=v.b+v.s-y,p.delta=y,p.final=p.initial+p.delta;var m=k(Math.abs(p.delta));p.deltaLabel=y<0?"("+m+")":m,p.finalLabel=k(p.final),p.initialLabel=k(p.initial);var g=v.hi||d.hoverinfo,b=[];if(g&&"none"!==g&&"skip"!==g){var w="all"===g,S=g.split("+"),T=function(e){return w||-1!==S.indexOf(e)};v.isSum||(!T("final")||T(f?"x":"y")||b.push(p.finalLabel),T("delta")&&(y<0?b.push(p.deltaLabel+" "+s):b.push(p.deltaLabel+" "+l)),T("initial")&&b.push("Initial: "+p.initialLabel))}return b.length&&(p.extraText=b.join("<br>")),p.color=function(e,t){var a=e[t.dir].marker,r=a.color,i=a.line.color,o=a.line.width;return n(r)?r:n(i)&&o?i:void 0}(d,v),[p]}function k(e){return r(x,e,d[h+"hoverformat"])}}},76564:(e,t,a)=>{e.exports={attributes:a(72071),layoutAttributes:a(70693),supplyDefaults:a(29395).supplyDefaults,crossTraceDefaults:a(29395).crossTraceDefaults,supplyLayoutDefaults:a(71838),calc:a(69450),crossTraceCalc:a(22222),plot:a(46890),style:a(71753).style,hoverPoints:a(52212),eventData:a(74413),selectPoints:a(25011),moduleType:"trace",name:"waterfall",basePlotModule:a(61836),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Draws waterfall trace which is useful graph to displays the","contribution of various elements (either positive or negative)","in a bar chart. The data visualized by the span of the bars is","set in `y` if `orientation` is set to *v* (the default) and the","labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},70693:e=>{e.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},waterfallgap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},71838:(e,t,a)=>{var r=a(69500),n=a(70693);e.exports=function(e,t,a){var i=!1;function o(a,i){return r.coerce(e,t,n,a,i)}for(var l=0;l<a.length;l++){var s=a[l];if(s.visible&&"waterfall"===s.type){i=!0;break}}i&&(o("waterfallmode"),o("waterfallgap",.2),o("waterfallgroupgap"))}},46890:(e,t,a)=>{var r=a(73416),n=a(69500),i=a(95535),o=a(50513).BADNUM,l=a(28296),s=a(89370).clearMinTextSize;e.exports=function(e,t,a,c){var p=e._fullLayout;s("waterfall",p),l.plot(e,t,a,c,{mode:p.waterfallmode,norm:p.waterfallmode,gap:p.waterfallgap,groupgap:p.waterfallgroupgap}),function(e,t,a,l){var s=t.xaxis,c=t.yaxis;n.makeTraceGroups(l,a,"trace bars").each((function(a){var l=r.select(this),p=a[0].trace,u=n.ensureSingle(l,"g","lines");if(p.connector&&p.connector.visible){var d="h"===p.orientation,f=p.connector.mode,h=u.selectAll("g.line").data(n.identity);h.enter().append("g").classed("line",!0),h.exit().remove();var x=h.size();h.each((function(a,l){if(l===x-1||a.cNext){var p=function(e,t,a,r){var n=[],i=[],o=r?t:a,l=r?a:t;return n[0]=o.c2p(e.s0,!0),i[0]=l.c2p(e.p0,!0),n[1]=o.c2p(e.s1,!0),i[1]=l.c2p(e.p1,!0),n[2]=o.c2p(e.nextS0,!0),i[2]=l.c2p(e.nextP0,!0),r?[n,i]:[i,n]}(a,s,c,d),u=p[0],h=p[1],v="";u[0]!==o&&h[0]!==o&&u[1]!==o&&h[1]!==o&&("spanning"===f&&!a.isSum&&l>0&&(v+=d?"M"+u[0]+","+h[1]+"V"+h[0]:"M"+u[1]+","+h[0]+"H"+u[0]),"between"!==f&&(a.isSum||l<x-1)&&(v+=d?"M"+u[1]+","+h[0]+"V"+h[1]:"M"+u[0]+","+h[1]+"H"+u[1]),u[2]!==o&&h[2]!==o&&(v+=d?"M"+u[1]+","+h[1]+"V"+h[2]:"M"+u[1]+","+h[1]+"H"+u[2])),""===v&&(v="M0,0Z"),n.ensureSingle(r.select(this),"path").attr("d",v).call(i.setClipUrl,t.layerClipId,e)}}))}else u.remove()}))}(e,t,a,c)}},71753:(e,t,a)=>{var r=a(73416),n=a(95535),i=a(49263),o=a(41018).DESELECTDIM,l=a(17631),s=a(89370).resizeText,c=l.styleTextPoints;e.exports={style:function(e,t,a){var l=a||r.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");s(e,l,"waterfall"),l.style("opacity",(function(e){return e[0].trace.opacity})),l.each((function(t){var a=r.select(this),l=t[0].trace;a.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=l[e.dir].marker;r.select(this).call(i.fill,t.color).call(i.stroke,t.line.color).call(n.dashLine,t.line.dash,t.line.width).style("opacity",l.selectedpoints&&!e.selected?o:1)}})),c(a,l,e),a.selectAll(".lines").each((function(){var e=l.connector.line;n.lineGroupStyle(r.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}}}}]);
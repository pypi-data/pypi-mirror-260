"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[232,502,959],{5959:function(e,n,i){i.r(n);var l=i(70389),t=(i(4519),i(2556));n.default=function(e){var n=e.text,i=e.children;return(0,t.jsx)(l.Z.Text,{copyable:!0,code:!0,children:n||i})}},61502:function(e,n,i){i.r(n),i.d(n,{default:function(){return ee},useShadowRoot:function(){return Y},useWebComponentInfo:function(){return W}});var l=i(1413),t=i(29439),r=i(74165),a=i(15861),o=i(24530),s=i(24717),d=i(61724);function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,l=(0,o.Qc)(e),t=(0,s.Vn)(l,{Field:{enter:function(e){var l;if(null!==e&&void 0!==e&&null!==(l=e.directives)&&void 0!==l&&l.find((function(e){var l,t,r,a,o=e.name.value,s=null===(l=e.arguments)||void 0===l?void 0:l[0].name.value,d=null===(t=e.arguments)||void 0===t||null===(r=t[0].value)||void 0===r?void 0:r.value,u=null===(a=e.arguments)||void 0===a?void 0:a[0];if("since"===o&&"version"===s){if(i(d))return!0}else if("deprecatedSince"===o&&"version"===s){var c="StringValue"===(null===u||void 0===u?void 0:u.value.kind)?null===u||void 0===u?void 0:u.value.value:n[null===u||void 0===u?void 0:u.value.name.value];if(!i(c))return!0}else if("skipOnClient"===o&&"if"===s){if("BooleanValue"===(null===u||void 0===u?void 0:u.value.kind)&&u.value.value)return!0;if("Variable"===(null===u||void 0===u?void 0:u.value.kind)&&n[u.value.name.value])return!0}return!1})))return null},leave:function(e){var n;if(e.selectionSet&&"SelectionSet"===e.selectionSet.kind&&0===(null===(n=e.selectionSet.selections)||void 0===n?void 0:n.length))return null}},Directive:{leave:function(e){var n=e.name.value;if(["since","deprecatedSince","skipOnClient"].includes(n))return null}}}),r={};return(0,s.Vn)(t,{Variable:function(e){r[e.name.value]=(r[e.name.value]||0)+1}}),t=(0,s.Vn)(t,{VariableDefinition:{enter:function(e){if(r[e.variable.name.value]<=1)return null}}}),(0,d.S)(t)}var c=i(41011);c.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var m=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,i){var l,t,a,o,s,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==globalThis.backendaiclient){e.next=3;break}return e.next=3,new Promise((function(e){document.addEventListener("backend-ai-connected",(function n(){document.removeEventListener("backend-ai-connected",n),e(void 0)}))}));case 3:return a=u(n.text||"",i,(function(e){var n;return!(null!==(n=globalThis.backendaiclient)&&void 0!==n&&n.isManagerVersionCompatibleWith(e))})),o={query:a,variables:i},s=null===(l=globalThis.backendaiclient)||void 0===l?void 0:l.newSignedRequest("POST","/admin/gql",o),e.next=8,null===(t=globalThis.backendaiclient)||void 0===t?void 0:t._wrapWithPromise(s,!1,null,1e4,0).catch((function(e){}));case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:return d=e.t0,e.abrupt("return",d);case 13:case"end":return e.stop()}}),e)})));return function(n,i){return e.apply(this,arguments)}}();var g,v=new c.Environment({network:c.Network.create(m,void 0),store:new c.Store(new c.RecordSource)}),f=i(80382),p=i(21232),h=i(27340),k=i(41239),x=i(44036),S=i(47226),y=i(49883),_=i(66670),b=i(99517),Z=i.n(b),j=(i(24989),i(79354)),F=i.n(j),w=i(79748),E=i.n(w),T=i(51714),L=i.n(T),C=i(63540),K=i.n(C),I=i(18272),R=i.n(I),P=i(9666),O=i.n(P),M=i(64447),D=i(13881),V=i(4519),N=i(81748),q=i(87112),z=i(16980),A=i(51843),G=i(12674),$=i(55144),B=i(73181),H=i(2556);Z().extend(O()),Z().extend(F()),Z().extend(E()),Z().extend(L()),Z().extend(R()),Z().extend(K());var Q=V.createContext(null),U=V.createContext(null),Y=function(){return V.useContext(U)},W=function(){return V.useContext(Q)},J=new q.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});M.ZP.use(N.Db).use(D.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(g=globalThis.backendaioptions)||void 0===g?void 0:g.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1},react:{transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","span","code","p"]}});var X=function(){var e=(0,G.s0)();return(0,V.useLayoutEffect)((function(){var n=function(n){var i=n.detail;e(i,{replace:!0})};return document.addEventListener("react-navigate",n),function(){document.removeEventListener("react-navigate",n)}}),[e]),null},ee=function(e){var n=e.children,i=e.value,r=e.styles,a=e.shadowRoot,o=e.dispatchEvent,s=(0,V.useMemo)((function(){return(0,h.Df)()}),[]),d=function(){var e,n=(0,V.useState)(null===globalThis||void 0===globalThis||null===(e=globalThis.backendaioptions)||void 0===e?void 0:e.get("current_language")),i=(0,t.Z)(n,2),l=i[0],r=i[1],a=(0,N.$G)().i18n;return(0,V.useEffect)((function(){setTimeout((function(){return null===a||void 0===a?void 0:a.changeLanguage(l)}),0),Z().locale(l)}),[]),(0,V.useEffect)((function(){var e=function(e){var n,i;r(null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.lang);var l=(null===e||void 0===e||null===(i=e.detail)||void 0===i?void 0:i.lang)||"en";null===a||void 0===a||a.changeLanguage(l),Z().locale(l)};return window.addEventListener("langChanged",e),function(){return window.removeEventListener("langChanged",e)}}),[a]),[l]}(),u=(0,t.Z)(d,1)[0],c=(0,f.x)(),m=(0,p.r)().isDarkMode,g=(0,V.useMemo)((function(){return{value:i,dispatchEvent:o,moveTo:function(e,n){o("moveTo",{path:e,params:n})}}}),[i,o]);return(0,H.jsx)(H.Fragment,{children:v&&(0,H.jsx)(z.RelayEnvironmentProvider,{environment:v,children:(0,H.jsxs)(V.StrictMode,{children:[(0,H.jsxs)("style",{children:[r,".anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n/* fix: fixed column shadow display outside of a table wrapper */\n.ant-table-wrapper {\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n}\n\n/* fix: the tooltip does not appear in the `<Form.Item tooltip={'something'}` when the popup container is a parent node of the trigger node. */\n.ant-form-item-label {\n  overflow: unset !important;\n}\n"]}),(0,H.jsx)(q.QueryClientProvider,{client:J,children:(0,H.jsx)(U.Provider,{value:a,children:(0,H.jsx)(Q.Provider,{value:g,children:(0,H.jsx)(k.ZP,{getPopupContainer:function(e){return(null===e||void 0===e?void 0:e.parentNode)||a},locale:"ko"===u?_.Z:y.Z,theme:(0,l.Z)((0,l.Z)({},m?(0,l.Z)({},c.dark):(0,l.Z)({},c.light)),{},{algorithm:m?x.Z.darkAlgorithm:x.Z.defaultAlgorithm}),children:(0,H.jsx)(S.Z,{children:(0,H.jsx)(h.V9,{container:a,cache:s,children:(0,H.jsx)(V.Suspense,{fallback:"",children:(0,H.jsx)(A.VK,{children:(0,H.jsxs)($.QueryParamProvider,{adapter:B.Q,options:{},children:[(0,H.jsx)(X,{}),n]})})})})})})})})})]})})})}},88630:function(e,n,i){var l,t=i(87760),r=i(56713),a=i(44036),o=i(227),s=i(92171),d=(i(4519),i(81748)),u=i(16980),c=i(2556);n.Z=function(e){var n=e.endpointFrgmt,m=(0,d.$G)().t,g=a.Z.useToken().token,v=(0,t.Dj)(),f=(0,u.useFragment)(void 0!==l?l:l=i(76480),n);return v.supports("model-serving-endpoint-user-info")?(null===f||void 0===f?void 0:f.created_user_email)===(null===f||void 0===f?void 0:f.session_owner_email)?(null===f||void 0===f?void 0:f.session_owner_email)||"":(0,c.jsxs)(c.Fragment,{children:[(null===f||void 0===f?void 0:f.session_owner_email)||"",(0,c.jsx)(o.Z,{title:m("modelService.ServiceDelegatedFrom",{createdUser:(null===f||void 0===f?void 0:f.created_user_email)||"",sessionOwner:(null===f||void 0===f?void 0:f.session_owner_email)||""}),children:(0,c.jsx)(s.ZP,{size:"small",type:"text",icon:(0,c.jsx)(r.Z,{}),style:{color:g.colorTextSecondary}})})]}):v.email||""}},96451:function(e,n,i){var l,t=i(82548),r=(i(4519),i(16980)),a=i(2556);n.Z=function(e){var n,o=e.endpointFrgmt,s=(0,r.useFragment)(void 0!==l?l:l=i(58393),o),d="default";switch(null===s||void 0===s||null===(n=s.status)||void 0===n?void 0:n.toUpperCase()){case"RUNNING":case"HEALTHY":d="success"}return(0,a.jsx)(t.Z,{color:d,children:null===s||void 0===s?void 0:s.status})}},14001:function(e,n,i){var l=i(1413),t=i(29439),r=i(87760),a=i(4519),o=i(2556),s=function(e,n){var i=e.image,a=e.style,s=void 0===a?{}:a,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",u=(0,r.X6)(),c=(0,t.Z)(u,2)[1].getImageIcon;return(0,o.jsx)("img",{src:c(i),style:(0,l.Z)({width:"1em",height:"1em"},s),alt:d})};n.Z=a.memo(s)},76587:function(e,n,i){var l,t=i(1413),r=i(29439),a=i(44925),o=i(43255),s=i(87760),d=i(50164),u=i(77758),c=i(99277),m=i(44036),g=i(57054),v=i(66653),f=(i(4519),i(81748)),p=i(16980),h=i(2556),k=["onRequestClose","endpointFrgmt"];n.Z=function(e){var n=e.onRequestClose,x=e.endpointFrgmt,S=(0,a.Z)(e,k),y=m.Z.useToken().token,_=(0,s.Dj)(),b=(0,f.$G)().t,Z=g.Z.useForm(),j=(0,r.Z)(Z,1)[0],F=(0,p.useFragment)(void 0!==l?l:l=i(56326),x),w=(0,d.Y)({mutationFn:function(e){var n={to:e.desired_session_count};return(0,o.Lc)({method:"POST",url:"/services/".concat(null===F||void 0===F?void 0:F.endpoint_id,"/scale"),body:n,client:_})}});return(0,h.jsx)(u.Z,(0,t.Z)((0,t.Z)({style:{zIndex:1e4},destroyOnClose:!0,onOk:function(e){j.validateFields().then((function(e){w.mutate(e,{onSuccess:function(){console.log("service updated"),n(!0)},onError:function(e){console.log(e)}})})).catch((function(e){console.log(e)}))},onCancel:function(){n()},okButtonProps:{loading:w.isLoading},title:b("modelService.EditModelService")},S),{},{children:(0,h.jsx)(c.Z,{direction:"row",align:"stretch",justify:"around",children:(0,h.jsx)(g.Z,{form:j,preserve:!1,validateTrigger:["onChange","onBlur"],initialValues:{desired_session_count:null===F||void 0===F?void 0:F.desired_session_count},style:{marginBottom:y.marginLG,marginTop:y.margin},children:(0,h.jsx)(g.Z.Item,{name:"desired_session_count",label:b("modelService.DesiredSessionCount"),rules:[{pattern:/^[0-9]+$/,message:b("modelService.OnlyAllowsNonNegativeIntegers")}],children:(0,h.jsx)(v.Z,{type:"number",min:0})})})})}))}},76480:function(e,n,i){i.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EndpointOwnerInfoFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_user_email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_owner_email",storageKey:null}],type:"Endpoint",abstractKey:null,hash:"fb21a441c8873205b5092ae1a5a7157e"};n.default=l},58393:function(e,n,i){i.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"EndpointStatusTagFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null}],type:"Endpoint",abstractKey:null,hash:"3b31efa50b55edddcb210b59003dc479"};n.default=l},56326:function(e,n,i){i.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ModelServiceSettingModal_endpoint",selections:[{alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"desired_session_count",storageKey:null}],type:"Endpoint",abstractKey:null,hash:"881f18324b27eba6ff0fcfb83ae241d2"};n.default=l},90146:function(e,n,i){i.r(n);var l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ServingRouteErrorModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},{alias:null,args:null,concreteType:"InferenceSessionErrorInfo",kind:"LinkedField",name:"errors",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"repr",storageKey:null}],storageKey:null}],type:"InferenceSessionError",abstractKey:null,hash:"a1003e0f75387e665f4407909eea5ff6"};n.default=l},21232:function(e,n,i){i.d(n,{r:function(){return o}});var l=i(29439),t=i(67873),r=i(4519),a=function(e,n){var i=(0,t.Z)(e,{defaultValue:n}),a=(0,l.Z)(i,2),o=a[0],s=a[1],d="useLocalStorageGlobalState:"+e;return(0,r.useEffect)((function(){var e=function(e){s(e.detail)};return document.addEventListener(d,e),function(){return document.removeEventListener(d,e)}}),[s,d]),[o,function(e){document.dispatchEvent(new CustomEvent(d,{detail:e}))}]},o=function(){var e=a("backendaiwebui.settings.themeMode","system"),n=(0,l.Z)(e,2),i=n[0],t=n[1],o=a("backendaiwebui.settings.isDarkMode",window.matchMedia("(prefers-color-scheme: dark)").matches),s=(0,l.Z)(o,2),d=(s[0],s[1]);return(0,r.useEffect)((function(){if("system"===i){var e=window.matchMedia("(prefers-color-scheme: dark)");d(e.matches);var n=function(e){d(e.matches)};return e.addEventListener("change",n),function(){return e.removeEventListener("change",n)}}d("dark"===i)}),[i,d]),{themeMode:i,isDarkMode:!1,setThemeMode:function(e){t(e)}}}},23232:function(e,n,i){i.r(n),i.d(n,{default:function(){return re}});var l,t,r=i(29439),a=i(5959),o=i(88630),s=i(96451),d=i(1413),u=i(44925),c=i(43255),m=i(87760),g=i(50164),v=i(77758),f=i(99277),p=i(57054),h=i(88464),k=i(52176),x=i(66957),S=i(99517),y=i.n(S),_=i(4519),b=i(81748),Z=i(2556),j=["onRequestClose","onCancel","endpoint_id"],F=function(e){var n=e.onRequestClose,i=(e.onCancel,e.endpoint_id),l=(0,u.Z)(e,j),t=(0,b.$G)().t,a=(0,m.Dj)(),o=p.Z.useForm(),s=(0,r.Z)(o,1)[0],S=(0,g.Y)({mutationFn:function(e){var n={valid_until:e.valid_until};return(0,c.Lc)({method:"POST",url:"/services/".concat(i,"/token"),body:n,client:a})}});return(0,Z.jsx)(v.Z,(0,d.Z)((0,d.Z)({},l),{},{destroyOnClose:!0,onOk:function(e){s.validateFields().then((function(e){var i=e.datetime.unix();S.mutate({valid_until:i},{onSuccess:function(){h.ZP.success(t("modelService.TokenGenerated")),n(!0)},onError:function(e){var n;null!==e&&void 0!==e&&null!==(n=e.message)&&void 0!==n&&n.includes("valid_until is older than now")?h.ZP.error(t("modelService.TokenExpiredDateError")):(h.ZP.error(t("modelService.TokenGenerationFailed")),console.log(e))}})}))},onCancel:function(){n()},okText:t("modelService.Generate"),confirmLoading:S.isLoading,centered:!0,title:t("modelService.GenerateNewToken"),children:(0,Z.jsx)(p.Z,{preserve:!1,labelCol:{span:10},initialValues:{datetime:y()().add(24,"hour")},validateTrigger:["onChange","onBlur"],style:{maxWidth:500},form:s,children:(0,Z.jsxs)(f.Z,{direction:"column",gap:"sm",align:"stretch",children:[(0,Z.jsx)(k.Z,{type:"info",showIcon:!0,message:t("modelService.TokenExpiredDateHelp")}),(0,Z.jsx)(f.Z,{direction:"row",align:"stretch",justify:"around",children:(0,Z.jsx)(p.Z.Item,{name:"datetime",label:t("modelService.ExpiredDate"),rules:[{type:"object",required:!0,message:t("modelService.PleaseSelectTime")},function(){return{validator:function(e,n){return n.isAfter(y()())?Promise.resolve():Promise.reject(new Error(t("modelService.TokenExpiredDateError")))}}}],children:(0,Z.jsx)(x.Z,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss",style:{width:200}})})})]})})}))},w=i(14001),E=i(76587),T=i(96732),L=i(92171),C=i(93448),K=i(16980),I=["onRequestClose","onCancel","inferenceSessionErrorFrgmt"],R=function(e){var n=e.onRequestClose,t=(e.onCancel,e.inferenceSessionErrorFrgmt),r=(0,u.Z)(e,I),o=(0,b.$G)().t,s=(0,K.useFragment)(void 0!==l?l:l=i(90146),t);return(0,Z.jsx)(v.Z,(0,d.Z)((0,d.Z)({centered:!0,title:o("modelService.ServingRouteErrorModalTitle"),onCancel:function(){n()},footer:[(0,Z.jsx)(L.ZP,{onClick:function(){n()},children:o("button.Close")})]},r),{},{children:(0,Z.jsxs)(C.Z,{bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},labelStyle:{minWidth:100},style:{marginTop:20},children:[(0,Z.jsx)(C.Z.Item,{label:o("modelService.SessionId"),children:(0,Z.jsx)(a.default,{children:null===s||void 0===s?void 0:s.session_id})}),(0,Z.jsx)(C.Z.Item,{label:o("dialog.error.Error"),children:null===s||void 0===s?void 0:s.errors[0].repr})]})}))},P=i(61502),O=i(14644),M=i(70389),D=function(e){var n=e.uuid,i=e.clickable,l=(0,m.qh)(),t=(0,c.y3)(),r=(0,P.useWebComponentInfo)().moveTo,a=(0,g.h)({queryKey:["VFolderSelectQuery"],queryFn:function(){return t({method:"GET",url:"/folders?group_id=".concat(l.id)})},staleTime:1e3,suspense:!0}).data,o=null===a||void 0===a?void 0:a.find((function(e){return e.id===n.replaceAll("-","")}));return o&&(i?(0,Z.jsxs)(M.Z.Link,{onClick:function(){r("/data",{folder:o.name})},children:[(0,Z.jsx)(O.Z,{})," ",o.name]}):(0,Z.jsxs)("div",{children:[(0,Z.jsx)(O.Z,{})," ",o.name]}))},V=i(43971),N=i(72842),q=i(43596),z=i(83861),A=i(31662),G=i(32064),$=i(20558),B=i(56713),H=i(44036),Q=i(60284),U=i(227),Y=i(53066),W=i(82548),J=i(39883),X=i(49248),ee=i(26524),ne=i(32048),ie=i.n(ne),le=i(12674),te=function(e,n){var i=y()(e.created_at),l=y()(n.created_at);return i.diff(l)},re=function(){var e=(0,b.$G)().t,n=H.Z.useToken().token,l=(0,m.Dj)(),d=(0,le.s0)(),u=(0,le.UO)().serviceId,v=(0,m.Kr)("initial-fetch"),p=(0,r.Z)(v,2),h=p[0],k=p[1],x=(0,_.useTransition)(),S=(0,r.Z)(x,2),j=S[0],I=S[1],P=(0,_.useTransition)(),O=(0,r.Z)(P,2),ne=O[0],re=O[1],ae=(0,_.useState)(null),oe=(0,r.Z)(ae,2),se=oe[0],de=oe[1],ue=(0,_.useState)(!1),ce=(0,r.Z)(ue,2),me=ce[0],ge=ce[1],ve=(0,_.useState)(!1),fe=(0,r.Z)(ve,2),pe=fe[0],he=fe[1],ke=(0,_.useState)({current:1,pageSize:100}),xe=(0,r.Z)(ke,1)[0],Se=(0,K.useLazyLoadQuery)(void 0!==t?t:t=i(4464),{tokenListOffset:(xe.current-1)*xe.pageSize,tokenListLimit:xe.pageSize,endpointId:u||""},{fetchPolicy:"initial-fetch"===h?"store-and-network":"network-only",fetchKey:h}),ye=Se.endpoint,_e=Se.endpoint_token_list,be=(0,g.Y)((function(){if(ye)return(0,c.Lc)({method:"POST",url:"/services/".concat(ye.endpoint_id,"/errors/clear"),client:l})})),Ze=function(){var e="default";switch((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toUpperCase()){case"HEALTHY":e="success";break;case"PROVISIONING":e="processing";break;case"UNHEALTHY":e="warning"}return e},je=JSON.parse((null===ye||void 0===ye?void 0:ye.resource_opts)||"{}");return(0,Z.jsxs)(f.Z,{direction:"column",align:"stretch",style:{margin:n.marginSM},gap:"sm",children:[(0,Z.jsx)(Q.Z,{items:[{title:e("modelService.Services"),onClick:function(e){e.preventDefault(),d("/serving")},href:"/serving"},{title:e("modelService.RoutingInfo")}]}),(0,Z.jsxs)(f.Z,{direction:"row",justify:"between",children:[(0,Z.jsx)(M.Z.Title,{level:3,style:{margin:0},children:(null===ye||void 0===ye?void 0:ye.name)||""}),(0,Z.jsxs)(f.Z,{gap:"xxs",children:[((null===ye||void 0===ye?void 0:ye.retries)||0)>0?(0,Z.jsx)(U.Z,{title:e("modelService.ClearErrors"),children:(0,Z.jsx)(L.ZP,{loading:ne,icon:(0,Z.jsx)(V.Z,{}),onClick:function(){re((function(){be.mutate(void 0,{onSuccess:function(){return I((function(){k()}))}})}))}})}):(0,Z.jsx)(Z.Fragment,{}),(0,Z.jsx)(L.ZP,{loading:j,icon:(0,Z.jsx)(N.Z,{}),onClick:function(){I((function(){k()}))},children:e("button.Refresh")})]})]}),(0,Z.jsx)(Y.Z,{title:e("modelService.ServiceInfo"),extra:(0,Z.jsx)(L.ZP,{type:"primary",icon:(0,Z.jsx)(q.Z,{}),disabled:((null===ye||void 0===ye?void 0:ye.desired_session_count)||0)<0,onClick:function(){ge(!0)},children:e("button.Edit")}),children:(0,Z.jsx)(C.Z,{bordered:!0,column:{xxl:3,xl:3,lg:2,md:1,sm:1,xs:1},style:{backgroundColor:n.colorBgBase},items:[{label:e("modelService.EndpointName"),children:(0,Z.jsx)(M.Z.Text,{copyable:!0,children:null===ye||void 0===ye?void 0:ye.name})},{label:e("modelService.Status"),children:(0,Z.jsx)(s.Z,{endpointFrgmt:ye})},{label:e("modelService.EndpointId"),children:null===ye||void 0===ye?void 0:ye.endpoint_id},{label:e("modelService.SessionOwner"),children:(0,Z.jsx)(o.Z,{endpointFrgmt:ye})},{label:e("modelService.DesiredSessionCount"),children:null===ye||void 0===ye?void 0:ye.desired_session_count},{label:e("modelService.ServiceEndpoint"),children:null!==ye&&void 0!==ye&&ye.url?(0,Z.jsx)(M.Z.Text,{copyable:!0,children:null===ye||void 0===ye?void 0:ye.url}):(0,Z.jsx)(M.Z.Text,{type:"secondary",children:e("modelService.NoServiceEndpoint")})},{label:e("modelService.OpenToPublic"),children:null!==ye&&void 0!==ye&&ye.open_to_public?(0,Z.jsx)(z.Z,{}):(0,Z.jsx)(A.Z,{})},{label:e("modelService.resources"),children:(0,Z.jsxs)(f.Z,{direction:"row",wrap:"wrap",gap:"md",children:[(0,Z.jsx)(U.Z,{title:e("session.ResourceGroup"),children:(0,Z.jsx)(W.Z,{children:null===ye||void 0===ye?void 0:ye.resource_group})}),ie().map(JSON.parse((null===ye||void 0===ye?void 0:ye.resource_slots)||"{}"),(function(e,n){return(0,Z.jsx)(T.ZP,{type:n,value:e,opts:je},n)}))]}),span:{xl:2}},{label:e("session.launcher.ModelStorage"),children:(0,Z.jsx)(_.Suspense,{fallback:(0,Z.jsx)(J.Z,{indicator:(0,Z.jsx)(G.Z,{spin:!0})}),children:(null===ye||void 0===ye?void 0:ye.model)&&(0,Z.jsx)(D,{uuid:null===ye||void 0===ye?void 0:ye.model,clickable:!1})})},{label:e("modelService.Image"),children:(null===ye||void 0===ye?void 0:ye.image)&&(0,Z.jsxs)(f.Z,{direction:"row",gap:"xs",children:[(0,Z.jsx)(w.Z,{image:ye.image}),(0,Z.jsx)(a.default,{children:ye.image})]}),span:{xl:2}}]})}),(0,Z.jsx)(Y.Z,{title:e("modelService.GeneratedTokens"),extra:(0,Z.jsx)(L.ZP,{type:"primary",icon:(0,Z.jsx)($.Z,{}),onClick:function(){he(!0)},children:e("modelService.GenerateToken")}),children:(0,Z.jsx)(X.Z,{scroll:{x:"max-content"},rowKey:"token",columns:[{title:"#",fixed:"left",render:function(e,n,i){return++i},showSorterTooltip:!1},{title:"Token",dataIndex:"token",fixed:"left",render:function(e,n){return(0,Z.jsx)(M.Z.Text,{ellipsis:!0,copyable:!0,style:{width:150},children:n.token})}},{title:"Status",render:function(e,n){var i=y().utc(n.valid_until).isBefore();return(0,Z.jsx)(W.Z,{color:i?"red":"green",children:i?"Expired":"Valid"})}},{title:"Valid Until",dataIndex:"valid_until",render:function(e,n){return(0,Z.jsx)("span",{children:n.valid_until?y().utc(n.valid_until).tz().format("ll LTS"):"-"})},defaultSortOrder:"descend",sortDirections:["descend","ascend","descend"],sorter:te},{title:"Created at",dataIndex:"created_at",render:function(e,n){return(0,Z.jsx)("span",{children:y()(n.created_at).format("ll LT")})},defaultSortOrder:"descend",sortDirections:["descend","ascend","descend"],sorter:te}],pagination:!1,dataSource:(0,c.uU)(null===_e||void 0===_e?void 0:_e.items),bordered:!0})}),(0,Z.jsx)(Y.Z,{title:e("modelService.RoutesInfo"),children:(0,Z.jsx)(X.Z,{scroll:{x:"max-content"},columns:[{title:e("modelService.RouteId"),dataIndex:"routing_id",fixed:"left"},{title:e("modelService.SessionId"),dataIndex:"session"},{title:e("modelService.Status"),render:function(e,i){var l=i.session,t=i.status;return t&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(W.Z,{color:Ze(t),style:{marginRight:0},children:t.toUpperCase()},t),"FAILED_TO_START"===t&&(0,Z.jsx)(ee.Z,{children:(0,Z.jsx)(L.ZP,{size:"small",type:"text",icon:(0,Z.jsx)(B.Z,{}),style:{color:n.colorTextSecondary},onClick:function(){return l&&function(e){if(null!==ye){var n=ye.errors.find((function(n){var i=n.session_id;return e===i}));de(n||null)}}(l)}})})]})}},{title:e("modelService.TrafficRatio"),dataIndex:"traffic_ratio"}],pagination:!1,dataSource:null===ye||void 0===ye?void 0:ye.routings,rowKey:"routing_id",bordered:!0})}),(0,Z.jsx)(R,{open:!!se,inferenceSessionErrorFrgmt:se,onRequestClose:function(){return de(null)}}),(0,Z.jsx)(E.Z,{open:me,onRequestClose:function(e){ge(!1),e&&I((function(){k()}))},endpointFrgmt:ye}),(0,Z.jsx)(F,{open:pe,onRequestClose:function(e){he(!1),e&&I((function(){k()}))},endpoint_id:(null===ye||void 0===ye?void 0:ye.endpoint_id)||""})]})}},4464:function(e,n,i){i.r(n);var l=function(){var e={defaultValue:null,kind:"LocalArgument",name:"endpointId"},n={defaultValue:null,kind:"LocalArgument",name:"tokenListLimit"},i={defaultValue:null,kind:"LocalArgument",name:"tokenListOffset"},l={kind:"Variable",name:"endpoint_id",variableName:"endpointId"},t=[l],r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"endpoint_id",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"image",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"desired_session_count",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"open_to_public",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"session_id",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"retries",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"model",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"model_mount_destiation",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"resource_group",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"resource_slots",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"resource_opts",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"routing_id",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"session",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"traffic_ratio",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"endpoint",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},Z={alias:null,args:[l,{kind:"Variable",name:"limit",variableName:"tokenListLimit"},{kind:"Variable",name:"offset",variableName:"tokenListOffset"}],concreteType:"EndpointTokenList",kind:"LinkedField",name:"endpoint_token_list",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"total_count",storageKey:null},{alias:null,args:null,concreteType:"EndpointToken",kind:"LinkedField",name:"items",plural:!0,selections:[b,{alias:null,args:null,kind:"ScalarField",name:"token",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"project",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_owner",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"created_at",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"valid_until",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[e,n,i],kind:"Fragment",metadata:null,name:"RoutingListPageQuery",selections:[{alias:null,args:t,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:[r,a,o,s,d,u,{alias:null,args:null,concreteType:"InferenceSessionError",kind:"LinkedField",name:"errors",plural:!0,selections:[c,{args:null,kind:"FragmentSpread",name:"ServingRouteErrorModalFragment"}],storageKey:null},m,g,v,f,p,h,{alias:null,args:null,concreteType:"Routing",kind:"LinkedField",name:"routings",plural:!0,selections:[k,x,S,y,_],storageKey:null},{args:null,kind:"FragmentSpread",name:"EndpointOwnerInfoFragment"},{args:null,kind:"FragmentSpread",name:"EndpointStatusTagFragment"},{args:null,kind:"FragmentSpread",name:"ModelServiceSettingModal_endpoint"}],storageKey:null},Z],type:"Queries",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,i,n],kind:"Operation",name:"RoutingListPageQuery",selections:[{alias:null,args:t,concreteType:"Endpoint",kind:"LinkedField",name:"endpoint",plural:!1,selections:[r,a,o,s,d,u,{alias:null,args:null,concreteType:"InferenceSessionError",kind:"LinkedField",name:"errors",plural:!0,selections:[c,{alias:null,args:null,concreteType:"InferenceSessionErrorInfo",kind:"LinkedField",name:"errors",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"repr",storageKey:null}],storageKey:null}],storageKey:null},m,g,v,f,p,h,{alias:null,args:null,concreteType:"Routing",kind:"LinkedField",name:"routings",plural:!0,selections:[k,x,S,y,_,b],storageKey:null},b,{alias:null,args:null,kind:"ScalarField",name:"created_user_email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"session_owner_email",storageKey:null},_],storageKey:null},Z]},params:{cacheID:"d6316c11b817c2c45bfd2dcbf0604407",id:null,metadata:{},name:"RoutingListPageQuery",operationKind:"query",text:'query RoutingListPageQuery(\n  $endpointId: UUID!\n  $tokenListOffset: Int!\n  $tokenListLimit: Int!\n) {\n  endpoint(endpoint_id: $endpointId) {\n    name\n    endpoint_id\n    image\n    desired_session_count\n    url\n    open_to_public\n    errors {\n      session_id\n      ...ServingRouteErrorModalFragment\n    }\n    retries\n    model\n    model_mount_destiation\n    resource_group\n    resource_slots\n    resource_opts\n    routings {\n      routing_id\n      session\n      traffic_ratio\n      endpoint\n      status\n      id\n    }\n    ...EndpointOwnerInfoFragment\n    ...EndpointStatusTagFragment\n    ...ModelServiceSettingModal_endpoint\n    id\n  }\n  endpoint_token_list(offset: $tokenListOffset, limit: $tokenListLimit, endpoint_id: $endpointId) {\n    total_count\n    items {\n      id\n      token\n      endpoint_id\n      domain\n      project\n      session_owner\n      created_at\n      valid_until\n    }\n  }\n}\n\nfragment EndpointOwnerInfoFragment on Endpoint {\n  id\n  created_user_email @since(version: "23.09.8")\n  session_owner_email @since(version: "23.09.8")\n}\n\nfragment EndpointStatusTagFragment on Endpoint {\n  id\n  status\n}\n\nfragment ModelServiceSettingModal_endpoint on Endpoint {\n  endpoint_id\n  desired_session_count\n}\n\nfragment ServingRouteErrorModalFragment on InferenceSessionError {\n  session_id\n  errors {\n    repr\n  }\n}\n'}}}();l.hash="b3359956da2181b3e5e0fb555c26cf20",n.default=l},43596:function(e,n,i){i.d(n,{Z:function(){return s}});var l=i(87462),t=i(4519),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},a=i(9491),o=function(e,n){return t.createElement(a.Z,(0,l.Z)({},e,{ref:n,icon:r}))};var s=t.forwardRef(o)},43971:function(e,n,i){i.d(n,{Z:function(){return s}});var l=i(87462),t=i(4519),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},a=i(9491),o=function(e,n){return t.createElement(a.Z,(0,l.Z)({},e,{ref:n,icon:r}))};var s=t.forwardRef(o)}}]);
//# sourceMappingURL=232.8f8d2cd4.chunk.js.map
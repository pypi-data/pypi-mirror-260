"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[896,502],{61502:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee},useShadowRoot:function(){return $},useWebComponentInfo:function(){return U}});var i=t(1413),a=t(29439),o=t(74165),r=t(15861),l=t(24530),u=t(24717),c=t(61724);function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,i=(0,l.Qc)(e),a=(0,u.Vn)(i,{Field:{enter:function(e){var i;if(null!==e&&void 0!==e&&null!==(i=e.directives)&&void 0!==i&&i.find((function(e){var i,a,o,r,l=e.name.value,u=null===(i=e.arguments)||void 0===i?void 0:i[0].name.value,c=null===(a=e.arguments)||void 0===a||null===(o=a[0].value)||void 0===o?void 0:o.value,d=null===(r=e.arguments)||void 0===r?void 0:r[0];if("since"===l&&"version"===u){if(t(c))return!0}else if("deprecatedSince"===l&&"version"===u){var s="StringValue"===(null===d||void 0===d?void 0:d.value.kind)?null===d||void 0===d?void 0:d.value.value:n[null===d||void 0===d?void 0:d.value.name.value];if(!t(s))return!0}else if("skipOnClient"===l&&"if"===u){if("BooleanValue"===(null===d||void 0===d?void 0:d.value.kind)&&d.value.value)return!0;if("Variable"===(null===d||void 0===d?void 0:d.value.kind)&&n[d.value.name.value])return!0}return!1})))return null},leave:function(e){var n;if(e.selectionSet&&"SelectionSet"===e.selectionSet.kind&&0===(null===(n=e.selectionSet.selections)||void 0===n?void 0:n.length))return null}},Directive:{leave:function(e){var n=e.name.value;if(["since","deprecatedSince","skipOnClient"].includes(n))return null}}}),o={};return(0,u.Vn)(a,{Variable:function(e){o[e.name.value]=(o[e.name.value]||0)+1}}),a=(0,u.Vn)(a,{VariableDefinition:{enter:function(e){if(o[e.variable.name.value]<=1)return null}}}),(0,c.S)(a)}var s=t(41011);s.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var v=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(n,t){var i,a,r,l,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==globalThis.backendaiclient){e.next=3;break}return e.next=3,new Promise((function(e){document.addEventListener("backend-ai-connected",(function n(){document.removeEventListener("backend-ai-connected",n),e(void 0)}))}));case 3:return r=d(n.text||"",t,(function(e){var n;return!(null!==(n=globalThis.backendaiclient)&&void 0!==n&&n.isManagerVersionCompatibleWith(e))})),l={query:r,variables:t},u=null===(i=globalThis.backendaiclient)||void 0===i?void 0:i.newSignedRequest("POST","/admin/gql",l),e.next=8,null===(a=globalThis.backendaiclient)||void 0===a?void 0:a._wrapWithPromise(u,!1,null,1e4,0).catch((function(e){}));case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:return c=e.t0,e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();var f,m=new s.Environment({network:s.Network.create(v,void 0),store:new s.Store(new s.RecordSource)}),g=t(80382),p=t(21232),h=t(27340),b=t(41239),k=t(44036),x=t(47226),y=t(49883),w=t(66670),Z=t(99517),j=t.n(Z),S=(t(24989),t(79354)),T=t.n(S),C=t(79748),E=t.n(C),L=t(51714),F=t.n(L),_=t(63540),P=t.n(_),M=t(18272),V=t.n(M),R=t(9666),q=t.n(R),A=t(64447),D=t(13881),K=t(4519),O=t(81748),I=t(87112),N=t(16980),Q=t(51843),z=t(12674),B=t(55144),W=t(73181),G=t(2556);j().extend(q()),j().extend(T()),j().extend(E()),j().extend(F()),j().extend(V()),j().extend(P());var H=K.createContext(null),Y=K.createContext(null),$=function(){return K.useContext(Y)},U=function(){return K.useContext(H)},J=new I.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});A.ZP.use(O.Db).use(D.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(f=globalThis.backendaioptions)||void 0===f?void 0:f.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1},react:{transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","span","code","p"]}});var X=function(){var e=(0,z.s0)();return(0,K.useLayoutEffect)((function(){var n=function(n){var t=n.detail;e(t,{replace:!0})};return document.addEventListener("react-navigate",n),function(){document.removeEventListener("react-navigate",n)}}),[e]),null},ee=function(e){var n=e.children,t=e.value,o=e.styles,r=e.shadowRoot,l=e.dispatchEvent,u=(0,K.useMemo)((function(){return(0,h.Df)()}),[]),c=function(){var e,n=(0,K.useState)(null===globalThis||void 0===globalThis||null===(e=globalThis.backendaioptions)||void 0===e?void 0:e.get("current_language")),t=(0,a.Z)(n,2),i=t[0],o=t[1],r=(0,O.$G)().i18n;return(0,K.useEffect)((function(){setTimeout((function(){return null===r||void 0===r?void 0:r.changeLanguage(i)}),0),j().locale(i)}),[]),(0,K.useEffect)((function(){var e=function(e){var n,t;o(null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.lang);var i=(null===e||void 0===e||null===(t=e.detail)||void 0===t?void 0:t.lang)||"en";null===r||void 0===r||r.changeLanguage(i),j().locale(i)};return window.addEventListener("langChanged",e),function(){return window.removeEventListener("langChanged",e)}}),[r]),[i]}(),d=(0,a.Z)(c,1)[0],s=(0,g.x)(),v=(0,p.r)().isDarkMode,f=(0,K.useMemo)((function(){return{value:t,dispatchEvent:l,moveTo:function(e,n){l("moveTo",{path:e,params:n})}}}),[t,l]);return(0,G.jsx)(G.Fragment,{children:m&&(0,G.jsx)(N.RelayEnvironmentProvider,{environment:m,children:(0,G.jsxs)(K.StrictMode,{children:[(0,G.jsxs)("style",{children:[o,".anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n/* fix: fixed column shadow display outside of a table wrapper */\n.ant-table-wrapper {\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n}\n\n/* fix: the tooltip does not appear in the `<Form.Item tooltip={'something'}` when the popup container is a parent node of the trigger node. */\n.ant-form-item-label {\n  overflow: unset !important;\n}\n"]}),(0,G.jsx)(I.QueryClientProvider,{client:J,children:(0,G.jsx)(Y.Provider,{value:r,children:(0,G.jsx)(H.Provider,{value:f,children:(0,G.jsx)(b.ZP,{getPopupContainer:function(e){return(null===e||void 0===e?void 0:e.parentNode)||r},locale:"ko"===d?w.Z:y.Z,theme:(0,i.Z)((0,i.Z)({},v?(0,i.Z)({},s.dark):(0,i.Z)({},s.light)),{},{algorithm:v?k.Z.darkAlgorithm:k.Z.defaultAlgorithm}),children:(0,G.jsx)(x.Z,{children:(0,G.jsx)(h.V9,{container:r,cache:u,children:(0,G.jsx)(K.Suspense,{fallback:"",children:(0,G.jsx)(Q.VK,{children:(0,G.jsxs)(B.QueryParamProvider,{adapter:W.Q,options:{},children:[(0,G.jsx)(X,{}),n]})})})})})})})})})]})})})}},14749:function(e,n,t){var i,a=t(1413),o=t(29439),r=t(44925),l=t(87760),u=t(50164),c=t(77758),d=t(99277),s=t(44036),v=t(57054),f=t(88464),m=t(39883),g=t(42272),p=t(70389),h=t(38818),b=(t(4519),t(81748)),k=t(87112),x=t(16980),y=t(2556),w=["userFrgmt","onRequestClose"];n.Z=function(e){var n=e.userFrgmt,Z=void 0===n?null:n,j=e.onRequestClose,S=(0,r.Z)(e,w),T=(0,b.$G)().t,C=s.Z.useToken().token,E=v.Z.useForm(),L=(0,o.Z)(E,1)[0],F=(0,x.useFragment)(void 0!==i?i:i=t(78067),Z),_=(0,l.Dj)(),P=(0,k.useQuery)({queryKey:["initialize_totp",null===_||void 0===_?void 0:_.email,S.open],queryFn:function(){return(null===F||void 0===F?void 0:F.email)!==(null===_||void 0===_?void 0:_.email)||null!==F&&void 0!==F&&F.totp_activated||!S.open?null:_.initialize_totp()},suspense:!1,staleTime:0,cacheTime:0}),M=(0,u.Y)({mutationFn:function(e){return _.activate_totp(e.otp)}});return(0,y.jsx)(c.Z,(0,a.Z)((0,a.Z)({title:T("webui.menu.SetupTotp"),maskClosable:!1,confirmLoading:M.isLoading,onOk:function(){L.validateFields().then((function(e){M.mutate(e,{onSuccess:function(){f.ZP.success(T("totp.TotpSetupCompleted")),j(!0)},onError:function(){f.ZP.error(T("totp.InvalidTotpCode"))}}),new Promise((function(e,n){})).then((function(){j(!0)}))}))},onCancel:function(){j()},style:{zIndex:1}},S),{},{children:P.isLoading?(0,y.jsx)(d.Z,{justify:"center",direction:"row",children:(0,y.jsx)(m.Z,{})}):P.data?(0,y.jsxs)(v.Z,{preserve:!1,form:L,validateTrigger:["onChange","onBlur"],children:[T("totp.TypeInAuthKey"),(0,y.jsx)(d.Z,{justify:"center",style:{margin:C.marginSM,gap:C.margin},children:(0,y.jsx)(g.Z,{value:P.data.totp_uri})}),T("totp.ScanQRToEnable"),(0,y.jsx)(d.Z,{justify:"center",style:{margin:C.marginSM,gap:C.margin},children:(0,y.jsx)(p.Z.Text,{copyable:!0,code:!0,children:P.data.totp_key})}),T("totp.TypeInAuthKey"),(0,y.jsx)(d.Z,{justify:"center",style:{margin:C.marginSM,gap:C.margin},children:(0,y.jsx)(v.Z.Item,{required:!0,name:"otp",children:(0,y.jsx)(h.Z,{maxLength:6,allowClear:!0,placeholder:"000000",style:{maxWidth:120}})})})]}):(0,y.jsx)(d.Z,{justify:"center",direction:"row",children:T("totp.TotpSetupNotAvailable")})}))}},78067:function(e,n,t){t.r(n);var i={argumentDefinitions:[{kind:"RootArgument",name:"isNotSupportTotp"}],kind:"Fragment",metadata:null,name:"TOTPActivateModalFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"totp_activated",storageKey:null}],type:"User",abstractKey:null,hash:"f5da6b3094f7d70bef9373d9c907955c"};n.default=i},21232:function(e,n,t){t.d(n,{r:function(){return l}});var i=t(29439),a=t(67873),o=t(4519),r=function(e,n){var t=(0,a.Z)(e,{defaultValue:n}),r=(0,i.Z)(t,2),l=r[0],u=r[1],c="useLocalStorageGlobalState:"+e;return(0,o.useEffect)((function(){var e=function(e){u(e.detail)};return document.addEventListener(c,e),function(){return document.removeEventListener(c,e)}}),[u,c]),[l,function(e){document.dispatchEvent(new CustomEvent(c,{detail:e}))}]},l=function(){var e=r("backendaiwebui.settings.themeMode","system"),n=(0,i.Z)(e,2),t=n[0],a=n[1],l=r("backendaiwebui.settings.isDarkMode",window.matchMedia("(prefers-color-scheme: dark)").matches),u=(0,i.Z)(l,2),c=(u[0],u[1]);return(0,o.useEffect)((function(){if("system"===t){var e=window.matchMedia("(prefers-color-scheme: dark)");c(e.matches);var n=function(e){c(e.matches)};return e.addEventListener("change",n),function(){return e.removeEventListener("change",n)}}c("dark"===t)}),[t,c]),{themeMode:t,isDarkMode:!1,setThemeMode:function(e){a(e)}}}}}]);
//# sourceMappingURL=896.4f375222.chunk.js.map
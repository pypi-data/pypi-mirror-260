"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[540,502],{61502:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee},useShadowRoot:function(){return K},useWebComponentInfo:function(){return J}});var i=t(1413),r=t(29439),a=t(74165),o=t(15861),l=t(24530),u=t(24717),s=t(61724);function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,i=(0,l.Qc)(e),r=(0,u.Vn)(i,{Field:{enter:function(e){var i;if(null!==e&&void 0!==e&&null!==(i=e.directives)&&void 0!==i&&i.find((function(e){var i,r,a,o,l=e.name.value,u=null===(i=e.arguments)||void 0===i?void 0:i[0].name.value,s=null===(r=e.arguments)||void 0===r||null===(a=r[0].value)||void 0===a?void 0:a.value,d=null===(o=e.arguments)||void 0===o?void 0:o[0];if("since"===l&&"version"===u){if(t(s))return!0}else if("deprecatedSince"===l&&"version"===u){var c="StringValue"===(null===d||void 0===d?void 0:d.value.kind)?null===d||void 0===d?void 0:d.value.value:n[null===d||void 0===d?void 0:d.value.name.value];if(!t(c))return!0}else if("skipOnClient"===l&&"if"===u){if("BooleanValue"===(null===d||void 0===d?void 0:d.value.kind)&&d.value.value)return!0;if("Variable"===(null===d||void 0===d?void 0:d.value.kind)&&n[d.value.name.value])return!0}return!1})))return null},leave:function(e){var n;if(e.selectionSet&&"SelectionSet"===e.selectionSet.kind&&0===(null===(n=e.selectionSet.selections)||void 0===n?void 0:n.length))return null}},Directive:{leave:function(e){var n=e.name.value;if(["since","deprecatedSince","skipOnClient"].includes(n))return null}}}),a={};return(0,u.Vn)(r,{Variable:function(e){a[e.name.value]=(a[e.name.value]||0)+1}}),r=(0,u.Vn)(r,{VariableDefinition:{enter:function(e){if(a[e.variable.name.value]<=1)return null}}}),(0,s.S)(r)}var c=t(41011);c.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var v=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n,t){var i,r,o,l,u,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==globalThis.backendaiclient){e.next=3;break}return e.next=3,new Promise((function(e){document.addEventListener("backend-ai-connected",(function n(){document.removeEventListener("backend-ai-connected",n),e(void 0)}))}));case 3:return o=d(n.text||"",t,(function(e){var n;return!(null!==(n=globalThis.backendaiclient)&&void 0!==n&&n.isManagerVersionCompatibleWith(e))})),l={query:o,variables:t},u=null===(i=globalThis.backendaiclient)||void 0===i?void 0:i.newSignedRequest("POST","/admin/gql",l),e.next=8,null===(r=globalThis.backendaiclient)||void 0===r?void 0:r._wrapWithPromise(u,!1,null,1e4,0).catch((function(e){}));case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:return s=e.t0,e.abrupt("return",s);case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();var f,m=new c.Environment({network:c.Network.create(v,void 0),store:new c.Store(new c.RecordSource)}),h=t(80382),g=t(21232),p=t(27340),w=t(41239),b=t(44036),k=t(47226),x=t(49883),P=t(66670),Z=t(99517),y=t.n(Z),E=(t(24989),t(79354)),C=t.n(E),S=t(79748),j=t.n(S),L=t(51714),M=t.n(L),T=t(63540),V=t.n(T),_=t(18272),F=t.n(_),R=t(9666),z=t.n(R),D=t(64447),N=t(13881),O=t(4519),B=t(81748),W=t(87112),q=t(16980),A=t(51843),I=t(12674),Q=t(55144),Y=t(73181),G=t(2556);y().extend(z()),y().extend(C()),y().extend(j()),y().extend(M()),y().extend(F()),y().extend(V());var H=O.createContext(null),$=O.createContext(null),K=function(){return O.useContext($)},J=function(){return O.useContext(H)},U=new W.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});D.ZP.use(B.Db).use(N.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(f=globalThis.backendaioptions)||void 0===f?void 0:f.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1},react:{transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","span","code","p"]}});var X=function(){var e=(0,I.s0)();return(0,O.useLayoutEffect)((function(){var n=function(n){var t=n.detail;e(t,{replace:!0})};return document.addEventListener("react-navigate",n),function(){document.removeEventListener("react-navigate",n)}}),[e]),null},ee=function(e){var n=e.children,t=e.value,a=e.styles,o=e.shadowRoot,l=e.dispatchEvent,u=(0,O.useMemo)((function(){return(0,p.Df)()}),[]),s=function(){var e,n=(0,O.useState)(null===globalThis||void 0===globalThis||null===(e=globalThis.backendaioptions)||void 0===e?void 0:e.get("current_language")),t=(0,r.Z)(n,2),i=t[0],a=t[1],o=(0,B.$G)().i18n;return(0,O.useEffect)((function(){setTimeout((function(){return null===o||void 0===o?void 0:o.changeLanguage(i)}),0),y().locale(i)}),[]),(0,O.useEffect)((function(){var e=function(e){var n,t;a(null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.lang);var i=(null===e||void 0===e||null===(t=e.detail)||void 0===t?void 0:t.lang)||"en";null===o||void 0===o||o.changeLanguage(i),y().locale(i)};return window.addEventListener("langChanged",e),function(){return window.removeEventListener("langChanged",e)}}),[o]),[i]}(),d=(0,r.Z)(s,1)[0],c=(0,h.x)(),v=(0,g.r)().isDarkMode,f=(0,O.useMemo)((function(){return{value:t,dispatchEvent:l,moveTo:function(e,n){l("moveTo",{path:e,params:n})}}}),[t,l]);return(0,G.jsx)(G.Fragment,{children:m&&(0,G.jsx)(q.RelayEnvironmentProvider,{environment:m,children:(0,G.jsxs)(O.StrictMode,{children:[(0,G.jsxs)("style",{children:[a,".anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n/* fix: fixed column shadow display outside of a table wrapper */\n.ant-table-wrapper {\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n}\n\n/* fix: the tooltip does not appear in the `<Form.Item tooltip={'something'}` when the popup container is a parent node of the trigger node. */\n.ant-form-item-label {\n  overflow: unset !important;\n}\n"]}),(0,G.jsx)(W.QueryClientProvider,{client:U,children:(0,G.jsx)($.Provider,{value:o,children:(0,G.jsx)(H.Provider,{value:f,children:(0,G.jsx)(w.ZP,{getPopupContainer:function(e){return(null===e||void 0===e?void 0:e.parentNode)||o},locale:"ko"===d?P.Z:x.Z,theme:(0,i.Z)((0,i.Z)({},v?(0,i.Z)({},c.dark):(0,i.Z)({},c.light)),{},{algorithm:v?b.Z.darkAlgorithm:b.Z.defaultAlgorithm}),children:(0,G.jsx)(k.Z,{children:(0,G.jsx)(p.V9,{container:o,cache:u,children:(0,G.jsx)(O.Suspense,{fallback:"",children:(0,G.jsx)(A.VK,{children:(0,G.jsxs)(Q.QueryParamProvider,{adapter:Y.Q,options:{},children:[(0,G.jsx)(X,{}),n]})})})})})})})})})]})})})}},38540:function(e,n,t){t.r(n),t.d(n,{passwordPattern:function(){return b}});var i=t(29439),r=t(43255),a=t(87760),o=t(50164),l=t(61502),u=t(99277),s=t(69080),d=t(44036),c=t(57054),v=t(65113),f=t(70389),m=t(38818),h=t(92171),g=t(4519),p=t(81748),w=t(2556),b=/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[_\W]).{8,}$/;n.default=function(){var e,n=(0,l.useWebComponentInfo)(),t=n.value,k=n.dispatchEvent;try{e=JSON.parse(t||"")}catch(_){e={open:!1,currentPassword:"",username:"",api_endpoint:""}}var x=e,P=x.open,Z=x.currentPassword,y=x.username,E=x.api_endpoint,C=d.Z.useToken().token,S=c.Z.useForm(),j=(0,i.Z)(S,1)[0],L=(0,p.$G)().t;(0,g.useEffect)((function(){P&&j.resetFields()}),[P,j]);var M=(0,a.M)({api_endpoint:E}),T=(0,o.Y)({mutationFn:function(e){return(0,r.Lc)({method:"POST",url:"/server/update-password-no-auth",body:e,client:M})}}),V=function(){j.validateFields().then((function(e){T.mutate({username:y,current_password:Z,new_password:e.newPassword},{onSuccess:function(e,n,t){k("ok",null)},onError:function(e,n,t){}})}))};return(0,w.jsx)(v.Z,{open:P,centered:!0,mask:!1,onCancel:function(){k("cancel",null)},keyboard:!1,maskClosable:!1,footer:null,width:450,destroyOnClose:!0,forceRender:!0,children:(0,w.jsxs)(u.Z,{direction:"column",justify:"start",align:"stretch",gap:"md",style:{alignSelf:"stretch",paddingTop:C.paddingMD,paddingBottom:C.paddingMD},children:[(0,w.jsxs)(f.Z.Title,{level:3,style:{margin:0},children:[(0,w.jsx)(s.Z,{twoToneColor:C.colorWarning})," ",L("webui.menu.PleaseChangeYourPassword")]}),L("webui.menu.YouMushChangeYourPassword"),(0,w.jsxs)(c.Z,{form:j,layout:"vertical",initialValues:{currentPassword:Z},disabled:T.isLoading,children:[(0,w.jsx)(c.Z.Item,{name:"newPassword",label:L("webui.menu.NewPassword"),rules:[{required:!0},{pattern:b,message:L("webui.menu.InvalidPasswordMessage").toString()},function(){return{validator:function(e,n){return Z===n?Promise.reject(new Error(L("webui.menu.NewPasswordCannotBeSame").toString())):Promise.resolve()}}}],hasFeedback:!0,children:(0,w.jsx)(m.Z.Password,{})}),(0,w.jsx)(c.Z.Item,{name:"confirm",label:L("webui.menu.NewPasswordAgain"),dependencies:["newPassword"],hasFeedback:!0,rules:[{required:!0},function(e){var n=e.getFieldValue;return{validator:function(e,t){return t&&n("newPassword")!==t?Promise.reject(new Error(L("environment.PasswordsDoNotMatch").toString())):Promise.resolve()}}}],children:(0,w.jsx)(m.Z.Password,{onPressEnter:V})})]}),(0,w.jsx)(h.ZP,{type:"primary",onClick:V,loading:T.isLoading,children:L("webui.menu.Update")})]})})}},21232:function(e,n,t){t.d(n,{r:function(){return l}});var i=t(29439),r=t(67873),a=t(4519),o=function(e,n){var t=(0,r.Z)(e,{defaultValue:n}),o=(0,i.Z)(t,2),l=o[0],u=o[1],s="useLocalStorageGlobalState:"+e;return(0,a.useEffect)((function(){var e=function(e){u(e.detail)};return document.addEventListener(s,e),function(){return document.removeEventListener(s,e)}}),[u,s]),[l,function(e){document.dispatchEvent(new CustomEvent(s,{detail:e}))}]},l=function(){var e=o("backendaiwebui.settings.themeMode","system"),n=(0,i.Z)(e,2),t=n[0],r=n[1],l=o("backendaiwebui.settings.isDarkMode",window.matchMedia("(prefers-color-scheme: dark)").matches),u=(0,i.Z)(l,2),s=(u[0],u[1]);return(0,a.useEffect)((function(){if("system"===t){var e=window.matchMedia("(prefers-color-scheme: dark)");s(e.matches);var n=function(e){s(e.matches)};return e.addEventListener("change",n),function(){return e.removeEventListener("change",n)}}s("dark"===t)}),[t,s]),{themeMode:t,isDarkMode:!1,setThemeMode:function(e){r(e)}}}},69080:function(e,n,t){t.d(n,{Z:function(){return u}});var i=t(87462),r=t(4519),a={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z",fill:e}},{tag:"path",attrs:{d:"M172.2 828.1h679.6L512 239.9 172.2 828.1zM560 720a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm-16-304v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8z",fill:n}},{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8z",fill:e}}]}},name:"warning",theme:"twotone"},o=t(9491),l=function(e,n){return r.createElement(o.Z,(0,i.Z)({},e,{ref:n,icon:a}))};var u=r.forwardRef(l)}}]);
//# sourceMappingURL=540.433ee5d1.chunk.js.map
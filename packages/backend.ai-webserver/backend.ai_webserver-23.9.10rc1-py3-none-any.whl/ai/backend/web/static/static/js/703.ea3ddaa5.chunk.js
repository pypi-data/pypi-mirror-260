"use strict";(self.webpackChunkbackend_ai_webui_react=self.webpackChunkbackend_ai_webui_react||[]).push([[703],{61502:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee},useShadowRoot:function(){return Q},useWebComponentInfo:function(){return J}});var r=t(1413),i=t(29439),o=t(74165),a=t(15861),s=t(24530),l=t(24717),c=t(61724);function u(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,r=(0,s.Qc)(e),i=(0,l.Vn)(r,{Field:{enter:function(e){var r;if(null!==e&&void 0!==e&&null!==(r=e.directives)&&void 0!==r&&r.find((function(e){var r,i,o,a,s=e.name.value,l=null===(r=e.arguments)||void 0===r?void 0:r[0].name.value,c=null===(i=e.arguments)||void 0===i||null===(o=i[0].value)||void 0===o?void 0:o.value,u=null===(a=e.arguments)||void 0===a?void 0:a[0];if("since"===s&&"version"===l){if(t(c))return!0}else if("deprecatedSince"===s&&"version"===l){var d="StringValue"===(null===u||void 0===u?void 0:u.value.kind)?null===u||void 0===u?void 0:u.value.value:n[null===u||void 0===u?void 0:u.value.name.value];if(!t(d))return!0}else if("skipOnClient"===s&&"if"===l){if("BooleanValue"===(null===u||void 0===u?void 0:u.value.kind)&&u.value.value)return!0;if("Variable"===(null===u||void 0===u?void 0:u.value.kind)&&n[u.value.name.value])return!0}return!1})))return null},leave:function(e){var n;if(e.selectionSet&&"SelectionSet"===e.selectionSet.kind&&0===(null===(n=e.selectionSet.selections)||void 0===n?void 0:n.length))return null}},Directive:{leave:function(e){var n=e.name.value;if(["since","deprecatedSince","skipOnClient"].includes(n))return null}}}),o={};return(0,l.Vn)(i,{Variable:function(e){o[e.name.value]=(o[e.name.value]||0)+1}}),i=(0,l.Vn)(i,{VariableDefinition:{enter:function(e){if(o[e.variable.name.value]<=1)return null}}}),(0,c.S)(i)}var d=t(41011);d.RelayFeatureFlags.ENABLE_RELAY_RESOLVERS=!0;var m=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n,t){var r,i,a,s,l,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==globalThis.backendaiclient){e.next=3;break}return e.next=3,new Promise((function(e){document.addEventListener("backend-ai-connected",(function n(){document.removeEventListener("backend-ai-connected",n),e(void 0)}))}));case 3:return a=u(n.text||"",t,(function(e){var n;return!(null!==(n=globalThis.backendaiclient)&&void 0!==n&&n.isManagerVersionCompatibleWith(e))})),s={query:a,variables:t},l=null===(r=globalThis.backendaiclient)||void 0===r?void 0:r.newSignedRequest("POST","/admin/gql",s),e.next=8,null===(i=globalThis.backendaiclient)||void 0===i?void 0:i._wrapWithPromise(l,!1,null,1e4,0).catch((function(e){}));case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0={};case 11:return c=e.t0,e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();var h,v=new d.Environment({network:d.Network.create(m,void 0),store:new d.Store(new d.RecordSource)}),p=t(80382),f=t(21232),g=t(27340),x=t(41239),Z=t(44036),j=t(47226),y=t(49883),b=t(66670),w=t(99517),k=t.n(w),F=(t(24989),t(79354)),C=t.n(F),P=t(79748),S=t.n(P),T=t(51714),V=t.n(T),E=t(63540),I=t.n(E),_=t(18272),M=t.n(_),A=t(9666),N=t.n(A),O=t(64447),z=t(13881),R=t(4519),D=t(81748),B=t(87112),L=t(16980),K=t(51843),q=t(12674),W=t(55144),G=t(73181),U=t(2556);k().extend(N()),k().extend(C()),k().extend(S()),k().extend(V()),k().extend(M()),k().extend(I());var H=R.createContext(null),$=R.createContext(null),Q=function(){return R.useContext($)},J=function(){return R.useContext(H)},X=new B.QueryClient({defaultOptions:{queries:{suspense:!0,refetchOnWindowFocus:!1,retry:!1}}});O.ZP.use(D.Db).use(z.Z).init({backend:{loadPath:"/resources/i18n/{{lng}}.json"},lng:(null===globalThis||void 0===globalThis||null===(h=globalThis.backendaioptions)||void 0===h?void 0:h.get("current_language"))||"en",fallbackLng:"en",interpolation:{escapeValue:!1},react:{transSupportBasicHtmlNodes:!0,transKeepBasicHtmlNodesFor:["br","strong","span","code","p"]}});var Y=function(){var e=(0,q.s0)();return(0,R.useLayoutEffect)((function(){var n=function(n){var t=n.detail;e(t,{replace:!0})};return document.addEventListener("react-navigate",n),function(){document.removeEventListener("react-navigate",n)}}),[e]),null},ee=function(e){var n=e.children,t=e.value,o=e.styles,a=e.shadowRoot,s=e.dispatchEvent,l=(0,R.useMemo)((function(){return(0,g.Df)()}),[]),c=function(){var e,n=(0,R.useState)(null===globalThis||void 0===globalThis||null===(e=globalThis.backendaioptions)||void 0===e?void 0:e.get("current_language")),t=(0,i.Z)(n,2),r=t[0],o=t[1],a=(0,D.$G)().i18n;return(0,R.useEffect)((function(){setTimeout((function(){return null===a||void 0===a?void 0:a.changeLanguage(r)}),0),k().locale(r)}),[]),(0,R.useEffect)((function(){var e=function(e){var n,t;o(null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.lang);var r=(null===e||void 0===e||null===(t=e.detail)||void 0===t?void 0:t.lang)||"en";null===a||void 0===a||a.changeLanguage(r),k().locale(r)};return window.addEventListener("langChanged",e),function(){return window.removeEventListener("langChanged",e)}}),[a]),[r]}(),u=(0,i.Z)(c,1)[0],d=(0,p.x)(),m=(0,f.r)().isDarkMode,h=(0,R.useMemo)((function(){return{value:t,dispatchEvent:s,moveTo:function(e,n){s("moveTo",{path:e,params:n})}}}),[t,s]);return(0,U.jsx)(U.Fragment,{children:v&&(0,U.jsx)(L.RelayEnvironmentProvider,{environment:v,children:(0,U.jsxs)(R.StrictMode,{children:[(0,U.jsxs)("style",{children:[o,".anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n/* fix: fixed column shadow display outside of a table wrapper */\n.ant-table-wrapper {\n  border-radius: 8px 8px 0 0;\n  overflow: hidden;\n}\n\n/* fix: the tooltip does not appear in the `<Form.Item tooltip={'something'}` when the popup container is a parent node of the trigger node. */\n.ant-form-item-label {\n  overflow: unset !important;\n}\n"]}),(0,U.jsx)(B.QueryClientProvider,{client:X,children:(0,U.jsx)($.Provider,{value:a,children:(0,U.jsx)(H.Provider,{value:h,children:(0,U.jsx)(x.ZP,{getPopupContainer:function(e){return(null===e||void 0===e?void 0:e.parentNode)||a},locale:"ko"===u?b.Z:y.Z,theme:(0,r.Z)((0,r.Z)({},m?(0,r.Z)({},d.dark):(0,r.Z)({},d.light)),{},{algorithm:m?Z.Z.darkAlgorithm:Z.Z.defaultAlgorithm}),children:(0,U.jsx)(j.Z,{children:(0,U.jsx)(g.V9,{container:a,cache:l,children:(0,U.jsx)(R.Suspense,{fallback:"",children:(0,U.jsx)(K.VK,{children:(0,U.jsxs)(W.QueryParamProvider,{adapter:G.Q,options:{},children:[(0,U.jsx)(Y,{}),n]})})})})})})})})})]})})})}},750:function(e,n,t){t.r(n);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VFolderPermissionTag_VFolder",selections:[{alias:null,args:null,kind:"ScalarField",name:"permission",storageKey:null}],type:"VirtualFolder",abstractKey:null,hash:"d3b0f85629ac8c6f45ef363938f66067"};n.default=r},99703:function(e,n,t){t.r(n),t.d(n,{default:function(){return Ke}});var r,i=t(74165),o=t(4942),a=t(15861),s=t(29439),l=t(1413),c=t(44925),u=t(83249),d=t(69080),m=t(44036),h=t(92171),v=t(53066),p=t(32048),f=t.n(p),g=t(4519),x=t(2556),Z=["status","extraButtonTitle","onClickExtraButton","extra","style"],j=function(e){var n=e.status,t=void 0===n?"default":n,r=e.extraButtonTitle,i=e.onClickExtraButton,o=e.extra,a=e.style,s=(0,c.Z)(e,Z),p=m.Z.useToken().token,g=o||r&&(0,x.jsx)(h.ZP,{type:"link",icon:"error"===t?(0,x.jsx)(u.Z,{twoToneColor:p.colorError}):"warning"===t?(0,x.jsx)(d.Z,{twoToneColor:p.colorWarning}):void 0,onClick:i,children:r})||void 0;return(0,x.jsx)(v.Z,(0,l.Z)({style:f().extend(a,{borderColor:"error"===t?p.colorError:"warning"===t?p.colorWarning:"success"===t?p.colorSuccess:null===a||void 0===a?void 0:a.borderColor}),extra:g},s))},y=t(99821),b=t(66957),w=t(99517),k=t.n(w),F=["value","onChange","localFormat"],C=function(e){var n=e.value,t=e.onChange,r=e.localFormat,i=(0,c.Z)(e,F),o=(0,y.Z)({value:n,onChange:t}),a=(0,s.Z)(o,2)[1];return(0,x.jsx)(b.Z,(0,l.Z)({value:n?k()(n):void 0,onChange:function(e){var n,t=r?null===e||void 0===e?void 0:e.format():null===e||void 0===e||null===(n=e.tz())||void 0===n?void 0:n.toISOString();a(t)}},i))},P=t(61502),S=t(99277),T=t(74860),V=t(20558),E=t(57054),I=t(38818),_=t(81748),M=["formItemProps"],A=["key","name"],N=function(e){var n=e.formItemProps,t=(0,c.Z)(e,M),r=(0,g.useRef)(null),i=(0,_.$G)().t,o=E.Z.useFormInstance();return(0,x.jsx)(E.Z.List,(0,l.Z)((0,l.Z)({},t),{},{children:function(e,a){var s=a.add,u=a.remove;return(0,x.jsxs)(S.Z,{direction:"column",gap:"xs",align:"stretch",children:[e.map((function(a,s){var d=a.key,m=a.name,h=(0,c.Z)(a,A);return(0,x.jsxs)(S.Z,{direction:"row",align:"baseline",gap:"xs",children:[(0,x.jsx)(E.Z.Item,(0,l.Z)((0,l.Z)((0,l.Z)({},h),{},{style:{marginBottom:0,flex:1},name:[m,"variable"],rules:[{required:!0,message:i("session.launcher.EnterEnvironmentVariable")},{pattern:/^[a-zA-Z_][a-zA-Z0-9_]*$/,message:i("session.launcher.EnvironmentVariableNamePatternError")},function(e){var n=e.getFieldValue;return{validator:function(e,r){var o=f().map(n(t.name),(function(e){return null===e||void 0===e?void 0:e.variable}));return!f().isEmpty(r)&&o.length>0&&f().filter(o,(function(e){return e===r})).length>1?Promise.reject(i("session.launcher.EnvironmentVariableDuplicateName")):Promise.resolve()}}}]},n),{},{children:(0,x.jsx)(I.Z,{ref:s===e.length-1?r:null,placeholder:"Variable",onChange:function(){var n=e.map((function(e,n){return[t.name,n,"variable"]}));o.validateFields(n)}})})),(0,x.jsx)(E.Z.Item,(0,l.Z)((0,l.Z)({},h),{},{name:[m,"value"],style:{marginBottom:0,flex:1},rules:[{required:!0,message:"Enter value"}],children:(0,x.jsx)(I.Z,{placeholder:"Value"})})),(0,x.jsx)(T.Z,{onClick:function(){return u(m)}})]},d)})),(0,x.jsx)(E.Z.Item,{noStyle:!0,children:(0,x.jsx)(h.ZP,{type:"dashed",onClick:function(){s(),setTimeout((function(){r.current&&r.current.focus()}),0)},icon:(0,x.jsx)(V.Z,{}),block:!0,children:"Add variable"})})]})}}))},O=t(15008),z=t(14001),R=t(36459),D=t(87760),B=t(19427),L=t(82548),K=["value"],q=function(e){var n=e.value,t=(0,c.Z)(e,K),r=parseInt(n),i=r>=1024&&r<=65535;return(0,x.jsx)(L.Z,(0,l.Z)({color:i?void 0:"red"},t))},W=function(e){var n=Object.assign({},((0,R.Z)(e),e)),t=(0,_.$G)().t,r=(0,D.Dj)();return(0,x.jsx)(E.Z.Item,(0,l.Z)((0,l.Z)({label:t("session.launcher.PreOpenPortTitle"),name:"ports",tooltip:(0,x.jsx)(_.cC,{i18nKey:"session.launcher.DescSetPreOpenPort"}),extra:t("session.launcher.PreOpenPortRangeGuide"),rules:[{max:r._config.maxCountForPreopenPorts,type:"array",message:t("session.launcher.PreOpenPortMaxCountLimit",{count:r._config.maxCountForPreopenPorts})},function(e){e.getFieldValue;return{validator:function(e,n){return f().every(n,(function(e){var n=parseInt(e);return n>=1024&&n<=65535}))?Promise.resolve():Promise.reject(new Error(t("session.launcher.PreOpenPortRange")))}}}]},n),{},{children:(0,x.jsx)(B.Z,{mode:"tags",tagRender:function(e){return(0,x.jsx)(q,{closable:e.closable,onClose:e.onClose,onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},value:e.value,children:e.label})},style:{width:"100%"},suffixIcon:null,open:!1,tokenSeparators:[","," "]})}))},G=t(92850),U=t(96732),H=function(e){var n=Object.assign({},((0,R.Z)(e),e)),t=(0,_.$G)().t;return(0,x.jsx)(E.Z.Item,(0,l.Z)((0,l.Z)({label:t("session.launcher.SessionName"),name:"name",rules:[{max:64,message:t("session.Validation.SessionNameTooLong64")},{pattern:/^(?:[a-zA-Z0-9][-a-zA-Z0-9._]{2,}[a-zA-Z0-9])?$/,message:t("session.Validation.PleaseFollowSessionNameRule").toString()}]},n),{},{children:(0,x.jsx)(I.Z,{allowClear:!0})}))},$=t(93433),Q=t(43255),J=t(50164),X=t(91278),Y=t(37007),ee=t(16980),ne=function(e){var n=e.vFolderFrgmt,i=void 0===n?null:n,o=e.permission,a=(0,ee.useFragment)(void 0!==r?r:r=t(750),i),s=f().chain({r:"green",w:"blue",d:"red"}).map((function(e,n){if(function(e,n){return!(null===e||void 0===e||!e.includes(n))||!(null===e||void 0===e||!e.includes("w")||"r"!==n)}((null===a||void 0===a?void 0:a.permission)||o,n))return{label:n.toUpperCase(),color:e}})).compact().value();return(0,x.jsx)(Y.Z,{values:s})},te=t(56713),re=t(50708),ie=t(72842),oe=t(70389),ae=t(227),se=t(49248),le=["filter","showAliasInput","selectedRowKeys","onChangeSelectedRowKeys","aliasBasePath","aliasMap","onChangeAliasMap","rowKey"],ce=function(e){var n=e.filter,t=e.showAliasInput,r=void 0!==t&&t,o=e.selectedRowKeys,u=void 0===o?[]:o,d=e.onChangeSelectedRowKeys,m=e.aliasBasePath,v=void 0===m?"/home/work/":m,p=e.aliasMap,Z=e.onChangeAliasMap,j=e.rowKey,b=void 0===j?"name":j,w=(0,c.Z)(e,le),F=g.useMemo((function(){return function(e){return e&&e[b]}}),[b]),C=(0,y.Z)({value:u,onChange:d},{defaultValue:[]}),T=(0,s.Z)(C,2),V=T[0],M=T[1],A=(0,y.Z)({value:p,onChange:Z},{defaultValue:{}}),N=(0,s.Z)(A,2),O=N[0],z=N[1],R=E.Z.useForm(),B=(0,s.Z)(R,1)[0];(0,g.useEffect)((function(){O&&(B.setFieldsValue(f().mapValues(O,(function(e){return e.startsWith(v)?e.slice(v.length):e}))),B.validateFields())}),[O,B,v]);var L=(0,_.$G)().t,K=(0,Q.y3)(),q=(0,D.qh)(),W=(0,D.Kr)("first"),G=(0,s.Z)(W,2),U=G[0],H=G[1],Y=(0,g.useTransition)(),ee=(0,s.Z)(Y,2),ce=ee[0],ue=ee[1],de=(0,J.h)({queryKey:["VFolderSelectQuery",U],queryFn:function(){return K({method:"GET",url:"/folders?group_id=".concat(q.id)})},staleTime:0}).data,me=(0,g.useState)(""),he=(0,s.Z)(me,2),ve=he[0],pe=he[1],fe=f().filter(de,(function(e){return!!V.includes(F(e))||(!n||n(e))&&(!ve||e.name.includes(ve))})),ge=function(e){null===e||void 0===e||e.preventDefault(),B.validateFields().then((function(e){})).catch((function(){})).finally((function(){z(f().mapValues(f().pickBy(B.getFieldsValue(),(function(e){return!!e})),(function(e,n){return xe(n,e)})))}))},xe=function(e,n){return f().isEmpty(n)?"".concat(v).concat(e):null!==n&&void 0!==n&&n.startsWith("/")?n:"".concat(v).concat(n)},Ze=(0,P.useShadowRoot)(),je=[{title:(0,x.jsxs)(S.Z,{direction:"row",gap:"xxs",children:[(0,x.jsx)(oe.Z.Text,{children:L("data.folders.Name")}),r&&(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(oe.Z.Text,{type:"secondary",style:{fontWeight:"normal"},children:["(",L("session.launcher.FolderAlias")," ",(0,x.jsx)(ae.Z,{title:(0,x.jsx)(_.cC,{i18nKey:"session.launcher.DescFolderAlias"}),style:{zIndex:1e4},getPopupContainer:function(){return Ze},children:(0,x.jsx)(te.Z,{})}),")"]})})]}),dataIndex:"name",sorter:function(e,n){return e.name.localeCompare(n.name)},render:function(e,n){var t=V.includes(F(n));return(0,x.jsxs)(S.Z,{direction:"column",align:"stretch",gap:"xxs",style:r&&t?{display:"inline-flex",height:70,width:"100%"}:void 0,children:[(0,x.jsx)(X.Z,{keyword:ve,children:e}),r&&t&&(0,x.jsx)(E.Z.Item,{noStyle:!0,shouldUpdate:function(e,t){return e[F(n)]!==t[F(n)]},children:function(){var e=f()(V).reduce((function(e,n){return e[n]=(null===O||void 0===O?void 0:O[n])||xe(n,void 0),e}),{});return(0,x.jsx)(E.Z.Item,{name:F(n),rules:[{type:"string",pattern:/^[a-zA-Z0-9_/-]*$/,message:L("session.launcher.FolderAliasInvalid")},{type:"string",validator:function(){var t=(0,a.Z)((0,i.Z)().mark((function t(r,o){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o||!f().some(e,(function(e,t){return t!==F(n)&&e===xe(F(n),o)}))){t.next=2;break}return t.abrupt("return",Promise.reject(L("session.launcher.FolderAliasOverlapping")));case 2:return t.abrupt("return",Promise.resolve());case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}],extra:xe(n.name,B.getFieldValue(F(n))),children:(0,x.jsx)(I.Z,{onClick:function(e){e.stopPropagation()},placeholder:L("session.launcher.FolderAlias"),onChange:ge,allowClear:!0})})}})]})},fixed:"left"},{title:L("data.UsageMode"),dataIndex:"usage_mode",sorter:function(e,n){return e.usage_mode.localeCompare(n.usage_mode)}},{title:L("data.Host"),dataIndex:"host"},{title:L("data.Type"),dataIndex:"type",sorter:function(e,n){return e.type.localeCompare(n.type)},render:function(e,n){return(0,x.jsxs)(S.Z,{direction:"column",children:["user"===n.type?(0,x.jsx)(re.Z,{title:"User"}):(0,x.jsx)("div",{children:"Group"}),"group"===n.type&&"(".concat(n.group_name,")")]})}},{title:L("data.Permission"),dataIndex:"permission",sorter:function(e,n){return e.permission.localeCompare(n.permission)},render:function(e,n){return(0,x.jsx)(ne,{permission:n.permission})}},{title:L("data.Created"),dataIndex:"created_at",sorter:function(e,n){return e.created_at.localeCompare(n.created_at)},render:function(e,n){return k()(e).format("L")}}];return(0,x.jsxs)(S.Z,{direction:"column",align:"stretch",gap:"xs",children:[(0,x.jsxs)(S.Z,{direction:"row",gap:"xs",justify:"between",children:[(0,x.jsx)(I.Z,{value:ve,onChange:function(e){return pe(e.target.value)},allowClear:!0,placeholder:L("data.SearchByName")}),(0,x.jsx)(h.ZP,{loading:ce,icon:(0,x.jsx)(ie.Z,{}),onClick:function(){ue((function(){H()}))}})]}),(0,x.jsx)(E.Z,{form:B,children:(0,x.jsx)(se.Z,(0,l.Z)({scroll:{x:"max-content"},rowKey:F,rowSelection:{selectedRowKeys:V,onChange:function(e){M(e),ge()}},showSorterTooltip:!1,columns:je,dataSource:fe,onRow:function(e,n){return{onClick:function(n){var t,r=n.target;null!==r&&void 0!==r&&null!==(t=r.classList)&&void 0!==t&&t.contains("ant-table-selection-column")&&(n.stopPropagation(),V.includes(F(e))?M(V.filter((function(n){return n!==F(e)}))):M([].concat((0,$.Z)(V),[F(e)])))}}}},w))})]})},ue=function(e){var n=Object.assign({},((0,R.Z)(e),e)),t=E.Z.useFormInstance(),r=(0,_.$G)().t;return E.Z.useWatch("vfoldersAliasMap",t),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(E.Z.Item,{hidden:!0,name:"vfoldersAliasMap",rules:[{validator:function(e,n){var i=f().chain(t.getFieldValue("mounts")).reduce((function(e,t){return e[t]=n[t]||"/home/work/"+t,e}),{}).values().value();return f().uniq(i).length!==i.length?Promise.reject(r("session.launcher.FolderAliasOverlapping")):Promise.resolve()}}],children:(0,x.jsx)(I.Z,{})}),(0,x.jsx)(E.Z.Item,(0,l.Z)((0,l.Z)({name:"mounts"},n),{},{valuePropName:"selectedRowKeys",trigger:"onChangeSelectedRowKeys",children:(0,x.jsx)(ce,{rowKey:"name",showAliasInput:!0,aliasMap:t.getFieldValue("vfoldersAliasMap"),onChangeAliasMap:function(e){t.setFieldValue("vfoldersAliasMap",e),t.validateFields(["vfoldersAliasMap"])},pagination:!1})}))]})},de=t(92331),me=t(91428),he=t(70442),ve=t(84239),pe=t(89898),fe=t(99269),ge=t(90632),xe=t(46734),Ze=t(88464),je=t(60284),ye=t(41366),be=t(22733),we=t(14634),ke=t(62708),Fe=t(35492),Ce=t(2704),Pe=t(66653),Se=t(93448),Te=t(52176),Ve=t(32461),Ee=t(48196),Ie=t(17490),_e=t(12674),Me=t(4996),Ae=t(5936),Ne=t(55144),Oe=(0,l.Z)({sessionType:"interactive",allocationPreset:"custom",hpcOptimization:{autoEnabled:!0,OMP_NUM_THREADS:"1",OPENBLAS_NUM_THREADS:"1"},batch:{enabled:!1,command:void 0,scheduleDate:void 0},envvars:[]},G.ds),ze=(0,Ne.withDefault)(Ne.NumberParam,0),Re=(0,Ne.withDefault)(Ne.JsonParam,Oe),De=function(e){var n=e.form,t=e.containerCount,r=void 0===t?1:t;return(0,x.jsxs)(x.Fragment,{children:[f().map(f().omit(n.getFieldValue("resource"),"shmem","accelerator","acceleratorType"),(function(e,t){var i,o;return(0,x.jsx)(U.ZP,{type:t,value:"mem"===t?((null===(i=(0,Q.PZ)(e,"b"))||void 0===i?void 0:i.number)||0)*r+"":f().toNumber(e)*r+"",opts:{shmem:n.getFieldValue("resource").shmem?((null===(o=(0,Q.PZ)(n.getFieldValue("resource").shmem,"b"))||void 0===o?void 0:o.number)||0)*r:void 0}},t)})),f().isNumber(n.getFieldValue(["resource","accelerator"]))&&(0,x.jsx)(U.ZP,{type:n.getFieldValue(["resource","acceleratorType"]),value:f().toString(n.getFieldValue(["resource","accelerator"])*r)})]})},Be=function(){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=0;t<8;t++)e+=n.charAt(Math.floor(62*Math.random()));return e+"-session"},Le=function(){for(var e,n=Math.floor(52*Math.random()*52*52),t="",r=0;r<3;r++)t+=(e=n%52)<26?String.fromCharCode(65+e):String.fromCharCode(97+e-26),n=Math.floor(n/52);return t},Ke=function(){var e,n,t,r,c,u,d,p="normal",Z=(0,g.useState)(!1),y=(0,s.Z)(Z,2),b=y[0],w=y[1],F=(0,Ne.useQueryParams)({step:ze,formValues:Re,redirectTo:Ne.StringParam}),T=(0,s.Z)(F,2),V=T[0],M=V.step,A=V.formValues,R=V.redirectTo,K=T[1],U=(0,_e.s0)(),$=(0,P.useWebComponentInfo)().moveTo,J=(0,D.Dj)(),X=(0,D.qh)(),Y=(0,ge.Z)((function(){console.log("syncFormToURLWithDebounce",le.getFieldsValue()),K({formValues:f().omit(le.getFieldsValue(),["environments.image"])},"replaceIn")}),{leading:!1,wait:500,trailing:!0}).run,ee=function(e){K({step:e},"pushIn")},ne=m.Z.useToken().token,re=(0,_.$G)().t,ie=xe.ZP.useBreakpoint(),ae=E.Z.useForm(),le=(0,s.Z)(ae,1)[0];(0,g.useEffect)((function(){JSON.stringify(Oe)!==JSON.stringify(A)&&(le.setFieldsValue(A),le.validateFields().catch((function(e){})))}),[]),(0,g.useEffect)((function(){}),[M]);var ce=E.Z.useWatch("sessionType",{form:le,preserve:!0})||le.getFieldValue("sessionType")||A.sessionType,Ke=f().filter([{title:re("session.launcher.SessionType"),key:"sessionType"},{title:"".concat(re("session.launcher.Environments")," & ").concat(re("session.launcher.ResourceAllocation")," "),key:"environment"},"inference"!==ce&&{title:re("webui.menu.Data&Storage"),key:"storage"},{title:re("session.launcher.Network"),key:"network"},{title:re("session.launcher.ConfirmAndLaunch"),icon:(0,x.jsx)(de.Z,{}),key:"review"}],(function(e){return!!e})),qe=null===(e=Ke[M])||void 0===e?void 0:e.key,We=f().some(le.getFieldsError(),(function(e){return e.errors.length>0})),Ge=function(){le.validateFields().catch((function(e){})).finally((function(){ee(Ke.length-1)}))};return(0,x.jsxs)(S.Z,{direction:"column",align:"stretch",style:{padding:ne.paddingSM,width:"100%",justifyContent:"revert"},children:[(0,x.jsx)("style",{children:".session-type-radio-group .ant-radio {\n  align-self: flex-start;\n  margin-top: 2px;\n}\n"}),R&&(0,x.jsx)(je.Z,{items:[{title:re("webui.menu.Sessions"),onClick:function(e){e.preventDefault(),$(R)},href:R},{title:re("session.launcher.StartNewSession")}]}),(0,x.jsxs)(S.Z,{direction:"row",gap:"md",align:"start",children:[(0,x.jsxs)(S.Z,{direction:"column",align:"stretch",style:{flex:1,maxWidth:700},children:[(0,x.jsxs)(S.Z,{direction:"row",justify:"between",children:[(0,x.jsx)(oe.Z.Title,{level:3,style:{marginTop:0},children:re("session.launcher.StartNewSession")}),(0,x.jsxs)(S.Z,{direction:"row",gap:"sm",children:[(0,x.jsx)(ye.Z,{title:re("button.Reset"),description:re("session.launcher.ResetFormConfirm"),onConfirm:function(){le.resetFields(),U("/session/start")},icon:(0,x.jsx)(te.Z,{style:{color:ne.colorError}}),okText:re("button.Reset"),okButtonProps:{danger:!0},children:(0,x.jsx)(h.ZP,{danger:!0,type:"link",style:{paddingRight:0,paddingLeft:0},children:re("button.Reset")})}),(0,x.jsx)(h.ZP,{type:"link",icon:(0,x.jsx)(me.Z,{}),disabled:!0,style:{paddingRight:0,paddingLeft:0},children:re("session.launcher.TemplateAndHistory")})]})]}),(0,x.jsx)(E.Z.Provider,{onFormChange:function(e,n){Y()},children:(0,x.jsx)(E.Z,{form:le,layout:"vertical",requiredMark:"optional",initialValues:Oe,children:(0,x.jsxs)(S.Z,{direction:"column",align:"stretch",gap:"md",children:[(0,x.jsxs)(v.Z,{title:re("session.launcher.SessionType"),style:{display:"sessionType"===qe?"block":"none"},children:[(0,x.jsx)(E.Z.Item,{name:"sessionType",children:(0,x.jsx)(be.ZP.Group,{className:"session-type-radio-group",options:[{label:(0,x.jsxs)(S.Z,{direction:"column",align:"start",style:{marginBottom:ne.marginXS},children:[(0,x.jsx)(oe.Z.Text,{strong:!0,children:"\ud83c\udfc3\u200d\u2640\ufe0f Make, test and run"}),(0,x.jsxs)(oe.Z.Text,{type:"secondary",children:[(0,x.jsx)(oe.Z.Text,{code:!0,children:"Interactive mode"})," ","allows you to create, test and run code interactively via jupyter notebook, visual studio code, etc."]})]}),value:"interactive"},{label:(0,x.jsxs)(S.Z,{direction:"column",align:"start",children:[(0,x.jsx)(oe.Z.Text,{strong:!0,children:"\u231a\ufe0f Start an long-running task"}),(0,x.jsxs)(oe.Z.Text,{type:"secondary",children:[(0,x.jsx)(oe.Z.Text,{code:!0,children:"Batch mode"})," ","runs your code with multiple node & clusters to scale your idea"]})]}),value:"batch"}]})}),(0,x.jsx)(H,{})]}),"batch"===ce&&(0,x.jsxs)(v.Z,{title:re("session.launcher.BatchModeConfig"),style:{display:"sessionType"===qe?"block":"none"},children:[(0,x.jsx)(E.Z.Item,{label:re("session.launcher.StartUpCommand"),name:["batch","command"],rules:[{required:!0,type:"string"}],children:(0,x.jsx)(I.Z.TextArea,{autoSize:!0})}),(0,x.jsx)(E.Z.Item,{label:re("session.launcher.SessionStartTime"),children:(0,x.jsxs)(S.Z,{direction:"row",gap:"xs",children:[(0,x.jsx)(E.Z.Item,{noStyle:!0,name:["batch","enabled"],valuePropName:"checked",children:(0,x.jsx)(we.Z,{onChange:function(e){e.target.checked&&f().isEmpty(le.getFieldValue(["batch","scheduleDate"]))?le.setFieldValue(["batch","scheduleDate"],k()().add(2,"minutes").toISOString()):!1===e.target.checked&&le.setFieldValue(["batch","scheduleDate"],void 0)},children:re("session.launcher.Enable")})}),(0,x.jsx)(E.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){var t,r;return(null===(t=e.batch)||void 0===t?void 0:t.enabled)!==(null===(r=n.batch)||void 0===r?void 0:r.enabled)},children:function(){var e,n=!0!==(null===(e=le.getFieldValue("batch"))||void 0===e?void 0:e.enabled);return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(E.Z.Item,{name:["batch","scheduleDate"],noStyle:!0,rules:[{validator:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!k()(t).isBefore(k()())){e.next=2;break}return e.abrupt("return",Promise.reject(re("session.launcher.StartTimeMustBeInTheFuture")));case 2:return e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}],children:(0,x.jsx)(C,{disabled:n,showTime:!0,localFormat:!0,disabledDate:function(e){return e.isBefore(k()().startOf("day"))}})})})}})]})})]}),"inference"===ce&&(0,x.jsx)(v.Z,{title:"Inference Mode Configuration",children:(0,x.jsx)(E.Z.Item,{name:["inference","vFolderName"],label:re("session.launcher.ModelStorageToMount"),rules:[{required:!0}],children:(0,x.jsx)(B.Z,{})})}),(0,x.jsxs)(v.Z,{title:re("session.launcher.Environments"),style:{display:"environment"===qe?"block":"none"},children:[(0,x.jsx)(Ie.SV,{fallbackRender:function(e){return console.log(e),null},children:(0,x.jsx)(O.Z,{})}),(0,x.jsx)(E.Z.Item,{label:"Environment Variables",children:(0,x.jsx)(N,{name:"envvars",formItemProps:{validateTrigger:["onChange","onBlur"]}})})]}),(0,x.jsx)(v.Z,{title:re("session.launcher.ResourceAllocation"),style:{display:"environment"===qe?"block":"none"},children:(0,x.jsx)(G.ZP,{enableNumOfSessions:!0})}),(0,x.jsxs)(v.Z,{title:re("session.launcher.HPCOptimization"),style:{display:"environment"===qe?"block":"none"},children:[(0,x.jsx)(E.Z.Item,{noStyle:!0,children:(0,x.jsxs)(S.Z,{direction:"row",gap:"sm",children:[(0,x.jsx)(oe.Z.Text,{children:re("session.launcher.SwitchOpenMPoptimization")}),(0,x.jsx)(E.Z.Item,{label:re("session.launcher.SwitchOpenMPoptimization"),name:["hpcOptimization","autoEnabled"],valuePropName:"checked",required:!0,noStyle:!0,children:(0,x.jsx)(ke.Z,{checkedChildren:"ON",unCheckedChildren:"OFF",onChange:function(e){e&&le.setFieldsValue(f().pick(Oe,["hpcOptimization"]))}})})]})}),(0,x.jsx)(E.Z.Item,{noStyle:!0,shouldUpdate:function(e,n){var t,r;return(null===(t=e.hpcOptimization)||void 0===t?void 0:t.autoEnabled)!==(null===(r=n.hpcOptimization)||void 0===r?void 0:r.autoEnabled)},children:function(){var e=le.getFieldValue(["hpcOptimization","autoEnabled"]);return(0,x.jsxs)(Fe.Z,{gutter:ne.marginMD,style:{display:e?"none":void 0,marginTop:ne.marginMD},children:[(0,x.jsx)(Ce.Z,{xs:24,sm:12,children:(0,x.jsx)(E.Z.Item,{style:{flex:1},label:re("session.launcher.NumOpenMPthreads"),name:["hpcOptimization","OMP_NUM_THREADS"],tooltip:(0,x.jsxs)(x.Fragment,{children:[re("session.launcher.OpenMPOptimization"),(0,x.jsx)(_.cC,{i18nKey:"session.launcher.DescOpenMPOptimization"})]}),required:!0,children:(0,x.jsx)(Pe.Z,{min:0,max:1e3,step:1,stringMode:!0,style:{width:"100%"}})})}),(0,x.jsx)(Ce.Z,{xs:24,sm:12,children:(0,x.jsx)(E.Z.Item,{style:{flex:1},label:re("session.launcher.NumOpenBLASthreads"),name:["hpcOptimization","OPENBLAS_NUM_THREADS"],tooltip:(0,x.jsxs)(x.Fragment,{children:[re("session.launcher.OpenMPOptimization"),(0,x.jsx)(_.cC,{i18nKey:"session.launcher.DescOpenMPOptimization"})]}),required:!0,children:(0,x.jsx)(Pe.Z,{min:0,max:1e3,step:1,stringMode:!0,style:{width:"100%"}})})})]})}})]}),(0,x.jsx)(v.Z,{title:re("webui.menu.Data&Storage"),style:{display:"storage"===qe?"block":"none"},children:(0,x.jsx)(ue,{})}),(0,x.jsx)(v.Z,{title:re("session.launcher.Network"),style:{display:"network"===qe?"block":"none"},children:(0,x.jsx)(W,{})}),"review"===qe&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(j,{title:re("session.launcher.SessionType"),size:"small",status:le.getFieldError("name").length>0||le.getFieldError(["batch","command"]).length>0||le.getFieldError(["batch","scheduleDate"]).length>0?"error":void 0,extraButtonTitle:re("button.Edit"),onClickExtraButton:function(){ee(Ke.findIndex((function(e){return"sessionType"===e.key})))},children:(0,x.jsxs)(Se.Z,{size:"small",children:[(0,x.jsx)(Se.Z.Item,{label:re("session.SessionType"),span:24,children:le.getFieldValue("sessionType")}),!f().isEmpty(le.getFieldValue("name"))&&(0,x.jsx)(Se.Z.Item,{label:re("session.launcher.SessionName"),span:24,children:le.getFieldValue("name")}),"batch"===ce&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Se.Z.Item,{label:re("session.launcher.StartUpCommand"),span:24,children:(0,x.jsx)(I.Z.TextArea,{readOnly:!0,autoSize:!0,value:le.getFieldValue(["batch","command"])})}),(0,x.jsx)(Se.Z.Item,{label:re("session.launcher.ScheduleTimeSimple"),span:24,children:k()(le.getFieldValue(["batch","scheduleDate"])).format("LLL (Z)")})]})]})}),(0,x.jsx)(j,{title:re("session.launcher.Environments"),size:"small",status:f().some(le.getFieldValue("envvars"),(function(e,n){return le.getFieldError(["envvars",n,"variable"]).length>0||le.getFieldError(["envvars",n,"value"]).length>0}))?"error":void 0,extraButtonTitle:re("button.Edit"),onClickExtraButton:function(){ee(Ke.findIndex((function(e){return"environment"===e.key})))},children:(0,x.jsxs)(Se.Z,{size:"small",column:2,children:[(0,x.jsx)(Se.Z.Item,{label:re("session.launcher.Project"),children:X.name}),(0,x.jsx)(Se.Z.Item,{label:re("general.ResourceGroup"),children:le.getFieldValue("resourceGroup")}),(0,x.jsx)(Se.Z.Item,{label:re("general.Image"),span:2,children:(0,x.jsxs)(S.Z,{direction:"row",gap:"xs",style:{flex:1},children:[(0,x.jsx)(z.Z,{image:null===(n=le.getFieldValue("environments"))||void 0===n?void 0:n.version}),(0,x.jsx)(oe.Z.Text,{copyable:!0,code:!0,children:null===(t=le.getFieldValue("environments"))||void 0===t?void 0:t.version})]})}),(null===(r=le.getFieldValue("envvars"))||void 0===r?void 0:r.length)>0&&(0,x.jsx)(Se.Z.Item,{label:re("session.launcher.EnvironmentVariable"),children:null!==(c=le.getFieldValue("envvars"))&&void 0!==c&&c.length?(0,x.jsx)(Me.Z,{style:Ae.Z,codeTagProps:{style:{}},customStyle:{margin:0,width:"100%"},children:f().map(le.getFieldValue("envvars"),(function(e){return"".concat((null===e||void 0===e?void 0:e.variable)||"",'="').concat((null===e||void 0===e?void 0:e.value)||"",'"')})).join("\n")}):(0,x.jsx)(oe.Z.Text,{type:"secondary",children:"-"})})]})}),(0,x.jsx)(j,{title:re("session.launcher.ResourceAllocation"),status:f().some(le.getFieldValue("resource"),(function(e,n){return le.getFieldError(["resource",n]).length>0}))?"error":void 0,size:"small",extraButtonTitle:re("button.Edit"),onClickExtraButton:function(){ee(Ke.findIndex((function(e){return"environment"===e.key})))},children:(0,x.jsxs)(S.Z,{direction:"column",align:"stretch",children:[f().some(le.getFieldValue("resource"),(function(e,n){return le.getFieldWarning(["resource",n]).length>0}))&&(0,x.jsx)(Te.Z,{type:"warning",showIcon:!0,message:re("session.launcher.EnqueueComputeSessionWarning")}),(0,x.jsxs)(Se.Z,{column:2,children:[(0,x.jsx)(Se.Z.Item,{label:re("session.launcher.ResourceAllocationPerContainer"),span:2,children:(0,x.jsxs)(S.Z,{direction:"row",align:"start",gap:"sm",wrap:"wrap",style:{flex:1},children:["custom"===le.getFieldValue("allocationPreset")?"":(0,x.jsx)(L.Z,{children:le.getFieldValue("allocationPreset")}),(0,x.jsx)(De,{form:le})]})}),(0,x.jsx)(Se.Z.Item,{label:re("session.launcher.NumberOfContainer"),children:1===le.getFieldValue("cluster_size")?le.getFieldValue("num_of_sessions"):le.getFieldValue("cluster_size")}),(0,x.jsx)(Se.Z.Item,{label:re("session.launcher.ClusterMode"),children:"single-node"===le.getFieldValue("cluster_mode")?re("session.launcher.SingleNode"):re("session.launcher.MultiNode")})]}),(0,x.jsx)(v.Z,{size:"small",type:"inner",title:re("session.launcher.TotalAllocation"),children:(0,x.jsx)(S.Z,{direction:"row",gap:"xxs",children:(0,x.jsx)(De,{form:le,containerCount:1===le.getFieldValue("cluster_size")?le.getFieldValue("num_of_sessions"):le.getFieldValue("cluster_size")})})})]})}),(0,x.jsx)(j,{title:re("webui.menu.Data&Storage"),size:"small",status:le.getFieldError("vfoldersAliasMap").length>0?"error":void 0,extraButtonTitle:re("button.Edit"),onClickExtraButton:function(){ee(Ke.findIndex((function(e){return"storage"===e.key})))},children:(null===(u=le.getFieldValue("mounts"))||void 0===u?void 0:u.length)>0?(0,x.jsx)(se.Z,{rowKey:"name",size:"small",pagination:!1,columns:[{dataIndex:"name",title:re("data.folders.Name")},{dataIndex:"alias",title:re("session.launcher.FolderAlias"),render:function(e,n){return f().isEmpty(e)?(0,x.jsx)(oe.Z.Text,{type:"secondary",style:{opacity:.7},children:"/home/work/".concat(n.name)}):e}}],dataSource:f().map(le.getFieldValue("mounts"),(function(e){var n;return{name:e,alias:null===(n=le.getFieldValue("vfoldersAliasMap"))||void 0===n?void 0:n[e]}}))}):(0,x.jsx)(Te.Z,{type:"warning",showIcon:!0,message:re("session.launcher.NoFolderMounted")})}),(0,x.jsx)(j,{title:"Network",size:"small",status:le.getFieldError("ports").length>0?"error":void 0,extraButtonTitle:re("button.Edit"),onClickExtraButton:function(){ee(Ke.findIndex((function(e){return"network"===e.key})))},children:(0,x.jsx)(Se.Z,{size:"small",children:(0,x.jsx)(Se.Z.Item,{label:re("session.launcher.PreOpenPortTitle"),children:(0,x.jsxs)(S.Z,{direction:"row",gap:"xs",style:{flex:1},wrap:"wrap",children:[f().sortBy(le.getFieldValue("ports"),(function(e){return parseInt(e)})).map((function(e){return(0,x.jsx)(q,{value:e,style:{margin:0},children:e})})),f().isArray(le.getFieldValue("ports"))&&0!==(null===(d=le.getFieldValue("ports"))||void 0===d?void 0:d.length)?null:(0,x.jsx)(oe.Z.Text,{type:"secondary",children:re("general.None")})]})})})})]}),(0,x.jsxs)(S.Z,{direction:"row",justify:"between",children:[(0,x.jsx)(S.Z,{gap:"sm",children:M===Ke.length-1&&(0,x.jsx)(h.ZP,{icon:(0,x.jsx)(he.Z,{}),disabled:!0,onClick:function(){Ze.ZP.info("Not implemented yet: Template edit modal")},children:"Save as a template"})}),(0,x.jsxs)(S.Z,{direction:"row",gap:"sm",children:[M!==Ke.length-1&&(0,x.jsx)(h.ZP,{onClick:Ge,children:"Skip to Review"}),M>0&&(0,x.jsx)(h.ZP,{onClick:function(){ee(M-1)},icon:(0,x.jsx)(ve.Z,{}),disabled:b,children:"Previous"}),M===Ke.length-1?(0,x.jsx)(h.ZP,{type:"primary",icon:(0,x.jsx)(pe.Z,{}),disabled:We,onClick:function(){w(!0),le.validateFields().then(function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n){var t,r,a,c,u,d;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.environments.version.split("@"),r=(0,s.Z)(t,2),a=r[0],c=r[1],u={kernelName:a,architecture:c,sessionName:f().isEmpty(n.name)?Be():n.name,config:(0,l.Z)((0,l.Z)((0,l.Z)({type:n.sessionType},"batch"===n.sessionType?{startsAt:n.batch.enabled?n.batch.scheduleDate:void 0,startupCommand:n.batch.command}:{}),{},{group_name:X.name,domain:J._config.domainName,scaling_group:n.resourceGroup,cluster_mode:n.cluster_mode,cluster_size:n.cluster_size,maxWaitSeconds:15,cpu:n.resource.cpu,mem:n.resource.mem,shmem:(0,Q.p)(n.resource.mem,"4g")>0&&(0,Q.p)(n.resource.shmem,"1g")<0?"1g":n.resource.shmem},n.resource.accelerator>0?(0,o.Z)({},n.resource.acceleratorType,n.resource.accelerator):void 0),{},{mounts:n.mounts,mount_map:n.vfoldersAliasMap,env:(0,l.Z)((0,l.Z)({},f().fromPairs(n.envvars.map((function(e){return[e.variable,e.value]})))),f().omit(n.hpcOptimization,"autoEnabled")),preopen_ports:f().map(n.ports,(function(e){return parseInt(e)}))})},d=f().map(f().range(n.num_of_sessions||1),(function(e){var t=(n.num_of_sessions||1)>1?"".concat(u.sessionName,"-").concat(Le(),"-").concat(e):u.sessionName;return J.createIfNotExists(u.kernelName,t,u.config,2e4,u.architecture).then((function(e){return null!==e&&void 0!==e&&e.created||Ze.ZP.warning(re("session.launcher.SessionAlreadyExists")),e})).catch((function(e){throw console.log(e),e}))})),e.next=5,Promise.all(d).then((function(e){var t=(0,s.Z)(e,1)[0];if(1===n.num_of_sessions&&"batch"!==n.sessionType){var r,i=t;r="kernelId"in i?{"session-name":i.kernelId,"access-key":"",mode:p}:{"session-uuid":i.sessionId,"session-name":i.sessionName,"access-key":"",mode:p};var o=i.servicePorts;!0===Array.isArray(o)?r["app-services"]=o.map((function(e){return e.name})):r["app-services"]=[],o.length>0&&globalThis.appLauncher.showLauncher(r)}U("/job",{}),$("/job")})).catch((function(){}));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.log("validation errors",e)})).finally((function(){w(!1)}))},loading:b,children:re("session.launcher.Launch")}):(0,x.jsxs)(h.ZP,{type:"primary",ghost:!0,onClick:function(){ee(M+1)},children:["Next ",(0,x.jsx)(fe.Z,{})]})]})]})]})})})]}),ie.lg&&(0,x.jsx)(Ve.Z,{offsetTop:150,style:{zIndex:2},children:(0,x.jsx)(Ee.Z,{size:"small",direction:"vertical",current:M,onChange:function(e){e===Ke.length-1?Ge():ee(e)},items:f().map(Ke,(function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{status:n===M?"process":"wait"})}))})})]})]})}}}]);
//# sourceMappingURL=703.ea3ddaa5.chunk.js.map
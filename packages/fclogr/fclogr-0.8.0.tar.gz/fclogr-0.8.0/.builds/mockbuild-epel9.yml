# Copyright (C) 2023 Maxwell G <maxwell@gtmx.me>
# SPDX-License-Identifier: GPL-2.0-or-later OR MIT
---

image: fedora/rawhide
packages:
  - mock
  - mock-core-configs
  - pipx
  - rpm-build
  - rpmdevtools
  - rpmlint
sources:
  - "https://git.sr.ht/~gotmax23/fclogr"
artifacts:
  - fclogr/results_fclogr.tar.gz
tasks:
  - setup: |
      pipx install nox
      sudo usermod -aG mock $USER
  - mockbuild-epel9: |
      cd fclogr
      nox -e mockbuild -- --resultdir results_fclogr --postinstall -r alma+epel-9-x86_64
      tar cvf results_fclogr.tar.gz results_fclogr
  - rpmlint: |
      cd fclogr
      rpmlint -r fclogr.rpmlintrc results_fclogr/*.rpm

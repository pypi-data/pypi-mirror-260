{% extends 'generic/object.html' %}
{% load helpers %}
{% block content %}
{% load plugins %}
{% load i18n %}


<div class="row">
  <div class="col col-md-6">
    <div class="card">
      <h5 class="card-header">Описание</h5>
      <div class="card-body">
        <table class="table table-hover attr-table">
          <tr>
            <th scope="row">Название</th>
            <td>{{ object.name|placeholder }}</td>
          </tr>
          <tr>
            <th scope="row">Система</th>
            <td><a href="{% url 'plugins:netbox_subsystems:system' pk=object.system.pk %}">{{ object.system }}</a></td>
          </tr>
          <tr>
            <th scope="row">security_id</th>
            <td>{{ object.security_id|placeholder }}</td>
          </tr>
          <tr>
            <td>В составе подсистемы</td>
            <td>{{ object.parent|linkify|placeholder }}</td>
          </tr>
          <tr>
            <td>Описание</td>
            <td>{{ object.description|placeholder }}</td>
          </tr>
          <tr>
            <th scope="row">Короткое именование</th>
            <td>{{ object.slug|placeholder }}</td>
          </tr>
          <tr>
            <th scope="row">Gitlab</th>
            <td><a href="{{ object.gitlab }}">{{ object.gitlab|placeholder }}</a></td>
          </tr>
          <tr>
            <th scope="row">Wiki</th>
            <td><a href="{{ object.wiki }}">{{ object.wiki|placeholder }}</a></td>
          </tr>
          <tr>
            <th scope="row">Уровень критичности ИС</th>
            <td>{% badge object.get_critical_level_display bg_color=object.get_document_type_color %}</td>
          </tr>
          <tr>
            <th scope="row">Категория персональных данных</th>
            <td>{% badge object.get_pers_data_category_display bg_color=object.get_document_type_color %}</td>
          </tr>
          <tr>
            <th scope="row">Перечень конфиденциальной информации</th>
            <td>{% badge object.get_confidential_info_display bg_color=object.get_document_type_color %}</td>
          </tr>
          <tr>
            <th scope="row">Дата ввода в эксплуатацию</th>
            <td>{{ object.comm_date|date:"d.m.Y" }}</td>
          </tr>
          <tr>
            <th scope="row">Приказ ввода в эксплуатацию</th>
            <td>{{ object.com_order|placeholder }}</td>
          </tr>
          <tr>
            <th scope="row">Технологии</th>
            <td>{{ object.technologies|placeholder }}</td>
          </tr>
          <tr>
            <th scope="row">Технологии развертывания</th>
            <td>{{ object.dev_technologies|placeholder }}</td>
          </tr>
          <tr>
            <th scope="row">Коробочное решение</th>
            <td>{% if object.is_box_solution %}Да{% else %}Нет{% endif %}</td>
          </tr>

          <tr>
            <th scope="row">Система на аутсорсе</th>
            <td>{% if object.is_otsrc_sys %}Да{% else %}Нет{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Администрирование системы на аутсорсе</th>
            <td>{% if object.is_otsrc_adm %}Да{% else %}Нет{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Поддержка системы на аутсорсе</th>
            <td>{% if object.is_otsrc_sup %}Да{% else %}Нет{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Доступно ли решение из сети Интернет</th>
            <td>{% if object.is_internet %}Да{% else %}Нет{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Доступ из сети других организаций ЕИРЖС</th>
            <td>{% if object.is_able_eirjs %}Да{% else %}Нет{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Есть ли API и используется ли API у решения</th>
            <td>{% if object.is_able_api %}Да{% else %}Нет{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Нужен ли API доступ из сети Интернет</th>
            <td>{% if object.is_api_internet %}Да{% else %}Нет{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Доступ из сети подрядчика, контрагента</th>
            <td>{% if object.is_cont_access %}Да{% else %}Нет{% endif %}</td>
          </tr>
          <tr>
            <th scope="row">Обработка конф информации</th>
            <td>{% if object.is_conf_info %}Да{% else %}Нет{% endif %}</td>
          </tr>
        </table>
      </div>
    </div>
    {% include 'inc/panels/custom_fields.html' %}
    {% plugin_left_page object %}
  </div>
  <div class="col col-md-6">
    <div class="card">
      <h5 class="card-header">Связанные объекты</h5>
      <ul class="list-group list-group-flush">
        {% for obj, val in object.get_related_objects.items %}
          {% if val.model == 'device' %}
            <a href="{% url 'dcim:device_list' %}?cf_subsystem={{ object.pk }}" class="list-group-item list-group-item-action d-flex justify-content-between">
          {% elif val.model == 'virtualmachine' %}
            <a href="{% url 'virtualization:virtualmachine_list' %}?cf_subsystem={{ object.pk }}" class="list-group-item list-group-item-action d-flex justify-content-between">
          {% elif val.model == 'cluster' %}
            <a href="{% url 'virtualization:cluster_list' %}?cf_subsystem={{ object.pk }}" class="list-group-item list-group-item-action d-flex justify-content-between">
          {% elif val.model == 'l2vpn' %}
            <a href="{% url 'vpn:l2vpn_list' %}?cf_subsystem={{ object.pk }}" class="list-group-item list-group-item-action d-flex justify-content-between">
          {% elif val.model == 'asn' %}
            <a href="{% url 'ipam:asn_list' %}?cf_subsystem={{ object.pk }}" class="list-group-item list-group-item-action d-flex justify-content-between">
          {% elif val.model == 'ipaddress' %}
            <a href="{% url 'ipam:ipaddress_list' %}?cf_subsystem={{ object.pk }}" class="list-group-item list-group-item-action d-flex justify-content-between">
          {% elif val.model == 'iprange' %}
            <a href="{% url 'ipam:iprange_list' %}?cf_subsystem={{ object.pk }}" class="list-group-item list-group-item-action d-flex justify-content-between">
          {% elif val.model == 'prefix' %}
            <a href="{% url 'ipam:prefix_list' %}?cf_subsystem={{ object.pk }}" class="list-group-item list-group-item-action d-flex justify-content-between">
          {% elif val.model == 'vlan' %}
            <a href="{% url 'ipam:vlan_list' %}?cf_subsystem={{ object.pk }}" class="list-group-item list-group-item-action d-flex justify-content-between">
          {% else %}
            <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between">
          {% endif %}
          {{ val.name|title }}
          {% if val.count %}
            <span class="badge bg-primary rounded-pill">{{ val.count }}</span>
          {% else %}
            <span class="badge bg-light rounded-pill">&mdash;</span>
          {% endif %}
          </a>
        {% endfor %}
      </ul>

    </div>
    {% include 'inc/panels/related_objects.html' %}
    {% plugin_right_page object %}
    {% include 'inc/panels/tags.html' %}
    {% include 'inc/panels/comments.html' %}
  </div>
  <div class="row">
    <div class="col col-md-12">
      {% plugin_full_width_page object %}
    </div>
  </div>
</div>
{% endblock content %}

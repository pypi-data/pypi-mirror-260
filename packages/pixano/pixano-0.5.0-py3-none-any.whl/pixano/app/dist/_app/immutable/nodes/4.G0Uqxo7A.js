import{s as R,e as $,c as w,b as B,f as d,m as g,i as k,v as x,n as C,o as Y,r as te,K as Be,t as z,d as A,j as Q,x as H,L as re,a as L,g as M,h as v,y as X,p as Se,l as Z,q as se,u as ne,a8 as ae}from"../chunks/scheduler.Bnq9ByvK.js";import{S as W,i as K,b as O,d as V,m as j,a as b,t as S,e as F,g as G,c as q}from"../chunks/index.DJLQ52VQ.js";import{p as Pe}from"../chunks/stores.C6GCiOo1.js";import{g as Le}from"../chunks/entry.XcZdnu9t.js";import{e as U,b as J,D as Me,c as Ne,d as Ce}from"../chunks/datasetStores.CVZVofCF.js";import{s as He,a as Oe,b as je,c as Fe,d as Ve,e as ze,f as Ae}from"../chunks/icons.nQXAmEt2.js";import"../chunks/command.Vu8xDx8h.js";import{W as Ue}from"../chunks/WarningModal.D9hbj_Gx.js";import{P as Ge}from"../chunks/PrimaryButton.DQOTr3Ek.js";import{H as qe}from"../chunks/Histogram.Bm5E10fH.js";import{L as Re}from"../chunks/loader-2.N9Vla6s1.js";const We=!1,Ke=!1,zt=Object.freeze(Object.defineProperty({__proto__:null,prerender:We,ssr:Ke},Symbol.toStringTag,{value:"Module"}));function Ye(a){let e,r,t;return r=new qe({props:{hist:a[0]}}),{c(){e=$("div"),O(r.$$.fragment),this.h()},l(l){e=w(l,"DIV",{class:!0});var s=B(e);V(r.$$.fragment,s),s.forEach(d),this.h()},h(){g(e,"class","h-40 w-40 mx-auto object-cover rounded")},m(l,s){k(l,e,s),j(r,e,null),t=!0},p(l,[s]){const n={};s&1&&(n.hist=l[0]),r.$set(n)},i(l){t||(b(r.$$.fragment,l),t=!0)},o(l){S(r.$$.fragment,l),t=!1},d(l){l&&d(e),F(r)}}}function Ze(a,e,r){let{value:t}=e;return a.$$set=l=>{"value"in l&&r(0,t=l.value)},[t]}class Je extends W{constructor(e){super(),K(this,e,Ze,Ye,R,{value:0})}}function Qe(a){let e,r;return{c(){e=$("img"),this.h()},l(t){e=w(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){g(e,"class","h-20 w-20 mx-auto object-cover rounded"),x(e.src,r=a[0])||g(e,"src",r),g(e,"alt",a[0])},m(t,l){k(t,e,l)},p(t,[l]){l&1&&!x(e.src,r=t[0])&&g(e,"src",r),l&1&&g(e,"alt",t[0])},i:C,o:C,d(t){t&&d(e)}}}function Xe(a,e,r){let{value:t}=e;return a.$$set=l=>{"value"in l&&r(0,t=l.value)},[t]}class xe extends W{constructor(e){super(),K(this,e,Xe,Qe,R,{value:0})}}function et(a){let e,r,t,l;return{c(){e=$("video"),this.h()},l(s){e=w(s,"VIDEO",{src:!0,class:!0}),B(e).forEach(d),this.h()},h(){x(e.src,r=a[0])||g(e,"src",r),e.loop=!0,e.muted=!0,g(e,"class","h-20 w-20 mx-auto object-cover rounded")},m(s,n){k(s,e,n),a[3](e),t||(l=[Y(e,"mouseenter",a[2]),Y(e,"mouseleave",a[2])],t=!0)},p(s,[n]){n&1&&!x(e.src,r=s[0])&&g(e,"src",r)},i:C,o:C,d(s){s&&d(e),a[3](null),t=!1,te(l)}}}function tt(a,e,r){let{value:t}=e,l,s=!1;function n(){s=!s,s?(r(1,l.playbackRate=4,l),l.play().catch(()=>console.error("video playback error"))):l.pause()}function o(i){Be[i?"unshift":"push"](()=>{l=i,r(1,l)})}return a.$$set=i=>{"value"in i&&r(0,t=i.value)},[t,l,n,o]}class lt extends W{constructor(e){super(),K(this,e,tt,et,R,{value:0})}}function rt(a){let e;return{c(){e=z(a[0])},l(r){e=A(r,a[0])},m(r,t){k(r,e,t)},p(r,[t]){t&1&&Q(e,r[0])},i:C,o:C,d(r){r&&d(e)}}}function st(a,e,r){let{value:t}=e;return a.$$set=l=>{"value"in l&&r(0,t=l.value)},[t]}class ie extends W{constructor(e){super(),K(this,e,st,rt,R,{value:0})}}function nt(a){let e;return{c(){e=$("input"),this.h()},l(r){e=w(r,"INPUT",{type:!0,class:!0}),this.h()},h(){g(e,"type","checkbox"),e.disabled=!0,g(e,"class","pointer-events: none;")},m(r,t){k(r,e,t)},d(r){r&&d(e)}}}function at(a){let e;return{c(){e=$("input"),this.h()},l(r){e=w(r,"INPUT",{type:!0,class:!0}),this.h()},h(){g(e,"type","checkbox"),e.disabled=!0,g(e,"class","pointer-events: none;"),e.checked=!0},m(r,t){k(r,e,t)},d(r){r&&d(e)}}}function it(a){let e;function r(s,n){return s[0]?at:nt}let t=r(a),l=t(a);return{c(){l.c(),e=H()},l(s){l.l(s),e=H()},m(s,n){l.m(s,n),k(s,e,n)},p(s,[n]){t!==(t=r(s))&&(l.d(1),l=t(s),l&&(l.c(),l.m(e.parentNode,e)))},i:C,o:C,d(s){s&&d(e),l.d(s)}}}function ot(a,e,r){let{value:t}=e;return a.$$set=l=>{"value"in l&&r(0,t=l.value)},[t]}class ct extends W{constructor(e){super(),K(this,e,ot,it,R,{value:0})}}function ft(a){let e;return{c(){e=z(a[0])},l(r){e=A(r,a[0])},m(r,t){k(r,e,t)},p(r,[t]){t&1&&Q(e,r[0])},i:C,o:C,d(r){r&&d(e)}}}function ut(a,e,r){let{value:t}=e;return a.$$set=l=>{"value"in l&&r(0,t=l.value)},[t]}class ht extends W{constructor(e){super(),K(this,e,ut,ft,R,{value:0})}}function dt(a){let e,r,t;var l=a[1][a[0].dtype];function s(n,o){return{props:{value:n[0].value}}}return l&&(e=re(l,s(a))),{c(){e&&O(e.$$.fragment),r=H()},l(n){e&&V(e.$$.fragment,n),r=H()},m(n,o){e&&j(e,n,o),k(n,r,o),t=!0},p(n,[o]){if(o&1&&l!==(l=n[1][n[0].dtype])){if(e){G();const i=e;S(i.$$.fragment,1,0,()=>{F(i,1)}),q()}l?(e=re(l,s(n)),O(e.$$.fragment),b(e.$$.fragment,1),j(e,r.parentNode,r)):e=null}else if(l){const i={};o&1&&(i.value=n[0].value),e.$set(i)}},i(n){t||(e&&b(e.$$.fragment,n),t=!0)},o(n){e&&S(e.$$.fragment,n),t=!1},d(n){n&&d(r),e&&F(e,n)}}}function mt(a,e,r){let{itemFeature:t}=e;const l={int:ie,float:ie,bool:ct,str:ht,image:xe,video:lt,histogram:Je};return a.$$set=s=>{"itemFeature"in s&&r(0,t=s.itemFeature)},[t,l]}class ee extends W{constructor(e){super(),K(this,e,mt,dt,R,{itemFeature:0})}}function oe(a,e,r){const t=a.slice();return t[4]=e[r],t}function ce(a,e,r){const t=a.slice();return t[7]=e[r],t}function fe(a,e,r){const t=a.slice();return t[10]=e[r],t}function ue(a,e,r){const t=a.slice();return t[13]=e[r],t}function he(a){let e,r=a[13]+"",t;return{c(){e=$("th"),t=z(r),this.h()},l(l){e=w(l,"TH",{class:!0});var s=B(e);t=A(s,r),s.forEach(d),this.h()},h(){g(e,"class","py-4 font-semibold")},m(l,s){k(l,e,s),v(e,t)},p(l,s){s&1&&r!==(r=l[13]+"")&&Q(t,r)},d(l){l&&d(e)}}}function de(a){let e,r,t=U(Object.values(a[4].views)),l=[];for(let n=0;n<t.length;n+=1)l[n]=me(fe(a,t,n));const s=n=>S(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=H()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=H()},m(n,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,o);k(n,e,o),r=!0},p(n,o){if(o&1){t=U(Object.values(n[4].views));let i;for(i=0;i<t.length;i+=1){const m=fe(n,t,i);l[i]?(l[i].p(m,o),b(l[i],1)):(l[i]=me(m),l[i].c(),b(l[i],1),l[i].m(e.parentNode,e))}for(G(),i=t.length;i<l.length;i+=1)s(i);q()}},i(n){if(!r){for(let o=0;o<t.length;o+=1)b(l[o]);r=!0}},o(n){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)S(l[o]);r=!1},d(n){n&&d(e),X(l,n)}}}function me(a){let e,r,t,l;return r=new ee({props:{itemFeature:{name:a[10].id,dtype:a[10].type,value:a[10].thumbnail}}}),{c(){e=$("td"),O(r.$$.fragment),t=L(),this.h()},l(s){e=w(s,"TD",{class:!0});var n=B(e);V(r.$$.fragment,n),t=M(n),n.forEach(d),this.h()},h(){g(e,"class","py-1 border-b border-slate-300")},m(s,n){k(s,e,n),j(r,e,null),v(e,t),l=!0},p(s,n){const o={};n&1&&(o.itemFeature={name:s[10].id,dtype:s[10].type,value:s[10].thumbnail}),r.$set(o)},i(s){l||(b(r.$$.fragment,s),l=!0)},o(s){S(r.$$.fragment,s),l=!1},d(s){s&&d(e),F(r)}}}function pe(a){let e,r,t=U(Object.values(a[4].features)),l=[];for(let n=0;n<t.length;n+=1)l[n]=_e(ce(a,t,n));const s=n=>S(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=H()},l(n){for(let o=0;o<l.length;o+=1)l[o].l(n);e=H()},m(n,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,o);k(n,e,o),r=!0},p(n,o){if(o&1){t=U(Object.values(n[4].features));let i;for(i=0;i<t.length;i+=1){const m=ce(n,t,i);l[i]?(l[i].p(m,o),b(l[i],1)):(l[i]=_e(m),l[i].c(),b(l[i],1),l[i].m(e.parentNode,e))}for(G(),i=t.length;i<l.length;i+=1)s(i);q()}},i(n){if(!r){for(let o=0;o<t.length;o+=1)b(l[o]);r=!0}},o(n){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)S(l[o]);r=!1},d(n){n&&d(e),X(l,n)}}}function _e(a){let e,r,t,l;return r=new ee({props:{itemFeature:a[7]}}),{c(){e=$("td"),O(r.$$.fragment),t=L(),this.h()},l(s){e=w(s,"TD",{class:!0});var n=B(e);V(r.$$.fragment,n),t=M(n),n.forEach(d),this.h()},h(){g(e,"class","py-1 border-b border-slate-300")},m(s,n){k(s,e,n),j(r,e,null),v(e,t),l=!0},p(s,n){const o={};n&1&&(o.itemFeature=s[7]),r.$set(o)},i(s){l||(b(r.$$.fragment,s),l=!0)},o(s){S(r.$$.fragment,s),l=!1},d(s){s&&d(e),F(r)}}}function ge(a){let e,r,t,l,s,n,o,i,m,D,T=`<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48" class="h-8 w-8 mx-auto p-1 border rounded-full border-slate-300 transition-colors hover:bg-slate-200"><title>Open</title><path d="${He}" fill="currentcolor"></path></svg>`,E,h,_,f;t=new ee({props:{itemFeature:{name:"id",dtype:"str",value:a[4].id}}}),n=new ee({props:{itemFeature:{name:"split",dtype:"str",value:a[4].split}}});let u=a[4].views&&de(a),c=a[4].features&&pe(a);function y(){return a[2](a[4])}return{c(){e=$("tr"),r=$("td"),O(t.$$.fragment),l=L(),s=$("td"),O(n.$$.fragment),o=L(),u&&u.c(),i=L(),c&&c.c(),m=L(),D=$("td"),D.innerHTML=T,E=L(),this.h()},l(I){e=w(I,"TR",{class:!0});var P=B(e);r=w(P,"TD",{class:!0});var p=B(r);V(t.$$.fragment,p),p.forEach(d),l=M(P),s=w(P,"TD",{class:!0});var N=B(s);V(n.$$.fragment,N),N.forEach(d),o=M(P),u&&u.l(P),i=M(P),c&&c.l(P),m=M(P),D=w(P,"TD",{class:!0,"data-svelte-h":!0}),Z(D)!=="svelte-1l3qah7"&&(D.innerHTML=T),E=M(P),P.forEach(d),this.h()},h(){g(r,"class","py-1 border-b border-slate-300"),g(s,"class","py-1 border-b border-slate-300"),g(D,"class","py-1 border-b border-slate-300"),g(e,"class","cursor-pointer hover:bg-slate-100")},m(I,P){k(I,e,P),v(e,r),j(t,r,null),v(e,l),v(e,s),j(n,s,null),v(e,o),u&&u.m(e,null),v(e,i),c&&c.m(e,null),v(e,m),v(e,D),v(e,E),h=!0,_||(f=Y(e,"click",y),_=!0)},p(I,P){a=I;const p={};P&1&&(p.itemFeature={name:"id",dtype:"str",value:a[4].id}),t.$set(p);const N={};P&1&&(N.itemFeature={name:"split",dtype:"str",value:a[4].split}),n.$set(N),a[4].views?u?(u.p(a,P),P&1&&b(u,1)):(u=de(a),u.c(),b(u,1),u.m(e,i)):u&&(G(),S(u,1,1,()=>{u=null}),q()),a[4].features?c?(c.p(a,P),P&1&&b(c,1)):(c=pe(a),c.c(),b(c,1),c.m(e,m)):c&&(G(),S(c,1,1,()=>{c=null}),q())},i(I){h||(b(t.$$.fragment,I),b(n.$$.fragment,I),b(u),b(c),h=!0)},o(I){S(t.$$.fragment,I),S(n.$$.fragment,I),S(u),S(c),h=!1},d(I){I&&d(e),F(t),F(n),u&&u.d(),c&&c.d(),_=!1,f()}}}function pt(a){let e,r,t,l,s,n,o,i,m,D=U(ve(a[0])),T=[];for(let f=0;f<D.length;f+=1)T[f]=he(ue(a,D,f));let E=U(a[0]),h=[];for(let f=0;f<E.length;f+=1)h[f]=ge(oe(a,E,f));const _=f=>S(h[f],1,1,()=>{h[f]=null});return{c(){e=$("div"),r=$("table"),t=$("thead"),l=$("tr");for(let f=0;f<T.length;f+=1)T[f].c();s=L(),n=$("th"),o=L(),i=$("tbody");for(let f=0;f<h.length;f+=1)h[f].c();this.h()},l(f){e=w(f,"DIV",{class:!0});var u=B(e);r=w(u,"TABLE",{class:!0});var c=B(r);t=w(c,"THEAD",{});var y=B(t);l=w(y,"TR",{class:!0});var I=B(l);for(let p=0;p<T.length;p+=1)T[p].l(I);s=M(I),n=w(I,"TH",{class:!0}),B(n).forEach(d),I.forEach(d),y.forEach(d),o=M(c),i=w(c,"TBODY",{});var P=B(i);for(let p=0;p<h.length;p+=1)h[p].l(P);P.forEach(d),c.forEach(d),u.forEach(d),this.h()},h(){g(n,"class","w-24"),g(l,"class","sticky top-0 bg-white shadow-sm shadow-slate-300 border-b border-b-slate-400"),g(r,"class","table-fixed z-0 w-full text-center text-base text-slate-800"),g(e,"class","h-full w-full overflow-y-auto overflow-x-auto rounded-sm bg-white border border-slate-300 shadow-sm shadow-slate-300")},m(f,u){k(f,e,u),v(e,r),v(r,t),v(t,l);for(let c=0;c<T.length;c+=1)T[c]&&T[c].m(l,null);v(l,s),v(l,n),v(r,o),v(r,i);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(i,null);m=!0},p(f,[u]){if(u&1){D=U(ve(f[0]));let c;for(c=0;c<D.length;c+=1){const y=ue(f,D,c);T[c]?T[c].p(y,u):(T[c]=he(y),T[c].c(),T[c].m(l,s))}for(;c<T.length;c+=1)T[c].d(1);T.length=D.length}if(u&3){E=U(f[0]);let c;for(c=0;c<E.length;c+=1){const y=oe(f,E,c);h[c]?(h[c].p(y,u),b(h[c],1)):(h[c]=ge(y),h[c].c(),b(h[c],1),h[c].m(i,null))}for(G(),c=E.length;c<h.length;c+=1)_(c);q()}},i(f){if(!m){for(let u=0;u<E.length;u+=1)b(h[u]);m=!0}},o(f){h=h.filter(Boolean);for(let u=0;u<h.length;u+=1)S(h[u]);m=!1},d(f){f&&d(e),X(T,f),X(h,f)}}}function ve(a){var r,t;const e=["id","split"];return(r=a[0])!=null&&r.views&&e.push.apply(e,Object.keys(a[0].views)),(t=a[0])!=null&&t.features&&e.push.apply(e,Object.keys(a[0].features)),e}function _t(a,e,r){let{items:t}=e;const l=Se();function s(o){l("selectItem",o.id)}const n=o=>{s(o)};return a.$$set=o=>{"items"in o&&r(0,t=o.items)},[t,s,n]}class gt extends W{constructor(e){super(),K(this,e,_t,pt,R,{items:0})}}function be(a,e,r){const t=a.slice();return t[18]=e[r],t}function $e(a){let e,r,t,l,s,n,o,i,m,D,T,E=a[7].length>0&&vt(a);const h=[wt,$t,bt],_=[];function f(c,y){return c[1]?0:c[0].isErrored?2:1}o=f(a),i=_[o]=h[o](a);let u=!a[0].isErrored&&Te(a);return{c(){e=$("div"),r=$("div"),t=$("div"),l=L(),s=$("div"),E&&E.c(),n=L(),i.c(),m=L(),u&&u.c(),D=H(),this.h()},l(c){e=w(c,"DIV",{class:!0});var y=B(e);r=w(y,"DIV",{class:!0});var I=B(r);t=w(I,"DIV",{class:!0}),B(t).forEach(d),l=M(I),s=w(I,"DIV",{class:!0});var P=B(s);E&&E.l(P),P.forEach(d),I.forEach(d),n=M(y),i.l(y),y.forEach(d),m=M(c),u&&u.l(c),D=H(),this.h()},h(){g(t,"class","flex-grow"),g(s,"class","relative flex items-center"),g(r,"class","py-5 h-20 flex space-x-2 items-center"),g(e,"class","w-full h-full flex flex-col")},m(c,y){k(c,e,y),v(e,r),v(r,t),v(r,l),v(r,s),E&&E.m(s,null),v(e,n),_[o].m(e,null),k(c,m,y),u&&u.m(c,y),k(c,D,y),T=!0},p(c,y){c[7].length>0&&E.p(c,y);let I=o;o=f(c),o===I?_[o].p(c,y):(G(),S(_[I],1,1,()=>{_[I]=null}),q(),i=_[o],i?i.p(c,y):(i=_[o]=h[o](c),i.c()),b(i,1),i.m(e,null)),c[0].isErrored?u&&(u.d(1),u=null):u?u.p(c,y):(u=Te(c),u.c(),u.m(D.parentNode,D))},i(c){T||(b(i),T=!0)},o(c){S(i),T=!1},d(c){c&&(d(e),d(m),d(D)),E&&E.d(),_[o].d(),u&&u.d(c)}}}function vt(a){let e,r,t,l,s,n,o,i,m,D,T,E=U(a[7]),h=[];for(let f=0;f<E.length;f+=1)h[f]=we(be(a,E,f));let _=a[5]!==""&&ke(a);return{c(){e=$("select");for(let f=0;f<h.length;f+=1)h[f].c();r=L(),t=$("div"),l=$("input"),n=L(),o=se("svg"),i=se("path"),m=L(),_&&_.c(),this.h()},l(f){e=w(f,"SELECT",{class:!0});var u=B(e);for(let I=0;I<h.length;I+=1)h[I].l(u);u.forEach(d),r=M(f),t=w(f,"DIV",{class:!0});var c=B(t);l=w(c,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),n=M(c),o=ne(c,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,class:!0});var y=B(o);i=ne(y,"path",{d:!0,fill:!0}),B(i).forEach(d),y.forEach(d),m=M(c),_&&_.l(c),c.forEach(d),this.h()},h(){g(e,"class","h-10 px-4 mx-4 border rounded bg-slate-50 border-slate-300"),g(l,"id","sem-search-input"),g(l,"type","text"),l.value=a[5],g(l,"placeholder",s="Semantic search using "+a[6]),g(l,"class","h-10 pl-10 pr-4 rounded-full border text-slate-800 placeholder-slate-500 bg-slate-50 border-slate-300 shadow-slate-300 accent-main"),g(i,"d",Oe),g(i,"fill","currentcolor"),g(o,"xmlns","http://www.w3.org/2000/svg"),g(o,"height","48"),g(o,"viewBox","0 -960 960 960"),g(o,"width","48"),g(o,"class","absolute left-2 h-5 w-5 text-slate-800 pointer-events-none"),g(t,"class","relative flex items-center")},m(f,u){k(f,e,u);for(let c=0;c<h.length;c+=1)h[c]&&h[c].m(e,null);k(f,r,u),k(f,t,u),v(t,l),v(t,n),v(t,o),v(o,i),v(t,m),_&&_.m(t,null),D||(T=Y(l,"change",a[14]),D=!0)},p(f,u){if(u&192){E=U(f[7]);let c;for(c=0;c<E.length;c+=1){const y=be(f,E,c);h[c]?h[c].p(y,u):(h[c]=we(y),h[c].c(),h[c].m(e,null))}for(;c<h.length;c+=1)h[c].d(1);h.length=E.length}u&32&&l.value!==f[5]&&(l.value=f[5]),u&64&&s!==(s="Semantic search using "+f[6])&&g(l,"placeholder",s),f[5]!==""?_?_.p(f,u):(_=ke(f),_.c(),_.m(t,null)):_&&(_.d(1),_=null)},d(f){f&&(d(e),d(r),d(t)),X(h,f),_&&_.d(),D=!1,T()}}}function we(a){let e,r=a[18]+"",t,l;return{c(){e=$("option"),t=z(r),l=L(),this.h()},l(s){e=w(s,"OPTION",{});var n=B(e);t=A(n,r),l=M(n),n.forEach(d),this.h()},h(){e.__value=a[6],ae(e,e.__value)},m(s,n){k(s,e,n),v(e,t),v(e,l)},p(s,n){n&64&&(e.__value=s[6],ae(e,e.__value))},d(s){s&&d(e)}}}function ke(a){let e,r=`<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48" class="h-5 w-5 text-slate-800"><path d="${je}" fill="currentcolor"></path></svg>`,t,l;return{c(){e=$("button"),e.innerHTML=r,this.h()},l(s){e=w(s,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(e)!=="svelte-wv2rtu"&&(e.innerHTML=r),this.h()},h(){g(e,"class","absolute right-2 p-1 rounded-full transition-colors hover:bg-slate-300")},m(s,n){k(s,e,n),t||(l=Y(e,"click",a[9]),t=!0)},p:C,d(s){s&&d(e),t=!1,l()}}}function bt(a){let e,r,t="Error: dataset items could not be loaded",l,s,n;return s=new Ge({props:{$$slots:{default:[kt]},$$scope:{ctx:a}}}),s.$on("click",a[9]),{c(){e=$("div"),r=$("p"),r.textContent=t,l=L(),O(s.$$.fragment),this.h()},l(o){e=w(o,"DIV",{class:!0});var i=B(e);r=w(i,"P",{"data-svelte-h":!0}),Z(r)!=="svelte-lcj0vm"&&(r.textContent=t),l=M(i),V(s.$$.fragment,i),i.forEach(d),this.h()},h(){g(e,"class","flex flex-col gap-5 justify-center align-middle text-center max-w-xs m-auto mt-10")},m(o,i){k(o,e,i),v(e,r),v(e,l),j(s,e,null),n=!0},p(o,i){const m={};i&2097152&&(m.$$scope={dirty:i,ctx:o}),s.$set(m)},i(o){n||(b(s.$$.fragment,o),n=!0)},o(o){S(s.$$.fragment,o),n=!1},d(o){o&&d(e),F(s)}}}function $t(a){let e,r;return e=new gt({props:{items:a[0].page.items}}),e.$on("selectItem",a[15]),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){j(e,t,l),r=!0},p(t,l){const s={};l&1&&(s.items=t[0].page.items),e.$set(s)},i(t){r||(b(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){F(e,t)}}}function wt(a){let e,r,t;return r=new Re({props:{class:"animate-spin"}}),{c(){e=$("div"),O(r.$$.fragment),this.h()},l(l){e=w(l,"DIV",{class:!0});var s=B(e);V(r.$$.fragment,s),s.forEach(d),this.h()},h(){g(e,"class","flex-grow flex justify-center items-center")},m(l,s){k(l,e,s),j(r,e,null),t=!0},p:C,i(l){t||(b(r.$$.fragment,l),t=!0)},o(l){S(r.$$.fragment,l),t=!1},d(l){l&&d(e),F(r)}}}function kt(a){let e;return{c(){e=z("Try again")},l(r){e=A(r,"Try again")},m(r,t){k(r,e,t)},d(r){r&&d(e)}}}function Te(a){let e,r,t,l=1+a[3]*(a[2]-1)+"",s,n,o=Math.min(a[3]*a[2],a[0].page.total)+"",i,m,D=a[0].page.total+"",T,E,h=a[0].page.total>a[3]&&Ee(a),_=a[0].page.total>a[3]&&ye(a);return{c(){e=$("div"),h&&h.c(),r=L(),t=$("span"),s=z(l),n=z(" - "),i=z(o),m=z(` of
          `),T=z(D),E=L(),_&&_.c(),this.h()},l(f){e=w(f,"DIV",{class:!0});var u=B(e);h&&h.l(u),r=M(u),t=w(u,"SPAN",{class:!0});var c=B(t);s=A(c,l),n=A(c," - "),i=A(c,o),m=A(c,` of
          `),T=A(c,D),c.forEach(d),E=M(u),_&&_.l(u),u.forEach(d),this.h()},h(){g(t,"class","mx-4"),g(e,"class","w-full py-5 h-20 flex justify-center items-center text-slate-800")},m(f,u){k(f,e,u),h&&h.m(e,null),v(e,r),v(e,t),v(t,s),v(t,n),v(t,i),v(t,m),v(t,T),v(e,E),_&&_.m(e,null)},p(f,u){f[0].page.total>f[3]?h?h.p(f,u):(h=Ee(f),h.c(),h.m(e,r)):h&&(h.d(1),h=null),u&12&&l!==(l=1+f[3]*(f[2]-1)+"")&&Q(s,l),u&13&&o!==(o=Math.min(f[3]*f[2],f[0].page.total)+"")&&Q(i,o),u&1&&D!==(D=f[0].page.total+"")&&Q(T,D),f[0].page.total>f[3]?_?_.p(f,u):(_=ye(f),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(f){f&&d(e),h&&h.d(),_&&_.d()}}}function Ee(a){let e,r=`<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48" class="h-8 w-8 p-1 rounded-full transition-colors hover:bg-slate-300"><path d="${Fe}" fill="currentcolor"></path></svg>`,t,l,s=`<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48" class="h-8 w-8 p-1 rounded-full transition-colors hover:bg-slate-300"><path d="${Ve}" fill="currentcolor"></path></svg>`,n,o;return{c(){e=$("button"),e.innerHTML=r,t=L(),l=$("button"),l.innerHTML=s},l(i){e=w(i,"BUTTON",{"data-svelte-h":!0}),Z(e)!=="svelte-18zo4xr"&&(e.innerHTML=r),t=M(i),l=w(i,"BUTTON",{"data-svelte-h":!0}),Z(l)!=="svelte-1n17f1n"&&(l.innerHTML=s)},m(i,m){k(i,e,m),k(i,t,m),k(i,l,m),n||(o=[Y(e,"click",a[10]),Y(l,"click",a[11])],n=!0)},p:C,d(i){i&&(d(e),d(t),d(l)),n=!1,te(o)}}}function ye(a){let e,r=`<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48" class="h-8 w-8 p-1 rounded-full transition-colors hover:bg-slate-300"><path d="${ze}" fill="currentcolor"></path></svg>`,t,l,s=`<svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48" class="h-8 w-8 p-1 rounded-full transition-colors hover:bg-slate-300"><path d="${Ae}" fill="currentcolor"></path></svg>`,n,o;return{c(){e=$("button"),e.innerHTML=r,t=L(),l=$("button"),l.innerHTML=s},l(i){e=w(i,"BUTTON",{"data-svelte-h":!0}),Z(e)!=="svelte-1d9o6d7"&&(e.innerHTML=r),t=M(i),l=w(i,"BUTTON",{"data-svelte-h":!0}),Z(l)!=="svelte-92h5yb"&&(l.innerHTML=s)},m(i,m){k(i,e,m),k(i,t,m),k(i,l,m),n||(o=[Y(e,"click",a[12]),Y(l,"click",a[13])],n=!0)},p:C,d(i){i&&(d(e),d(t),d(l)),n=!1,te(o)}}}function De(a){let e,r;return e=new Ue({props:{message:"Error while retrieving dataset items.",details:"Please look at the application logs for more information, and report this issue if the error persists."}}),e.$on("confirm",a[16]),{c(){O(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,l){j(e,t,l),r=!0},p:C,i(t){r||(b(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){F(e,t)}}}function Tt(a){let e,r,t,l,s=a[0].page&&$e(a),n=a[4]&&De(a),o=Et;return{c(){e=$("div"),s&&s.c(),r=L(),n&&n.c(),t=L(),this.h()},l(i){e=w(i,"DIV",{class:!0});var m=B(e);s&&s.l(m),r=M(m),n&&n.l(m),t=M(m),m.forEach(d),this.h()},h(){g(e,"class","w-full px-20 bg-slate-50 flex flex-col text-slate-800 min-h-[calc(100vh-80px)]")},m(i,m){k(i,e,m),s&&s.m(e,null),v(e,r),n&&n.m(e,null),v(e,t),l=!0},p(i,[m]){i[0].page?s?(s.p(i,m),m&1&&b(s,1)):(s=$e(i),s.c(),b(s,1),s.m(e,r)):s&&(G(),S(s,1,1,()=>{s=null}),q()),i[4]?n?(n.p(i,m),m&16&&b(n,1)):(n=De(i),n.c(),b(n,1),n.m(e,t)):n&&(G(),S(n,1,1,()=>{n=null}),q())},i(i){l||(b(s),b(n),b(o),l=!0)},o(i){S(s),S(n),S(o),l=!1},d(i){i&&d(e),s&&s.d(),n&&n.d()}}}let Et=!1;function yt(a,e,r){let{selectedDataset:t}=e,l=!1,s,n;J.subscribe(p=>{r(2,s=(p==null?void 0:p.currentPage)||Me),r(3,n=(p==null?void 0:p.pageSize)||Ne)});let o=!1,i="",m;const D=[];if("embeddings"in t.tables)for(const p of t.tables.embeddings)p.type=="search"&&(m||(m=p.source),D.push(p.source));const T=Se();function E(p){T("selectItem",p)}function h(){document.getElementById("sem-search-input").value="",y()}function _(){s>1&&(r(1,l=!0),J.update(p=>({...p,pageSize:(p==null?void 0:p.pageSize)||n,currentPage:1})))}function f(){s>1&&(r(1,l=!0),J.update(p=>({...p,pageSize:(p==null?void 0:p.pageSize)||n,currentPage:s-1})))}function u(){var p;(((p=t.page)==null?void 0:p.total)||1)>s*n&&(r(1,l=!0),J.update(N=>({...N,pageSize:(N==null?void 0:N.pageSize)||n,currentPage:s+1})))}function c(){var p;(((p=t.page)==null?void 0:p.total)||1)>s*n&&(r(1,l=!0),J.update(N=>{var le;return{...N,pageSize:(N==null?void 0:N.pageSize)||n,currentPage:Math.ceil((((le=t.page)==null?void 0:le.total)||1)/n)}}))}function y(){r(5,i=document.getElementById("sem-search-input").value);let p={model:m,search:i};r(1,l=!0),J.update(N=>({...N,currentPage:1,query:p}))}const I=p=>E(p.detail),P=()=>r(4,o=!1);return a.$$set=p=>{"selectedDataset"in p&&r(0,t=p.selectedDataset)},a.$$.update=()=>{var p;a.$$.dirty&1&&(p=t.page)!=null&&p.items&&r(1,l=!1)},[t,l,s,n,o,i,m,D,E,h,_,f,u,c,y,I,P]}class Dt extends W{constructor(e){super(),K(this,e,yt,Tt,R,{selectedDataset:0})}}function Ie(a){let e,r,t;return r=new Dt({props:{selectedDataset:a[0]}}),r.$on("selectItem",a[2]),{c(){e=$("div"),O(r.$$.fragment),this.h()},l(l){e=w(l,"DIV",{class:!0});var s=B(e);V(r.$$.fragment,s),s.forEach(d),this.h()},h(){g(e,"class","pt-20 h-1 min-h-screen")},m(l,s){k(l,e,s),j(r,e,null),t=!0},p(l,s){const n={};s&1&&(n.selectedDataset=l[0]),r.$set(n)},i(l){t||(b(r.$$.fragment,l),t=!0)},o(l){S(r.$$.fragment,l),t=!1},d(l){l&&d(e),F(r)}}}function It(a){var l;let e,r,t=((l=a[0])==null?void 0:l.page)&&Ie(a);return{c(){t&&t.c(),e=H()},l(s){t&&t.l(s),e=H()},m(s,n){t&&t.m(s,n),k(s,e,n),r=!0},p(s,[n]){var o;(o=s[0])!=null&&o.page?t?(t.p(s,n),n&1&&b(t,1)):(t=Ie(s),t.c(),b(t,1),t.m(e.parentNode,e)):t&&(G(),S(t,1,1,()=>{t=null}),q())},i(s){r||(b(t),r=!0)},o(s){S(t),r=!1},d(s){s&&d(e),t&&t.d(s)}}}function St(a,e,r){let t;const l=async n=>{await Le(`/${t.name}/dataset/${n.detail}`)},s=n=>l(n);{let n;Pe.subscribe(o=>n=o.params.dataset),Ce.subscribe(o=>{const i=o==null?void 0:o.find(m=>m.name===n);i&&r(0,t=i)})}return[t,l,s]}class At extends W{constructor(e){super(),K(this,e,St,It,R,{})}}export{At as component,zt as universal};

import{s as J,A as F,G,z as Z,C as q,D as x,E as ee,e as E,a as H,c as L,b as T,l as fe,g as B,f as p,m as v,i as R,h as w,n as se,t as ae,q as Ie,d as le,u as ke,o as he,j as ue,x as me,y as Te,r as He,w as Be,I as je}from"../chunks/scheduler.Bnq9ByvK.js";import{S as Q,i as X,b as j,d as y,m as U,a as $,t as I,e as z,g as te,c as ne}from"../chunks/index.DJLQ52VQ.js";import{p as Pe}from"../chunks/stores.C6GCiOo1.js";import{a as ye,b as Ue,s as ze,c as Re,g as Oe}from"../chunks/api.BxNj-TAm.js";import"../chunks/command.Vu8xDx8h.js";import{a as Fe}from"../chunks/icons.nQXAmEt2.js";import{g as re,a as oe,d as de,e as Ne,s as _e,i as We,b as De,m as Ge,f as Ke}from"../chunks/datasetStores.CVZVofCF.js";import{g as pe}from"../chunks/entry.XcZdnu9t.js";import{T as $e,C as Ye}from"../chunks/TooltipIconButton.DnBmVCDV.js";import{P as Je}from"../chunks/PrimaryButton.DQOTr3Ek.js";import{I as ie,L as Qe}from"../chunks/loader-2.N9Vla6s1.js";const Xe=!1,Ze=!1,Zt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Xe,ssr:Ze},Symbol.toStringTag,{value:"Module"}));function qe(r){let e;const a=r[2].default,t=Z(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&q(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||($(t,s),e=!0)},o(s){I(t,s),e=!1},d(s){t&&t.d(s)}}}function xe(r){let e,a;const t=[{name:"arrow-left-circle"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[qe]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=F(s,t[n]);return e=new ie({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){U(e,n,l),a=!0},p(n,[l]){const i=l&3?re(t,[t[0],l&2&&oe(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){I(e.$$.fragment,n),a=!1},d(n){z(e,n)}}}function et(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M16 12H8"}],["path",{d:"m12 8-4 4 4 4"}]];return r.$$set=l=>{a(1,e=F(F({},e),G(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=G(e),[n,e,t,s]}class tt extends Q{constructor(e){super(),X(this,e,et,xe,J,{})}}function nt(r){let e;const a=r[2].default,t=Z(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&q(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||($(t,s),e=!0)},o(s){I(t,s),e=!1},d(s){t&&t.d(s)}}}function st(r){let e,a;const t=[{name:"arrow-left"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[nt]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=F(s,t[n]);return e=new ie({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){U(e,n,l),a=!0},p(n,[l]){const i=l&3?re(t,[t[0],l&2&&oe(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){I(e.$$.fragment,n),a=!1},d(n){z(e,n)}}}function at(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];return r.$$set=l=>{a(1,e=F(F({},e),G(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=G(e),[n,e,t,s]}class lt extends Q{constructor(e){super(),X(this,e,at,st,J,{})}}function rt(r){let e;const a=r[2].default,t=Z(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&q(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||($(t,s),e=!0)},o(s){I(t,s),e=!1},d(s){t&&t.d(s)}}}function ot(r){let e,a;const t=[{name:"arrow-right"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[rt]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=F(s,t[n]);return e=new ie({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){U(e,n,l),a=!0},p(n,[l]){const i=l&3?re(t,[t[0],l&2&&oe(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){I(e.$$.fragment,n),a=!1},d(n){z(e,n)}}}function it(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];return r.$$set=l=>{a(1,e=F(F({},e),G(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=G(e),[n,e,t,s]}class ct extends Q{constructor(e){super(),X(this,e,it,ot,J,{})}}function ft(r){let e;const a=r[2].default,t=Z(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&q(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||($(t,s),e=!0)},o(s){I(t,s),e=!1},d(s){t&&t.d(s)}}}function ut(r){let e,a;const t=[{name:"database"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[ft]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=F(s,t[n]);return e=new ie({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){U(e,n,l),a=!0},p(n,[l]){const i=l&3?re(t,[t[0],l&2&&oe(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){I(e.$$.fragment,n),a=!1},d(n){z(e,n)}}}function mt(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];return r.$$set=l=>{a(1,e=F(F({},e),G(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=G(e),[n,e,t,s]}class dt extends Q{constructor(e){super(),X(this,e,mt,ut,J,{})}}const _t=dt;function pt(r){let e;const a=r[2].default,t=Z(a,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&q(t,a,s,s[3],e?ee(a,s[3],n,null):x(s[3]),null)},i(s){e||($(t,s),e=!0)},o(s){I(t,s),e=!1},d(s){t&&t.d(s)}}}function ht(r){let e,a;const t=[{name:"home"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[pt]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=F(s,t[n]);return e=new ie({props:s}),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){U(e,n,l),a=!0},p(n,[l]){const i=l&3?re(t,[t[0],l&2&&oe(n[1]),l&1&&{iconNode:n[0]}]):{};l&8&&(i.$$scope={dirty:l,ctx:n}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){I(e.$$.fragment,n),a=!1},d(n){z(e,n)}}}function $t(r,e,a){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}],["polyline",{points:"9 22 9 12 15 12 15 22"}]];return r.$$set=l=>{a(1,e=F(F({},e),G(l))),"$$scope"in l&&a(3,s=l.$$scope)},e=G(e),[n,e,t,s]}class gt extends Q{constructor(e){super(),X(this,e,$t,ht,J,{})}}const vt=gt,bt=""+new URL("../assets/pixano_white.BVKPSmmP.png",import.meta.url).href;function Se(r){var C;let e,a,t=((C=r[0])==null?void 0:C.length)+"",s,n,l,i="datasets",o,u,h,A=r[0].reduce(Ce,0)+"",M,f,d,k="items",b,P,O,g,V,D,W,c,m,N;return{c(){e=E("div"),a=E("span"),s=ae(t),n=H(),l=E("span"),l.textContent=i,o=H(),u=E("div"),h=E("span"),M=ae(A),f=H(),d=E("span"),d.textContent=k,b=H(),P=E("div"),O=E("div"),g=E("div"),V=E("input"),D=H(),W=Ie("svg"),c=Ie("path"),this.h()},l(_){e=L(_,"DIV",{class:!0});var S=T(e);a=L(S,"SPAN",{class:!0});var K=T(a);s=le(K,t),K.forEach(p),n=B(S),l=L(S,"SPAN",{class:!0,"data-svelte-h":!0}),fe(l)!=="svelte-1yocus0"&&(l.textContent=i),S.forEach(p),o=B(_),u=L(_,"DIV",{class:!0});var Y=T(u);h=L(Y,"SPAN",{class:!0});var ge=T(h);M=le(ge,A),ge.forEach(p),f=B(Y),d=L(Y,"SPAN",{class:!0,"data-svelte-h":!0}),fe(d)!=="svelte-1gs9vfx"&&(d.textContent=k),Y.forEach(p),b=B(_),P=L(_,"DIV",{class:!0});var ve=T(P);O=L(ve,"DIV",{class:!0});var be=T(O);g=L(be,"DIV",{class:!0});var ce=T(g);V=L(ce,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),D=B(ce),W=ke(ce,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,class:!0});var we=T(W);c=ke(we,"path",{d:!0,fill:!0}),T(c).forEach(p),we.forEach(p),ce.forEach(p),be.forEach(p),ve.forEach(p),this.h()},h(){v(a,"class","text-3xl"),v(l,"class","ml-2 text-xl"),v(e,"class","h-20 my-5 mr-10 p-5 border-2 rounded-lg border-secondary"),v(h,"class","text-3xl"),v(d,"class","ml-2 text-xl"),v(u,"class","h-20 my-5 mr-10 p-5 border-2 rounded-lg border-secondary"),v(V,"id","search-input"),v(V,"type","text"),v(V,"placeholder","Search datasets"),v(V,"class","h-10 pl-10 pr-4 rounded-full border-2 accent-main border-main text-slate-800 placeholder-slate-500 font-medium"),v(c,"d",Fe),v(c,"fill","currentcolor"),v(W,"xmlns","http://www.w3.org/2000/svg"),v(W,"height","48"),v(W,"viewBox","0 -960 960 960"),v(W,"width","48"),v(W,"class","absolute left-3 h-5 w-5 pointer-events-none text-slate-800"),v(g,"class","h-20 relative flex items-center"),v(O,"class","flex items-center space-x-2"),v(P,"class","grow flex flex-row justify-end items-end")},m(_,S){R(_,e,S),w(e,a),w(a,s),w(e,n),w(e,l),R(_,o,S),R(_,u,S),w(u,h),w(h,M),w(u,f),w(u,d),R(_,b,S),R(_,P,S),w(P,O),w(O,g),w(g,V),w(g,D),w(g,W),w(W,c),m||(N=he(V,"input",r[1]),m=!0)},p(_,S){var K;S&1&&t!==(t=((K=_[0])==null?void 0:K.length)+"")&&ue(s,t),S&1&&A!==(A=_[0].reduce(Ce,0)+"")&&ue(M,A)},d(_){_&&(p(e),p(o),p(u),p(b),p(P)),m=!1,N()}}}function wt(r){let e,a,t=`<img src="${bt}" alt="Logo Pixano" class="w-10 h-10"/> <span class="text-3xl font-bold text-slate-50 uppercase">Pixano</span>`,s,n,l=r[0]&&Se(r);return{c(){e=E("header"),a=E("div"),a.innerHTML=t,s=H(),n=E("div"),l&&l.c(),this.h()},l(i){e=L(i,"HEADER",{class:!0});var o=T(e);a=L(o,"DIV",{class:!0,"data-svelte-h":!0}),fe(a)!=="svelte-ugnup7"&&(a.innerHTML=t),s=B(o),n=L(o,"DIV",{class:!0});var u=T(n);l&&l.l(u),u.forEach(p),o.forEach(p),this.h()},h(){v(a,"class","flex gap-2"),v(n,"class","flex py-5 h-40 w-full items-center flex-wrap text-slate-50"),v(e,"class","p-4 w-full h-fit pt-10 px-20 xl:px-60 flex flex-col justify-evenly bg-primary z-10")},m(i,o){R(i,e,o),w(e,a),w(e,s),w(e,n),l&&l.m(n,null)},p(i,[o]){i[0]?l?l.p(i,o):(l=Se(i),l.c(),l.m(n,null)):l&&(l.d(1),l=null)},i:se,o:se,d(i){i&&p(e),l&&l.d()}}}const Ce=(r,e)=>r+e.num_elements;function It(r,e,a){let{datasets:t}=e;const s=n=>{const l=n.currentTarget;de.update((i=[])=>i.map(o=>({...o,isFiltered:!o.name.toLocaleLowerCase().includes(l.value.toLocaleLowerCase())})))};return r.$$set=n=>{"datasets"in n&&a(0,t=n.datasets)},[t,s]}class kt extends Q{constructor(e){super(),X(this,e,It,wt,J,{datasets:0})}}const Nt=""+new URL("../assets/pixano.NAI_8qFW.png",import.meta.url).href,Dt=(r,e,a)=>{const t=e.findIndex(n=>n.id===a);let s;if(t!==-1){const n=r==="previous"?t-1:t+1;n===-1&&(s=e[e.length-1].id),n===e.length&&(s=e[0].id),n>=0&&n<e.length&&(s=e[n].id)}return s},Ee=[{name:"Dashboard",Icon:vt},{name:"Dataset",Icon:_t}];function Le(r,e,a){const t=r.slice();return t[20]=e[a].name,t[21]=e[a].Icon,t}function St(r){let e,a;return e=new tt({}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){U(e,t,s),a=!0},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function Ae(r){let e,a,t,s;const n=[Et,Ct],l=[];function i(o,u){return o[3]?0:1}return e=i(r),a=l[e]=n[e](r),{c(){a.c(),t=me()},l(o){a.l(o),t=me()},m(o,u){l[e].m(o,u),R(o,t,u),s=!0},p(o,u){let h=e;e=i(o),e===h?l[e].p(o,u):(te(),I(l[h],1,1,()=>{l[h]=null}),ne(),a=l[e],a?a.p(o,u):(a=l[e]=n[e](o),a.c()),$(a,1),a.m(t.parentNode,t))},i(o){s||($(a),s=!0)},o(o){I(a),s=!1},d(o){o&&p(t),l[e].d(o)}}}function Ct(r){let e,a,t,s,n,l,i;return a=new $e({props:{tooltipContent:"Previous item",$$slots:{default:[Lt]},$$scope:{ctx:r}}}),a.$on("click",r[13]),l=new $e({props:{tooltipContent:"Next item",$$slots:{default:[At]},$$scope:{ctx:r}}}),l.$on("click",r[14]),{c(){e=E("div"),j(a.$$.fragment),t=H(),s=ae(r[2]),n=H(),j(l.$$.fragment),this.h()},l(o){e=L(o,"DIV",{class:!0});var u=T(e);y(a.$$.fragment,u),t=B(u),s=le(u,r[2]),n=B(u),y(l.$$.fragment,u),u.forEach(p),this.h()},h(){v(e,"class","flex items-center gap-4")},m(o,u){R(o,e,u),U(a,e,null),w(e,t),w(e,s),w(e,n),U(l,e,null),i=!0},p(o,u){const h={};u&16777216&&(h.$$scope={dirty:u,ctx:o}),a.$set(h),(!i||u&4)&&ue(s,o[2]);const A={};u&16777216&&(A.$$scope={dirty:u,ctx:o}),l.$set(A)},i(o){i||($(a.$$.fragment,o),$(l.$$.fragment,o),i=!0)},o(o){I(a.$$.fragment,o),I(l.$$.fragment,o),i=!1},d(o){o&&p(e),z(a),z(l)}}}function Et(r){let e,a;return e=new Qe({props:{class:"animate-spin"}}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){U(e,t,s),a=!0},p:se,i(t){a||($(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function Lt(r){let e,a;return e=new lt({}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){U(e,t,s),a=!0},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function At(r){let e,a;return e=new ct({}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){U(e,t,s),a=!0},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function Vt(r){let e,a,t,s,n;return e=new r[21]({props:{strokeWidth:1}}),{c(){j(e.$$.fragment),a=H(),t=ae(r[20]),s=H()},l(l){y(e.$$.fragment,l),a=B(l),t=le(l,r[20]),s=B(l)},m(l,i){U(e,l,i),R(l,a,i),R(l,t,i),R(l,s,i),n=!0},p:se,i(l){n||($(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){l&&(p(a),p(t),p(s)),z(e,l)}}}function Ve(r){var s;let e,a;function t(){return r[15](r[20])}return e=new Je({props:{isSelected:(s=r[1])==null?void 0:s.includes(`/${r[20]}`.toLowerCase()),$$slots:{default:[Vt]},$$scope:{ctx:r}}}),e.$on("click",t),{c(){j(e.$$.fragment)},l(n){y(e.$$.fragment,n)},m(n,l){U(e,n,l),a=!0},p(n,l){var o;r=n;const i={};l&2&&(i.isSelected=(o=r[1])==null?void 0:o.includes(`/${r[20]}`.toLowerCase())),l&16777216&&(i.$$scope={dirty:l,ctx:r}),e.$set(i)},i(n){a||($(e.$$.fragment,n),a=!0)},o(n){I(e.$$.fragment,n),a=!1},d(n){z(e,n)}}}function Me(r){let e,a;return e=new Ye({props:{message:"You have unsaved changes",confirm:"Save and continue",alternativeAction:"Continue without saving"}}),e.$on("confirm",r[7]),e.$on("alternative",r[8]),e.$on("cancel",r[16]),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){U(e,t,s),a=!0},p:se,i(t){a||($(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function Mt(r){let e,a,t,s,n,l=`<img src="${Nt}" alt="Logo Pixano" class="w-8 h-8 mx-2"/>`,i,o,u,h,A,M,f,d,k,b,P,O;o=new $e({props:{tooltipContent:r[2]?"Back to dataset":"Back to home",$$slots:{default:[St]},$$scope:{ctx:r}}}),o.$on("click",r[12]);let g=r[2]&&Ae(r),V=Ne(Ee),D=[];for(let m=0;m<V.length;m+=1)D[m]=Ve(Le(r,V,m));const W=m=>I(D[m],1,1,()=>{D[m]=null});let c=r[4]!=="none"&&Me(r);return{c(){e=E("header"),a=E("div"),t=E("div"),s=E("div"),n=E("button"),n.innerHTML=l,i=H(),j(o.$$.fragment),u=H(),h=ae(r[0]),A=H(),g&&g.c(),M=H(),f=E("div");for(let m=0;m<D.length;m+=1)D[m].c();d=H(),c&&c.c(),k=me(),this.h()},l(m){e=L(m,"HEADER",{class:!0});var N=T(e);a=L(N,"DIV",{class:!0});var C=T(a);t=L(C,"DIV",{class:!0});var _=T(t);s=L(_,"DIV",{class:!0});var S=T(s);n=L(S,"BUTTON",{class:!0,"data-svelte-h":!0}),fe(n)!=="svelte-1neur1j"&&(n.innerHTML=l),i=B(S),y(o.$$.fragment,S),u=B(S),h=le(S,r[0]),S.forEach(p),_.forEach(p),A=B(C),g&&g.l(C),M=B(C),f=L(C,"DIV",{class:!0});var K=T(f);for(let Y=0;Y<D.length;Y+=1)D[Y].l(K);K.forEach(p),C.forEach(p),N.forEach(p),d=B(m),c&&c.l(m),k=me(),this.h()},h(){v(n,"class","h-10 w-10"),v(s,"class","flex gap-4 items-center font-light"),v(t,"class","h-10 flex items-center font-semibold text-2xl"),v(f,"class","flex gap-4"),v(a,"class","h-20 p-5 flex justify-between items-center shrink-0 bg-white border-b border-slate-200 shadow-sm text-slate-800"),v(e,"class","w-full fixed z-40")},m(m,N){R(m,e,N),w(e,a),w(a,t),w(t,s),w(s,n),w(s,i),U(o,s,null),w(s,u),w(s,h),w(a,A),g&&g.m(a,null),w(a,M),w(a,f);for(let C=0;C<D.length;C+=1)D[C]&&D[C].m(f,null);R(m,d,N),c&&c.m(m,N),R(m,k,N),b=!0,P||(O=[he(window,"keyup",r[6]),he(n,"click",r[11])],P=!0)},p(m,[N]){const C={};if(N&4&&(C.tooltipContent=m[2]?"Back to dataset":"Back to home"),N&16777216&&(C.$$scope={dirty:N,ctx:m}),o.$set(C),(!b||N&1)&&ue(h,m[0]),m[2]?g?(g.p(m,N),N&4&&$(g,1)):(g=Ae(m),g.c(),$(g,1),g.m(a,M)):g&&(te(),I(g,1,1,()=>{g=null}),ne()),N&515){V=Ne(Ee);let _;for(_=0;_<V.length;_+=1){const S=Le(m,V,_);D[_]?(D[_].p(S,N),$(D[_],1)):(D[_]=Ve(S),D[_].c(),$(D[_],1),D[_].m(f,null))}for(te(),_=V.length;_<D.length;_+=1)W(_);ne()}m[4]!=="none"?c?(c.p(m,N),N&16&&$(c,1)):(c=Me(m),c.c(),$(c,1),c.m(k.parentNode,k)):c&&(te(),I(c,1,1,()=>{c=null}),ne())},i(m){if(!b){$(o.$$.fragment,m),$(g);for(let N=0;N<V.length;N+=1)$(D[N]);$(c),b=!0}},o(m){I(o.$$.fragment,m),I(g),D=D.filter(Boolean);for(let N=0;N<D.length;N+=1)I(D[N]);I(c),b=!1},d(m){m&&(p(e),p(d),p(k)),z(o),g&&g.d(),Te(D,m),c&&c.d(m),P=!1,He(O)}}}function Pt(r,e,a){let{datasetName:t}=e,{pageId:s}=e,{currentDatasetName:n}=e,l,i,o,u,h="none",A="none";_e.subscribe(c=>u=c.canSave),We.subscribe(c=>{a(3,o=c)}),de.subscribe(c=>{l=c});const M=async c=>{var _;const m=l.find(S=>S.name===n),N=Object.values(((_=m==null?void 0:m.page)==null?void 0:_.items)||{}),C=Dt(c,N,i);if(C){const S=`/${n}/dataset/${C}`;if(u)return A=C,a(4,h=S);a(2,i=C),await pe(S)}},f=async c=>{var m;return((m=c.target)==null?void 0:m.tagName)==="INPUT"?c.preventDefault():(c.key==="ArrowLeft"?await M("previous"):c.key==="ArrowRight"&&await M("next"),c.key)},d=async()=>{_e.update(c=>({...c,shouldSave:!0})),await k()},k=async()=>{A!=="none"&&(a(2,i=A),A="none"),await pe(h),a(4,h="none"),_e.set({canSave:!1,shouldSave:!1})},b=async c=>{if(u)return a(4,h=c);await pe(c)},P=()=>b("/"),O=()=>b(i?`/${t}/dataset`:"/"),g=()=>M("previous"),V=()=>M("next"),D=c=>b(`/${t}/${c.toLocaleLowerCase()}`),W=()=>a(4,h="none");return r.$$set=c=>{"datasetName"in c&&a(0,t=c.datasetName),"pageId"in c&&a(1,s=c.pageId),"currentDatasetName"in c&&a(10,n=c.currentDatasetName)},Pe.subscribe(c=>{a(2,i=c.params.itemId)}),[t,s,i,o,h,M,f,d,k,b,n,P,O,g,V,D,W]}class Tt extends Q{constructor(e){super(),X(this,e,Pt,Mt,J,{datasetName:0,pageId:1,currentDatasetName:10})}}const Ht=""+new URL("../assets/favicon.OuiISzV3.ico",import.meta.url).href;function Bt(r){let e,a;return e=new Tt({props:{datasetName:r[1],pageId:r[2],currentDatasetName:r[1]}}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){U(e,t,s),a=!0},p(t,s){const n={};s&2&&(n.datasetName=t[1]),s&4&&(n.pageId=t[2]),s&2&&(n.currentDatasetName=t[1]),e.$set(n)},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function jt(r){let e,a;return e=new kt({props:{datasets:r[0]}}),{c(){j(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,s){U(e,t,s),a=!0},p(t,s){const n={};s&1&&(n.datasets=t[0]),e.$set(n)},i(t){a||($(e.$$.fragment,t),a=!0)},o(t){I(e.$$.fragment,t),a=!1},d(t){z(e,t)}}}function yt(r){let e,a,t,s,n,l,i,o;const u=[jt,Bt],h=[];function A(d,k){return d[2]==="/"?0:1}s=A(r),n=h[s]=u[s](r);const M=r[4].default,f=Z(M,r,r[3],null);return{c(){e=E("link"),a=H(),t=E("div"),n.c(),l=H(),i=E("main"),f&&f.c(),this.h()},l(d){const k=Be("svelte-1lrorme",document.head);e=L(k,"LINK",{rel:!0,type:!0,href:!0}),k.forEach(p),a=B(d),t=L(d,"DIV",{class:!0});var b=T(t);n.l(b),l=B(b),i=L(b,"MAIN",{class:!0});var P=T(i);f&&f.l(P),P.forEach(p),b.forEach(p),this.h()},h(){v(e,"rel","icon"),v(e,"type","image/svg"),v(e,"href",Ht),v(i,"class","h-1 min-h-screen bg-slate-50"),v(t,"class","app")},m(d,k){w(document.head,e),R(d,a,k),R(d,t,k),h[s].m(t,null),w(t,l),w(t,i),f&&f.m(i,null),o=!0},p(d,[k]){let b=s;s=A(d),s===b?h[s].p(d,k):(te(),I(h[b],1,1,()=>{h[b]=null}),ne(),n=h[s],n?n.p(d,k):(n=h[s]=u[s](d),n.c()),$(n,1),n.m(t,l)),f&&f.p&&(!o||k&8)&&q(f,M,d,d[3],o?ee(M,d[3],k,null):x(d[3]),null)},i(d){o||($(n),$(f,d),o=!0)},o(d){I(n),I(f,d),o=!1},d(d){d&&(p(a),p(t)),p(e),h[s].d(),f&&f.d(d)}}}function Ut(r,e,a){let{$$slots:t={},$$scope:s}=e,n,l,i,o,u;async function h(){i=await ye(),Ge.set(i)}async function A(){try{const f=await Ue();a(0,n=f),de.set(f)}catch(f){console.error(f)}}je(async()=>{await A(),await h()});const M=async(f,d,k,b)=>{let P={items:[],total:0},O=!1;if(b!=null&&b.search)try{P=await ze(f,b,d,k)}catch{O=!0}else try{P=await Re(f,d,k),l=await Oe(f)}catch{O=!0}de.update((g=[])=>g.map(V=>V.id===f?{...V,features_values:l.features_values,page:P,isErrored:O}:V))};return De.subscribe(f=>{var k;const d=(k=n==null?void 0:n.find(b=>b.name===u))==null?void 0:k.id;d&&f&&M(d,f.currentPage,f.pageSize,f.query).catch(b=>console.error(b))}),r.$$set=f=>{"$$scope"in f&&a(3,s=f.$$scope)},r.$$.update=()=>{var f;r.$$.dirty&3&&((f=n==null?void 0:n.find(k=>k.name===u))!=null&&f.id)&&De.set(Ke)},Pe.subscribe(f=>{a(2,o=f.route.id),a(1,u=f.params.dataset)}),[n,u,o,s,t]}class qt extends Q{constructor(e){super(),X(this,e,Ut,yt,J,{})}}export{qt as component,Zt as universal};

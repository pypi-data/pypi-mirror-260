import{_ as e,o as t,g as a,w as n,b as s,e as i,B as l,t as o,C as r,O as u,z as d,u as c,M as p,k as m,c as v,a as f,U as h,V as g,n as b,f as x,W as y,m as _,X as $,F as w,L as j,E as k}from"./index-DdDMmZ4g.js";import{_ as S}from"./SLLoading-CJAmM2Mj.js";const C={class:"text-sm flex items-center gap-2"},L={class:"md:block hidden"},V=e({__name:"DeleteButton",props:{type:String,validator:e=>["project","experiment"].includes(e)},emits:["confirm","cancel"],setup(e,{emit:c}){const p=e,m=c,v=()=>{u(d(`common.delete.title.${p.type}`),d(`common.delete.content.${p.type}`),{}).then((()=>{m("confirm")}))};return(e,u)=>(t(),a(r,{onClick:v,theme:"negative",hollow:"","disabled-tip":e.$t("common.delete.not-allowed")},{default:n((()=>[s("div",C,[i(l,{icon:"trash",class:"w-4 h-4"}),s("span",L,o(e.$t("common.delete.button")),1)])])),_:1},8,["disabled-tip"]))}},[["__scopeId","data-v-61afeff3"]]),W={class:"text-xl font-semibold"},z={class:"relative pt-4"},E={class:"font-semibold pb-3"},I=["placeholder"],U={class:"tip text-negative-default"},A={class:"relative"},B={class:"font-semibold pt-5 pb-3"},Z=["placeholder"],q={class:"tip text-negative-default"},D={class:"flex justify-end pt-10"},F=100,M=255,N=e({__name:"EditorWrap",props:{type:String},emits:["confirm"],setup(e,{emit:l}){const u=c(),$=p(),w=e,j=l,k=m({name:"project"===w.type?u.name:$.name,description:"project"===w.type?u.description:$.description}),C=m({name:"",description:""}),L=v((()=>{const e=k.value.name;if(e.length>F)return!1;if(e.startsWith("-")||e.endsWith("-")||e.startsWith("_")||e.endsWith("_"))return!1;return/^[a-zA-Z0-9_\-\u4e00-\u9fa5]+$/.test(e)})),V=v((()=>{const e=k.value.name;return!(e.length>F)&&(!/^[_-]|[_-]$/.test(e)&&!/[^a-zA-Z0-9_-]/.test(e))})),N=v((()=>{var e;return!k.value.description||!((null==(e=k.value.description)?void 0:e.length)>M)})),O=m(!1),T=async()=>{if(C.value={name:"",description:""},"project"===w.type&&!L.value)return _.warning("invalid project name"),C.value.name="too long or invalid characters";if(!V.value)return _.warning("invalid experiment name"),C.value.name="too long or invalid characters";if(!N.value)return _.warning("invalid description"),C.value.description="invalid description";if(k.value.name===u.name&&k.value.description===u.description)return C.value.name="nothing changed in project config";if(k.value.name===$.name&&k.value.description===$.description)return C.value.name="nothing changed in experiment config";let e=!1;"experiment"===w.type&&u.experiments.forEach((t=>{k.value.name===t.name&&k.value.name!==$.name&&(e=!0,C.value.name="The experiment name is duplicated")})),e||(O.value=!0,j("confirm",k.value,(()=>{O.value=!1,_.success(d("common.config-editor.save.success"))})))};return(l,u)=>{var d;const c=r;return t(),f("form",{class:"w-full",onSubmit:y(T,["prevent"])},[s("h1",W,o(l.$t(`common.config-editor.title.${e.type}`)),1),s("div",z,[s("h2",E,o(l.$t(`common.config-editor.sub-title.${e.type}.name`)),1),h(s("input",{type:"text",class:"input","onUpdate:modelValue":u[0]||(u[0]=e=>k.value.name=e),placeholder:`edit your ${e.type} name here`,maxlength:F,pattern:"[a-zA-Z0-9_\\-\\u4e00-\\u9fa5]*",required:""},null,8,I),[[g,k.value.name]]),s("p",{class:b(["absolute bottom-[-20px] text-xs right-0",0===k.value.name.length||k.value.name.length===F?"text-negative-default":""])},o(`${k.value.name.length} / 100`),3),s("span",U,o(C.value.name),1)]),s("div",A,[s("h2",B,o(l.$t(`common.config-editor.sub-title.${e.type}.desc`)),1),h(s("textarea",{class:"input",rows:"10","onUpdate:modelValue":u[1]||(u[1]=e=>k.value.description=e),placeholder:`edit your ${e.type} description here`,maxlength:M},null,8,Z),[[g,k.value.description]]),s("p",{class:b(["absolute bottom-[-20px] text-xs right-0",(null==(d=k.value.description)?void 0:d.length)===M?"text-negative-default":""])},o(`${k.value.description?k.value.description.length:0} / 255`),3),s("span",q,o(C.value.description),1)]),s("div",D,[i(c,{type:"submit",theme:"primary",class:"p-2 rounded flex items-center",disabled:O.value},{default:n((()=>[O.value?(t(),a(S,{key:0,size:"4"})):x("",!0),s("span",null,o(l.$t("common.config-editor.save."+(O.value?"savimg":"default"))),1)])),_:1},8,["disabled"])])],32)}}},[["__scopeId","data-v-b1549d3e"]]),O={__name:"ConfigEditor",props:{type:{type:String,validator:e=>["project","experiment"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["modify"],setup(e,{emit:a}){const s=m(!1),o=a,u=async(e,t)=>{o("modify",e,(()=>{s.value=!1,t()}))};return(a,o)=>{const d=r;return t(),f(w,null,[i(d,{class:"px-3 py-1.5 border-none !text-dimmest rounded",theme:"primary",hollow:"",disabled:e.disabled,"disabled-tip":a.$t("common.config-editor.not-allowed"),onClick:o[0]||(o[0]=e=>s.value=!0)},{default:n((()=>[i(l,{icon:"modify",class:"w-4 h-4"})])),_:1},8,["disabled","disabled-tip"]),i($,{class:"px-10 py-6","max-w":"550",modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value=e)},{default:n((()=>[i(N,{type:e.type,onConfirm:u},null,8,["type"])])),_:1},8,["modelValue"])],64)}}},T=["href"],X=e({__name:"SLStatusLabel",props:{status:{type:Number,required:!0},id:{default:null}},setup(e){const a=j(),n=e,s=v((()=>{const e=d("experiment.status."+n.status);let t,a;switch(n.status){case 0:t="running",a="circle-fill";break;case 1:t="finished",a="success";break;case-1:t="crashed",a="error"}if(!t)throw new Error("Invalid status:"+n.status+"in StatusLabel.vue");return{label:e,class:t,icon:a}})),r=v((()=>{if(n.id)return"/experiment/"+n.id})),u=()=>{r.value&&a.push(r.value)};return(e,a)=>{const n=l;return t(),f("a",{class:b(["sl-status-label",s.value.class]),href:r.value,onClick:y(u,["prevent"])},[i(n,{icon:s.value.icon},null,8,["icon"]),k(" "+o(s.value.label),1)],10,T)}}},[["__scopeId","data-v-d51e3919"]]);export{V as D,O as _,X as a};
